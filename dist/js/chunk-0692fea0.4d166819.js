(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0692fea0"],{1707:function(t,e,a){"use strict";a("b0c0"),a("ac1f"),a("841c");e["a"]={data:function(){return{}},watch:{},created:function(){this.handelRouteHome()},methods:{handelRouteHome:function(){"dispatch_list"===this.$route.name&&this.$route.query.jzName&&"Home"!==!this.$route.query.jzName&&(this.$route.query.freightReqStatus&&(this.statusValue=this.$route.query.freightReqStatus),this.$route.query.stepId&&(this.search.stepId=JSON.parse(this.$route.query.stepId)),this.getData())},home_entrustIndex_m:function(){this.$route.query.jzName&&"Home"!==!this.$route.query.jzName&&(this.$route.query.stepId&&(this.searchForm.stepId=JSON.parse(this.$route.query.stepId)),this.searchForm.entrustExecutoryStatus=this.$route.query.entrustExecutoryStatus,this.handleFilter_m())}}}},"24e6":function(t,e,a){},"546b":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-status"},[a("div",{staticClass:"status-tit"},[t._v("状态：")]),t._l(t.StatusList,(function(e,s){return a("div",{key:s,staticClass:"status-item",class:{active:t.activeIndex==s},on:{click:function(a){return t.auditStatus(s,e.value)}}},[t._v(t._s(e.label))])}))],2)},r=[],n={name:"search-status",props:{StatusList:{type:Array,default:function(){return[]}}},data:function(){return{activeIndex:null}},created:function(){},mounted:function(){},methods:{auditStatus:function(t,e){this.activeIndex!=t?(this.activeIndex=t,this.$emit("auditStatus",e)):(this.activeIndex=-1,this.$emit("auditStatus",""))}}},i=n,o=(a("5e2a"),a("2877")),c=Object(o["a"])(i,s,r,!1,null,"6d16d69a",null);e["a"]=c.exports},"5e2a":function(t,e,a){"use strict";var s=a("cfcb"),r=a.n(s);r.a},"776a":function(t,e,a){},c09f:function(t,e,a){"use strict";var s=a("24e6"),r=a.n(s);r.a},cfcb:function(t,e,a){},e20a:function(t,e,a){"use strict";var s=a("776a"),r=a.n(s);r.a},e44a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"one-logistics"},[a("div",{staticClass:"public-headejz"},[a("tab-two",{on:{handelTab:t.handelTab}})],1),a("div",{staticClass:"public-search-headjz"},[a("search-status",{attrs:{"status-list":t.cptauditStatusList},on:{auditStatus:t.auditStatus}}),a("Divider",{staticStyle:{margin:"20px 0"}}),a("div",{staticClass:"public-search-input-jz"},[a("Row",{staticClass:"publc-bottom20",attrs:{gutter:20}},[a("Col",{attrs:{span:"8"}},[a("Col",{attrs:{span:"12"}},[a("span",{staticStyle:{"padding-left":"14px"}},[t._v(" 启运地:")]),a("adt-city-selector",{attrs:{defaultData:t.startstr},on:{"on-change":t.handelDirStart}})],1),a("Col",{attrs:{span:"12"}},[a("span",{staticStyle:{"padding-left":"5px"}},[t._v("选择场所:")]),a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.searchForm.departurePort,callback:function(e){t.$set(t.searchForm,"departurePort",e)},expression:"searchForm.departurePort"}},t._l(t.departurePortList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("Col",{attrs:{span:"12"}},[a("span",{staticStyle:{"padding-left":"14px"}},[t._v("目的地:")]),a("adt-city-selector",{attrs:{defaultData:t.endstr},on:{"on-change":t.handelDirEnd}})],1),a("Col",{attrs:{span:"12"}},[a("span",{staticStyle:{"padding-left":"5px"}},[t._v("选择场所:")]),a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.searchForm.destinationPort,callback:function(e){t.$set(t.searchForm,"destinationPort",e)},expression:"searchForm.destinationPort"}},t._l(t.destinationPortList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("Col",{attrs:{span:"12"}},[a("span",{staticStyle:{"padding-left":"14px"}},[t._v("中转地:")]),a("adt-city-selector",{attrs:{defaultData:t.midstr},on:{"on-change":t.handelDirMid}})],1),a("Col",{attrs:{span:"12"}},[a("span",{staticStyle:{"padding-left":"5px"}},[t._v("选择场所:")]),a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.searchForm.trsspmPort,callback:function(e){t.$set(t.searchForm,"trsspmPort",e)},expression:"searchForm.trsspmPort"}},t._l(t.trsspmPortList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),a("Row",{staticClass:"publc-bottom20",attrs:{gutter:20}},[a("Col",{attrs:{span:"8"}},[a("Col",{attrs:{span:"12"}},[a("span",{on:{click:function(e){return t.hh()}}},[t._v("合同编号:")]),a("Input",{attrs:{clearable:""},model:{value:t.searchForm.contractCode,callback:function(e){t.$set(t.searchForm,"contractCode",e)},expression:"searchForm.contractCode"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("Col",{attrs:{span:"12"}},[a("span",[t._v("运输类型:")]),a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.searchForm.trspType,callback:function(e){t.$set(t.searchForm,"trspType",e)},expression:"searchForm.trspType"}},t._l(t.trspModeList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("Col",{attrs:{span:"12"}},[a("span",[t._v("货物类型:")]),a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.searchForm.cargoType,callback:function(e){t.$set(t.searchForm,"cargoType",e)},expression:"searchForm.cargoType"}},t._l(t.cargoTypeList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1)],1),a("Divider",{staticStyle:{margin:"20px 0"}}),a("div",{staticClass:"search-btn"},[a("Button",{staticClass:"searchButton",attrs:{shape:"circle"},on:{click:t.handleFilter_m}},[t._v(" 查询 "),a("Icon",{attrs:{type:"ios-search"}})],1)],1)],1),a("div",{staticClass:"public-btn-pagina"},[a("div"),a("pagination",{attrs:{total:t.total,page:t.searchForm.page,limit:t.searchForm.size},on:{"update:page":function(e){return t.$set(t.searchForm,"page",e)},changePage:t.changePage_m}})],1),a("div",{staticClass:"public-component-linejz"}),a("table-cart",{attrs:{tableList:t.listData},on:{goodOkCal:t.goodOkCal}})],1)},r=[],n=(a("4160"),a("a15b"),a("d81d"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),i=a("5530"),o=a("546b"),c=a("25324"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"public-table-cart-boxjz"},t._l(t.tableList,(function(e,s){return a("div",{key:s,staticClass:"card-item"},[a("div",{staticClass:"cart-itemjz"},[a("div",{staticClass:"title"},[a("div",{staticClass:"l"},[a("span",[t._v("单次委托编号："+t._s(e.executoryEntrustCode))]),a("span",[t._v(t._s(e.entrustStatusTranslate))])]),a("div",{staticClass:"r"},[a("Dropdown",[a("span",{staticStyle:{cursor:"pointer"}},[t._v("查看详情")]),a("Icon",{attrs:{type:"ios-arrow-down"}}),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[a("span",{on:{click:function(a){return t.seeDetail(e)}}},[t._v("查看详情")])]),"RECEIVE"==e.entrustStatus&&!e.planCode&&t.isRoles_m(["DIS"])?a("DropdownItem",[a("span",{on:{click:function(a){return t.addPlan(e)}}},[t._v("生成全程物流计划")])]):t._e(),e.planCode?a("DropdownItem",[a("span",{on:{click:function(a){return t.seePlan(e)}}},[t._v("查看全程物流计划")])]):t._e(),"WAIT"==e.entrustStatus?a("DropdownItem",[a("span",{on:{click:function(a){return t.goodsOk(e)}}},[t._v("货好确认")])]):t._e()],1)],1)],1)]),a("div",{staticClass:"public-line1jz",staticStyle:{margin:"6px 0"}}),a("line-header",{attrs:{lineHeaderData:e.location,isBig:!1,cargoTypeTranslate:e.cargoTypeTranslate,trspTypeTranslate:e.trspTypeTranslate}}),a("div",{staticClass:"card-botton-box-bj"},[a("div",{staticClass:"card-botton-box"},[a("div",{staticClass:"item-l"},[t._v(" 发货人: "),a("span",[t._v(t._s(e.consigner))])]),a("div",{staticClass:"item-r"},[t._v(" 收货人: "),a("span",[t._v(t._s(e.consignee))])])])]),a("div",{staticClass:"btm"},[a("div",{staticClass:"l"},[t._v("合同编号: "+t._s(e.contractCode))]),a("div",{staticClass:"r"})])],1)])})),0)},u=[],d=a("6458"),p=a("77ab"),h=a("36d5"),m=(a("e9a7"),{name:"table-cart",mixins:[h["a"]],props:{tableList:{type:Array,default:function(){return[]}}},components:{lineHeader:d["a"]},data:function(){return{}},created:function(){},mounted:function(){},methods:{seeDetail:function(t){this.$router.push({path:"/logisstics-commission/singleDetail",query:{entrustCode:t.entrustCode,executoryEntrustCode:t.executoryEntrustCode,freightReqCode:t.freightReqCode,logisticsSchemeCode:t.logisticsSchemeCode,cargoTypeTranslate:t.cargoTypeTranslate,trspTypeTranslate:t.trspTypeTranslate,lineHeaderData:JSON.stringify(t.location)}})},editHandel:function(t){this.$router.push({path:"/logisstics-commission/edit-one-logistics",query:{entrustCode:t.entrustCode,executoryEntrustCode:t.executoryEntrustCode,freightReqCode:t.freightReqCode,logisticsSchemeCode:t.logisticsSchemeCode,cargoTypeTranslate:t.cargoTypeTranslate,trspTypeTranslate:t.trspTypeTranslate,lineHeaderData:JSON.stringify(t.location)}})},goodsOk:function(t,e){var a=this,s={executoryEntrustCode:t.executoryEntrustCode,entrustExecutoryStatus:"EXECUTE"};Object(p["D"])({data:s}).then((function(t){t.data;a.$Message.success("操作成功"),a.$emit("goodOkCal")}))},seePlan:function(t,e){this.isRoles_m(["ENT"])&&this.$router.push({path:"/logistics-whole-journey-plan/client-plan",query:{entrustCode:t.entrustCode,entrustExecutoryStatus:t.entrustStatus,planCode:t.planCode}}),this.isRoles_m(["SALE"])&&this.$router.push({path:"/logistics-whole-journey-plan/sale-plan-detail",query:{planCode:t.planCode}}),this.isRoles_m(["DIS"])&&this.$router.push({path:"/logistics-whole-journey-plan/plan-detail",query:{planCode:t.planCode}})},addPlan:function(t){this.$router.push({path:"/logistics-whole-journey-plan/generate",query:{executoryEntrustCode:t.executoryEntrustCode}})}}}),f=m,v=(a("c09f"),a("2877")),y=Object(v["a"])(f,l,u,!1,null,"19fea6e1",null),b=y.exports,C=a("3462"),g=a("4702"),_=a("1707"),S=a("e56e"),T={mixins:[g["a"],h["a"],_["a"]],components:{lineHeader:d["a"],tabTwo:C["a"],searchStatus:o["a"],pagination:c["a"],tableCart:b},data:function(){return{searchForm:{page:1,size:4},total:0,startstr:"",endstr:"",midstr:"",listData:[],auditStatusList:this.$getDictionary("ENTRUST_STATUS"),cityData:[],departurePortList:[],destinationPortList:[],trsspmPortList:[],trspModeList:[],cargoTypeList:[]}},computed:{cptauditStatusList:function(){var t=this.auditStatusList.map((function(t){return{label:t.dictionaryValue,value:t.dictionaryKey}}));return t}},created:function(){this.initDic(),this.home_entrustIndex_m()},methods:{auditStatus:function(t){this.searchForm.entrustExecutoryStatus=t},handelTab:function(t){this.$router.push(t)},hh:function(){alert("开发的时候用的入口"),this.$router.push("/logisstics-commission/add-single")},goodOkCal:function(){this.handleFilter_m()},getTableList:function(){var t=this,e=null;this.isRoles_m(["DIS"])&&(e=p["y"]),this.isRoles_m(["SALE"])&&(e=p["z"]),this.isRoles_m(["ENT"])&&(e=p["x"]);var a=Object(i["a"])(Object(i["a"])({},this.searchForm),{},{entrustType:0});e({data:a}).then((function(e){var a=e.data,s=a.content,r=(s[0].res||[]).map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{location:t.getSchemePathListRes})}));t.listData=r,t.total=s[0].totalElements}))},initDic:function(){var t=this;Object(S["e"])({dictionaryTypeKey:"TRANSPORT_TYPE"}).then((function(e){var a=e.data,s=a.map((function(t){return{value:t.dictionaryKey,label:t.dictionaryValue}}));t.trspModeList=s})),Object(S["e"])({dictionaryTypeKey:"GOODS_TYPE"}).then((function(e){var a=e.data,s=a.map((function(t){return{value:t.dictionaryKey,label:t.dictionaryValue}}));t.cargoTypeList=s})),Object(p["f"])().then((function(e){var a=e.data;t.cityData=t._processDr(a)}))},handelDirStart:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.startstr=t.value.join("~"),a.next=3,e._handelDir(t.value);case 3:e.departurePortList=a.sent;case 4:case"end":return a.stop()}}),a)})))()},handelDirEnd:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.endstr=t.value.join("~"),a.next=3,e._handelDir(t.value);case 3:e.destinationPortList=a.sent;case 4:case"end":return a.stop()}}),a)})))()},handelDirMid:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.midstr=t.value.join("~"),a.next=3,e._handelDir(t.value);case 3:e.trsspmPortList=a.sent;case 4:case"end":return a.stop()}}),a)})))()},_handelDir:function(t){return new Promise((function(e){var a=t[t.length-1];Object(p["e"])({city:a}).then((function(t){var a=t.data,s=a&&a.length?a[0]:[],r=s.map((function(t){return{value:t.sttnCode,label:t.sttnName}}));e(r)}))}))},_processDr:function(t){var e=function t(e){e.forEach((function(e){e.child&&(e.value=e.addressCode,e.label=e.addressName,e.children=e.child,delete e.child,t(e.children)),e.child||delete e.child}))};return e(t),t.forEach((function(t){return t.children.forEach((function(t){return t.children.forEach((function(t){return delete t.children}))}))})),t}}},x=T,D=(a("e20a"),Object(v["a"])(x,s,r,!1,null,"5d1277d1",null));e["default"]=D.exports}}]);