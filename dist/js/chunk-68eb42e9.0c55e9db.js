(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68eb42e9"],{"056f":function(e,t,a){"use strict";var s=a("4b3b"),i=a.n(s);i.a},"39ce":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-product"},[a("div",{staticClass:"choose-type"},[e._v(" 选择服务产品类型： "),a("Select",{on:{"on-change":e.goToAddProduct},model:{value:e.productType,callback:function(t){e.productType=t},expression:"productType"}},e._l(e.serviceType,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1),a("div",{staticClass:"white-bg add-product-content"},[a("div",{staticClass:"add-site"},[a("h6",[e._v("添加路线场所：")]),a("div",{staticClass:"container"},[a("Form",{ref:"formValidate",attrs:{"label-position":"left",model:e.siteData,rules:e.ruleValidate,"label-colon":!0,"label-width":75,inline:""}},[a("FormItem",{attrs:{label:"启运地",prop:"dispatchCity","label-width":70}},[a("adt-city-selector",{on:{"on-change":e.changeDispatchCity}})],1),a("FormItem",{attrs:{label:"选择场所",prop:"dispatchSite"}},[a("Select",{attrs:{clearable:""},model:{value:e.siteData.dispatchSite,callback:function(t){e.$set(e.siteData,"dispatchSite",t)},expression:"siteData.dispatchSite"}},e._l(e.dispatchOptions,(function(t,s){return a("Option",{key:s,attrs:{value:t.value+"~"+t.label}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("svg",{staticClass:"iconfont arrow",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongcaidanICON_jiantou"}})]),a("FormItem",{staticStyle:{"margin-left":"50px"},attrs:{label:"目的地",prop:"destinationCity","label-width":70}},[a("adt-city-selector",{on:{"on-change":e.changeDestinationCity}})],1),a("FormItem",{attrs:{label:"选择场所",prop:"destinationSite"}},[a("Select",{attrs:{clearable:""},model:{value:e.siteData.destinationSite,callback:function(t){e.$set(e.siteData,"destinationSite",t)},expression:"siteData.destinationSite"}},e._l(e.destinationOptions,(function(t,s){return a("Option",{key:s,attrs:{value:t.value+"~"+t.label}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1)],1)]),a("div",{staticClass:"choose-parameter"},[a("h6",[e._v("选择参数：")]),a("div",{staticClass:"container"},[a("Form",{ref:"parameterFormValidate",attrs:{"label-position":"left",model:e.parameterData,rules:e.parameterRuleValidate,"label-colon":!0,"label-width":126,inline:""}},[a("FormItem",{attrs:{label:"运输方式",prop:"trspMode"}},[a("Select",{attrs:{clearable:""},model:{value:e.parameterData.trspMode,callback:function(t){e.$set(e.parameterData,"trspMode",t)},expression:"parameterData.trspMode"}},e._l(e.trspMode,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey+"~"+t.dictionaryValue}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1),a("FormItem",{attrs:{label:"运输类型",prop:"trspType"}},[a("Select",{attrs:{clearable:""},model:{value:e.parameterData.trspType,callback:function(t){e.$set(e.parameterData,"trspType",t)},expression:"parameterData.trspType"}},e._l(e.trspType,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey+"~"+t.dictionaryValue}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1),a("FormItem",{attrs:{label:"物流类型",prop:"logisticsType"}},[a("Select",{attrs:{clearable:""},model:{value:e.parameterData.logisticsType,callback:function(t){e.$set(e.parameterData,"logisticsType",t)},expression:"parameterData.logisticsType"}},e._l(e.logisticsType,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey+"~"+t.dictionaryValue}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1),a("FormItem",{attrs:{label:"货物类型",prop:"cargoType"}},[a("Select",{attrs:{clearable:""},model:{value:e.parameterData.cargoType,callback:function(t){e.$set(e.parameterData,"cargoType",t)},expression:"parameterData.cargoType"}},e._l(e.cargoType,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey+"~"+t.dictionaryValue}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1),a("FormItem",{class:this.parameterData.trspType&&"C"===this.parameterData.trspType.split("~")[0]?"ivu-form-item-required":"",attrs:{label:"集装箱尺寸类型",prop:"contaSizeType"}},[a("Select",{attrs:{clearable:""},model:{value:e.parameterData.contaSizeType,callback:function(t){e.$set(e.parameterData,"contaSizeType",t)},expression:"parameterData.contaSizeType"}},e._l(e.contaSizeType,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey+"~"+t.dictionaryValue}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1),a("FormItem",{class:this.parameterData.trspType&&"C"===this.parameterData.trspType.split("~")[0]?"ivu-form-item-required":"",attrs:{label:"集装箱来源",prop:"contaSource"}},[a("Select",{attrs:{clearable:""},model:{value:e.parameterData.contaSource,callback:function(t){e.$set(e.parameterData,"contaSource",t)},expression:"parameterData.contaSource"}},e._l(e.contaSource,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey+"~"+t.dictionaryValue}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1)],1),a("div",{staticClass:"btns"},[a("Button",{on:{click:function(t){return e.handleReset()}}},[e._v("重置参数")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.saveParameter()}}},[e._v("保存参数")])],1)],1)]),a("div",{staticClass:"public-component-line bot-10"}),a("div",{staticClass:"product-list public-modify-record"},[a("div",{staticClass:"collapse"},[a("Collapse",{attrs:{accordion:""},model:{value:e.curCollapse,callback:function(t){e.curCollapse=t},expression:"curCollapse"}},[e._l(e.productAllInfo,(function(t,s){return[a("Panel",{attrs:{name:s+""},on:{click:function(t){e.curCollapse=s}}},[a("Row",[t.serverCode?a("Col",{staticClass:"product-number",attrs:{span:"6"}},[e._v(" 产品编号："+e._s(t.serverCode)+" ")]):e._e(),a("Col",{staticClass:"parameter",attrs:{span:"13"}},[e._v(" 产品参数："+e._s(t.parameters)+" ")]),0===s&&e.hasPendingProduct?a("Col",{staticClass:"btns",attrs:{span:"4"}},[a("Button",{attrs:{size:"small"},on:{click:function(a){return a.stopPropagation(),e.saveProduct(t)}}},[e._v("保存产品")])],1):e._e()],1),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"product-content"},[a("div",{class:["scene-btns",{spread:e.isSceneSpread}]},[a("adt-tab-btns",{staticClass:"scene-tab",attrs:{titleNames:t.sceneNames,isSmallBtn:!0,btnIndex:t.sceneTabIndex||-1,productIndex:s},on:{handleBtn:e.handleSceneBtn}}),a("div",{staticClass:"right-item"},[a("Button",{attrs:{size:"small",disabled:!(0===s&&e.hasPendingProduct)},on:{click:function(t){return e.chooseScene(s)}}},[e._v(" 选择场景 ")]),a("div",{staticClass:"show-all-scene",on:{click:function(t){e.isSceneSpread=!e.isSceneSpread}}},[e._v(" "+e._s((e.isSceneSpread?"收起":"展开")+"所有 >")+" ")])],1)],1),e._l(t.sceneNames,(function(i,n){return a("div",{directives:[{name:"show",rawName:"v-show",value:i===e.curSceneName,expression:"item === curSceneName"}],key:n},[a("adt-tab-btns",{staticClass:"task-tab",attrs:{titleNames:e.titleNames,isUnderline:!0,btnIndex:e.tabIndex,width:250,height:40},on:{handleBtn:e.handleBtn}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isBasicTask,expression:"isBasicTask"}],staticClass:"basic-item"},[a("Row",{staticClass:"item-container"},[a("Col",{staticClass:"item",attrs:{span:"10"}},[e._v(" 基础服务总费用： "),a("Input",{attrs:{disabled:!(0===s&&e.hasPendingProduct)},model:{value:t.scenesList[n].taskBasesList.taskCost,callback:function(a){e.$set(t.scenesList[n].taskBasesList,"taskCost",e._n("string"===typeof a?a.trim():a))},expression:"product.scenesList[idx].taskBasesList.taskCost"}}),a("Select",{staticStyle:{width:"80px"},attrs:{disabled:!(0===s&&e.hasPendingProduct),clearable:""},model:{value:t.scenesList[n].taskBasesList.curr,callback:function(a){e.$set(t.scenesList[n].taskBasesList,"curr",a)},expression:"product.scenesList[idx].taskBasesList.curr"}},e._l(e.currencyCode,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1),e._v(" /"+e._s("C"===t.trspType?"TEU":"KG")+" ")],1),a("Col",{staticClass:"item",attrs:{span:"14"}},[e._v(" 基础服务总时长： "),a("Input",{attrs:{disabled:!(0===s&&e.hasPendingProduct)},model:{value:t.scenesList[n].taskBasesList.serverDuration,callback:function(a){e.$set(t.scenesList[n].taskBasesList,"serverDuration",e._n("string"===typeof a?a.trim():a))},expression:"product.scenesList[idx].taskBasesList.serverDuration"}}),a("Select",{staticStyle:{width:"80px"},attrs:{disabled:!(0===s&&e.hasPendingProduct),clearable:""},model:{value:t.scenesList[n].taskBasesList.serverDurationUnit,callback:function(a){e.$set(t.scenesList[n].taskBasesList,"serverDurationUnit",a)},expression:"product.scenesList[idx].taskBasesList.serverDurationUnit"}},e._l(e.timeUnit,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1)],1),a("adt-task-content",{attrs:{basicTask:t.scenesList[n].taskBasesList.lists,isAdditionalTasks:!1,showPriceAndTime:!1}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isBasicTask,expression:"!isBasicTask"}],staticClass:"additional-item"},[a("h6",[e._v("选择附加任务:")]),a("div",{staticClass:"task-container"},e._l(t.scenesList[n].taskAffixesList,(function(i,n){return a("div",{key:n,staticClass:"task-item"},[a("Checkbox",{attrs:{disabled:!(0===s&&e.hasPendingProduct)},model:{value:i.isChecked,callback:function(t){e.$set(i,"isChecked",t)},expression:"additionalTask.isChecked"}}),a("div",{staticClass:"task-name"},[e._v(e._s(i.taskName))]),a("div",{staticClass:"cost"},[e._v(" 费用： "),a("Input",{attrs:{disabled:!(0===s&&e.hasPendingProduct)},model:{value:i.taskCost,callback:function(t){e.$set(i,"taskCost",e._n("string"===typeof t?t.trim():t))},expression:"additionalTask.taskCost"}}),a("Select",{staticStyle:{width:"80px","margin-left":"12px"},attrs:{disabled:!(0===s&&e.hasPendingProduct),clearable:""},model:{value:i.curr,callback:function(t){e.$set(i,"curr",t)},expression:"additionalTask.curr"}},e._l(e.currencyCode,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1),e._v(" /"+e._s("C"===t.trspType?"TEU":"KG")+" ")],1),a("div",{staticClass:"time"},[e._v(" 时长： "),a("Input",{attrs:{disabled:!(0===s&&e.hasPendingProduct)},model:{value:i.serverDuration,callback:function(t){e.$set(i,"serverDuration",e._n("string"===typeof t?t.trim():t))},expression:"additionalTask.serverDuration"}}),a("Select",{staticStyle:{width:"80px","margin-left":"12px"},attrs:{disabled:!(0===s&&e.hasPendingProduct),clearable:""},model:{value:i.serverDurationUnit,callback:function(t){e.$set(i,"serverDurationUnit",t)},expression:"additionalTask.serverDurationUnit"}},e._l(e.timeUnit,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1)],1)})),0)])],1)})),a("div",{staticClass:"public-component-line thin-line"}),a("Row",{staticClass:"set-dead-line"},[a("Col",{attrs:{span:"10"}},[e._v(" 产品起止日期： "),a("DatePicker",{attrs:{type:"date",disabled:!(0===s&&e.hasPendingProduct)},model:{value:t.serverStartTime,callback:function(a){e.$set(t,"serverStartTime",a)},expression:"product.serverStartTime"}}),e._v(" -- "),a("DatePicker",{attrs:{type:"date",disabled:!(0===s&&e.hasPendingProduct)},model:{value:t.serverEndTime,callback:function(a){e.$set(t,"serverEndTime",a)},expression:"product.serverEndTime"}})],1),a("Col",{attrs:{span:"14"}},[e._v(" 产品报价截止时间前 "),a("Input",{attrs:{disabled:!(0===s&&e.hasPendingProduct)},model:{value:t.serverRemindDuration,callback:function(a){e.$set(t,"serverRemindDuration",e._n(a))},expression:"product.serverRemindDuration"}}),e._v(" 天开始提醒 ")],1)],1)],2)])],1)]}))],2)],1)])]),a("adt-my-modal",{attrs:{title:"选择场景",width:"60%",showModal:e.isSceneModalShow},on:{"on-visible-change":e.sceneVisibleChange,"on-ok":function(t){return e.confirmChooseScene()}}},[a("div",{staticClass:"choose-scene-container"},[a("div",{staticClass:"scene-container"},[a("div",{staticClass:"search-container"},[a("div",{staticClass:"search"},[e._v(" 场景名称： "),a("Input",{model:{value:e.sceneName,callback:function(t){e.sceneName=t},expression:"sceneName"}}),a("Icon",{staticClass:"search-btn",attrs:{type:"ios-search"},on:{click:e.searchScene}})],1),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.previewSort()}}},[e._v("排序预览")])],1),a("Table",{attrs:{"max-height":"500",columns:e.sceneColumns,data:e.sceneTableData,stripe:""},on:{"on-selection-change":e.selectionChange},scopedSlots:e._u([{key:"sort",fn:function(t){var s=t.row,i=t.index;return[a("div",{staticStyle:{position:"relative"}},[a("span",{staticClass:"required-tag"},[e._v("*")]),a("Input",{attrs:{clearable:""},on:{"on-change":function(t){return e.changeRowData(s,i,"sort")}},model:{value:s.sort,callback:function(t){e.$set(s,"sort","string"===typeof t?t.trim():t)},expression:"row.sort"}})],1)]}}])})],1),a("div",{staticClass:"sort-container"},[a("div",{staticClass:"title"},[e._v("场景排序")]),a("Table",{attrs:{columns:e.previewColumns,data:e.previewTableData,"max-height":"500",stripe:""}})],1)])])],1)},i=[],n=(a("99af"),a("a15b"),a("a434"),a("96cf"),a("1da1")),r=a("b85c"),c=a("9c46"),o=a("3fec"),l=a("b962"),d=a("35ec"),u={mixins:[c["a"]],components:{AdtTaskContent:o["a"]},data:function(){return{productType:"T",serviceType:this.$getDictionary("SERVICE_TYPE"),trspMode:this.$getDictionary("TRANSPORT_MODE"),trspType:this.$getDictionary("TRANSPORT_TYPE"),logisticsType:this.$getDictionary("LOGISTICS_TYPE"),cargoType:this.$getDictionary("GOODS_TYPE"),contaSizeType:this.$getDictionary("CONTAINER_SIZE_TYPE"),contaSource:this.$getDictionary("CONTAINER_SOURCE"),currencyCode:this.$getDictionary("CURRENCY_CODE"),timeUnit:this.$getDictionary("TIME_UNIT"),siteData:{dispatchCity:"",dispatchSite:"",destinationCity:"",destinationSite:""},ruleValidate:{dispatchCity:[l["a"].select("启运地")[0]],destinationCity:[l["a"].select("目的地")[0]]},parameterData:{trspMode:"",trspType:"",logisticsType:"",cargoType:"",contaSizeType:"",contaSource:""},parameterRuleValidate:{trspMode:[l["a"].select("运输方式")[0]],trspType:[l["a"].select("运输类型")[0]],logisticsType:[l["a"].select("物流类型")[0]],cargoType:[l["a"].select("货物类型")[0]]},dispatchOptions:[],destinationOptions:[],delUrl:function(){}}},methods:{saveProduct:function(e){var t=this,a=JSON.parse(JSON.stringify(e));if(a.sceneNames.length)if(a.serverStartTime=+new Date(a.serverStartTime)||"",a.serverEndTime=+new Date(a.serverEndTime)||"",a.serverStartTime&&a.serverEndTime)if(a.serverStartTime>a.serverEndTime)this.$Message.warning("起始时间不能大于截止时间！");else if(a.serverRemindDuration){var s,i=Object(r["a"])(a.scenesList);try{for(i.s();!(s=i.n()).done;){var n=s.value;if(void 0===n.taskBasesList.taskCost||""===n.taskBasesList.taskCost)return void this.$Message.warning("请输入".concat(n.sceneName,"下的基础服务总费用！"));if(!n.taskBasesList.curr)return void this.$Message.warning("请输入".concat(n.sceneName,"下的基础服务总费用单位！"));if(void 0===n.taskBasesList.serverDuration||""===n.taskBasesList.serverDuration)return void this.$Message.warning("请输入".concat(n.sceneName,"下的基础服务总时长！"));if(!n.taskBasesList.serverDurationUnit)return void this.$Message.warning("请输入".concat(n.sceneName,"下的基础服务总时长单位！"));var c,o=Object(r["a"])(n.taskBasesList.lists);try{for(o.s();!(c=o.n()).done;){var l=c.value;l.taskCost=n.taskBasesList.taskCost,l.curr=n.taskBasesList.curr,l.serverDuration=n.taskBasesList.serverDuration,l.serverDurationUnit=n.taskBasesList.serverDurationUnit}}catch(p){o.e(p)}finally{o.f()}n.taskBasesList=n.taskBasesList.lists;for(var u=0;u<n.taskAffixesList.length;u++)if(n.taskAffixesList[u].isChecked){if(void 0===!n.taskAffixesList[u].taskCost||""===n.taskAffixesList[u].taskCost)return void this.$Message.warning("请输入".concat(n.sceneName,"选中的附加任务的费用！"));if(!n.taskAffixesList[u].curr)return void this.$Message.warning("请输入".concat(n.sceneName,"选中的附加任务的费用单位！"));if(void 0===n.taskAffixesList[u].serverDuration||""===n.taskAffixesList[u].serverDuration)return void this.$Message.warning("请输入".concat(n.sceneName,"选中的附加任务的时长！"));if(!n.taskAffixesList[u].serverDurationUnit)return void this.$Message.warning("请输入".concat(n.sceneName,"选中的附加任务的时长单位！"));delete n.taskAffixesList[u].isChecked}else n.taskAffixesList.splice(u,1),u--}}catch(p){i.e(p)}finally{i.f()}delete a.parameters,delete a.sceneNames,delete a.sceneTabIndex,delete a.sites,Object(d["n"])({data:a}).then((function(e){t.$Message.success(e.message),t.hasPendingProduct=!1}))}else this.$Message.warning("请输入产品报价截止时间");else this.$Message.warning("请输入产品起止日期！");else this.$Message.warning("请先选择场景！")},changeDispatchCity:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.siteData.dispatchCity=e.data.length?"".concat(e.value.join(";"),"~").concat(e.data[e.data.length-1].addressName):"",a.next=3,t._handelDir(e.value);case 3:t.dispatchOptions=a.sent;case 4:case"end":return a.stop()}}),a)})))()},changeDestinationCity:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.siteData.destinationCity=e.data.length?"".concat(e.value.join(";"),"~").concat(e.data[e.data.length-1].addressName):"",a.next=3,t._handelDir(e.value);case 3:t.destinationOptions=a.sent;case 4:case"end":return a.stop()}}),a)})))()}}},p=u,v=(a("056f"),a("2877")),m=Object(v["a"])(p,s,i,!1,null,"0887e467",null);t["default"]=m.exports},"4b3b":function(e,t,a){}}]);