(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b25a629"],{"4f81":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("adt-btns",{attrs:{titleNames:t.titleNames,btnIndex:t.btnIndex,width:160},on:{handleBtn:t.goToOtherProductList}}),a("adt-search-folder",{attrs:{searchRouter:{query:t.search},isStatus:!0,isTitle:!1}},[a("template",{slot:"status"},[a("div",{staticClass:"status"},[a("Col",{attrs:{span:"22"}},[a("div",{staticClass:"name"},[t._v("供应商产品状态：")]),t._l(t.productStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.serverStatus===e.dictionaryKey},on:{click:function(a){return t.auditStatus(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2)],1)]),a("template",{slot:"always-show"},[a("Col",{staticClass:"form-item",attrs:{span:"8"}},[a("span",{staticStyle:{width:"55px","flex-shrink":"0"}},[t._v("启运地:")]),a("adt-city-selector",{attrs:{defaultData:t.search.dispatchCity},on:{"on-change":t.changeDispatchCity}}),a("span",{staticStyle:{width:"70px","margin-left":"12px","flex-shrink":"0"}},[t._v("选择场所:")]),a("Select",{attrs:{clearable:""},model:{value:t.search.dispatchSite,callback:function(e){t.$set(t.search,"dispatchSite",e)},expression:"search.dispatchSite"}},t._l(t.dispatchOptions,(function(e,s){return a("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("Col",{staticClass:"form-item",attrs:{span:"8",offset:"2"}},[a("span",{staticStyle:{width:"55px","flex-shrink":"0"}},[t._v("目的地:")]),a("adt-city-selector",{attrs:{defaultData:t.search.destinationCity},on:{"on-change":t.changeDestinationCity}}),a("span",{staticStyle:{width:"70px","margin-left":"12px","flex-shrink":"0"}},[t._v("选择场所:")]),a("Select",{attrs:{clearable:""},model:{value:t.search.destinationSite,callback:function(e){t.$set(t.search,"destinationSite",e)},expression:"search.destinationSite"}},t._l(t.destinationOptions,(function(e,s){return a("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("Col",{staticClass:"form-item",attrs:{span:"5",offset:"1"}},[a("span",{staticStyle:{"margin-right":"12px","text-align":"right"}},[t._v("产品编号:")]),a("Input",{attrs:{clearable:""},model:{value:t.search.serverCode,callback:function(e){t.$set(t.search,"serverCode",e)},expression:"search.serverCode"}})],1)],1)],2),a("div",{staticClass:"btns-paginator"},[a("adt-button",{attrs:{selectList:t.selectList}},[a("Button",{on:{click:function(e){return t.addProduct()}}},[t._v("新建产品"),a("Icon",{attrs:{type:"ios-add-circle-outline"}})],1),a("Button",{on:{click:function(e){return t.validApply()}}},[t._v(t._s("有效"+(t.isManager?"":"申请"))),a("Icon",{attrs:{type:"ios-add-circle-outline"}})],1),a("Button",{on:{click:function(e){return t.invalidApply()}}},[t._v(t._s("失效"+(t.isManager?"":"申请"))),a("Icon",{attrs:{type:"ios-add-circle-outline"}})],1)],1),a("adt-paginator",{attrs:{currentPage:~~t.page,total:~~t.total}})],1),a("div",{staticClass:"public-component-line"}),a("div",{staticClass:"public-list three-column"},t._l(t.listData,(function(e,s){return a("div",{key:s,staticClass:"public-component-card"},[a("adt-list-item",{attrs:{logistics:e,showCheckbox:!0,resetCheckStatus:t.resetCheckStatus},on:{checkData:t.checkData}},[a("template",{slot:"tab-title"},[a("span",[t._v("产品编号:"+t._s(e.serverCode))])]),a("template",{slot:"tab-operat"},[a("span",{class:{"card-status-success":"upload"===e.serverStatus||"上载"===e.serverStatus||"enable"===e.serverStatus||"有效"===e.serverStatus||"wait"===e.serverStatus||"待审核"===e.serverStatus,"card-status-error":"fail"===e.serverStatus||"审核未通过"===e.serverStatus,"card-status-disable":"disable"===e.serverStatus||"失效"===e.serverStatus}},[t._v(t._s(e.serverStatus))]),a("Poptip",{staticClass:"card-icon",attrs:{placement:"right-start",trigger:"hover"}},[a("span",[t._v("详情")]),a("Icon",{attrs:{type:"md-arrow-dropdown"}}),a("div",{staticClass:"card-poptip-font",attrs:{slot:"content"},slot:"content"},[!t.isManager||"wait"!==e.serverStatus&&"待审核"!==e.serverStatus?t._e():a("div",{on:{click:function(a){return t.examine(e)}}},[t._v("审核")]),"upload"===e.serverStatus||"上载"===e.serverStatus||"disable"===e.serverStatus||"失效"===e.serverStatus||"fail"===e.serverStatus||"审核未通过"===e.serverStatus?a("div",{on:{click:function(a){return t.validApply(e)}}},[t._v(t._s("有效"+(t.isManager?"":"申请")))]):t._e(),"enable"===e.serverStatus||"有效"===e.serverStatus||"fail"===e.serverStatus||"审核未通过"===e.serverStatus?a("div",{on:{click:function(a){return t.invalidApply(e)}}},[t._v(t._s("失效"+(t.isManager?"":"申请")))]):t._e(),a("div",{on:{click:function(a){return t.detail(e)}}},[t._v("详情")])])],1)],1),a("template",{slot:"tab-content"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"province"}),a("div",{staticClass:"transport-info"},[a("div",{staticClass:"city"},[t._v(t._s(e.departurePort.split(";").pop()))]),"1"===e.trspMode||"水运"===e.trspMode?a("svg",{staticClass:"iconfont way",staticStyle:{"font-size":"30px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongcaidanICON_lunchuan"}})]):t._e(),"2"===e.trspMode||"空运"===e.trspMode?a("svg",{staticClass:"iconfont way",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-feiji800"}})]):t._e(),"3"===e.trspMode||"公路"===e.trspMode?a("svg",{staticClass:"iconfont way",staticStyle:{transform:"rotateY(180deg)","font-size":"20px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-huoche"}})]):t._e(),"4"===e.trspMode||"铁运"===e.trspMode?a("svg",{staticClass:"iconfont way",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongcaidanICON_huoche"}})]):t._e(),a("div",{staticClass:"type"},[t._v(t._s(e.logisticsType)+"-"+t._s(e.trspType))]),a("svg",{staticClass:"iconfont arrow",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongcaidanICON_jiantou"}})]),a("div",{staticClass:"city"},[t._v(t._s(e.destinationPort.split(";").pop()))])]),e.PrefDiscount?[a("div",{staticClass:"account"},[a("span",[t._v(t._s(e.PrefDiscount))]),t._v("%")]),a("svg",{staticClass:"iconfont account-tag",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongcaidanICON_huaban28youhuizhekou"}})])]:t._e()],2)]),a("template",{slot:"tab-bottom"},[a("div",{staticClass:"tab-bottom"},[a("Row",[a("Col",{attrs:{span:"24"}},[t._v("有效期："+t._s(t.timestampFormat(e.serverStartTime))+" -- "+t._s(t.timestampFormat(e.serverEndTime)))])],1),a("Row",[a("Col",{attrs:{span:"10"}},[t._v("执行时长："+t._s(e.totalTime)+t._s(e.totalTimeUnit))]),a("Col",{staticClass:"text-right",attrs:{span:"14"}},[t._v("价格：￥"),a("span",[t._v(t._s(e.priceTotal))]),t._v("/"+t._s("C"===e.trspType||"集装箱"===e.trspType?"TEU":"KG"))])],1)],1)])],2)],1)})),0),a("adt-my-modal",{attrs:{title:"设置优惠折扣比",showModal:t.isModalShow},on:{"on-visible-change":t.visibleChange,"on-ok":function(e){return t.confirmSetDiscount()}}},[a("Form",{ref:"formValidate",attrs:{inline:"",model:t.discountData,rules:t.ruleValidate,"label-colon":!0,"label-position":"left","label-width":120}},[a("FormItem",{attrs:{label:"优惠折扣比",prop:"discount"}},[a("Input",{attrs:{placeholder:"输入1~99之间的数字"},model:{value:t.discountData.discount,callback:function(e){t.$set(t.discountData,"discount",e)},expression:"discountData.discount"}},[a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")])])],1)],1)],1),a("adt-reconfirm-modal",{attrs:{showModal:t.isCancelDiscountModalShow,message:"确认取消勾选产品的优惠折扣吗？",title:"取消折扣"},on:{"on-visible-change":t.cancelDiscountVisibleChange,"on-ok":function(e){return t.confirmCancelDiscount()}}}),a("adt-my-modal",{attrs:{title:t.examineModalTitle,showModal:t.isExamineModalShow,width:"600"},on:{"on-visible-change":t.examineVisibleChange,"on-ok":function(e){return t.examineSave()}}},[a("RadioGroup",{staticStyle:{"margin-bottom":"20px"},model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[a("Radio",{attrs:{label:"1"}},[t._v("同意"+t._s(1===t.examineType?"有效":"失效"))]),a("Radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"0"}},[t._v("不同意"+t._s(1===t.examineType?"有效":"失效"))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===t.agree,expression:"agree === '0'"}]},[a("div",{staticClass:"reason-name",staticStyle:{"margin-bottom":"6px"}},[t._v("不同意原因备注:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:t.reason,callback:function(e){t.reason="string"===typeof e?e.trim():e},expression:"reason"}})],1)],1),a("adt-reconfirm-modal",{attrs:{title:"失效审核",message:t.sxMessage,showModal:t.isSxModalShow},on:{"on-visible-change":t.sxVisibleChange,"on-ok":function(e){return t.confirmSx()}}}),a("adt-reconfirm-modal",{attrs:{showModal:t.isDeleteModalShow},on:{"on-visible-change":t.deleteVisibleChange,"on-ok":function(e){return t.confirmDelete()}}})],1)},i=[],n=(a("b4fb"),a("9302"),a("513c"),a("e35a"),a("9cf3"),a("0d7a"),a("80a0")),r=(a("b449"),a("5d83")),o=a("01ef"),c=a("35ec"),l={mixins:[o["a"]],props:{dispatchCity:"",dispatchSite:"",destinationCity:"",destinationSite:"",serverStatus:"",serverCode:""},data:function(){return{search:{dispatchCity:this.dispatchCity,dispatchSite:this.dispatchSite,destinationCity:this.destinationCity,destinationSite:this.destinationSite,serverStatus:this.serverStatus,serverCode:this.serverCode},dispatchOptions:[],destinationOptions:[],btnIndex:1}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.search.dispatchCity){e.next=4;break}return e.next=3,t._handelDir(t.search.dispatchCity.split("~"));case 3:t.dispatchOptions=e.sent;case 4:if(!t.search.destinationCity){e.next=8;break}return e.next=7,t._handelDir(t.search.destinationCity.split("~"));case 7:t.destinationOptions=e.sent;case 8:case"end":return e.stop()}}),e)})))()},methods:{getData:function(){var t=this,e=this.search.dispatchCity?this.search.dispatchCity.split("~"):[],a=this.search.destinationCity?this.search.destinationCity.split("~"):[],s={page:this.page,departurePort:e.length?"".concat(e.join(";"),";").concat(this.search.dispatchSite||""):"",destinationPort:a.length?"".concat(a.join(";"),";").concat(this.search.destinationSite||""):"",serverStatus:this.search.serverStatus,serverCode:this.search.serverCode};this.resetCheckStatus=!1,Object(c["x"])({data:s}).then((function(e){var a=e.data;t.listData=a.content||[],t.total=a.totalElements,t.selectList=[],t.resetCheckStatus=!0}))},validApply:function(t){var e=this,a=this.handleRequestData(t);a.length&&Object(c["s"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},invalidApply:function(t){var e=this,a=this.handleRequestData(t);a.length&&Object(c["p"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},examineSave:function(){var t=this,e=Object(n["a"])({},this.examineInfo);if(1===this.examineType)if("1"===this.agree)Object(c["u"])(e).then((function(t){a(t)}));else{if(!this.reason)return void this.$Message.warning("请填写不同意原因！");e.remark=this.reason,Object(c["t"])({data:e}).then((function(t){a(t)}))}else if("1"===this.agree)Object(c["r"])(e).then((function(t){a(t)}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");e.remark=this.reason,Object(c["q"])({data:e}).then((function(t){a(t)}))}function a(a,s){a.data||0!==this.examineType?(t.$Message.info(a.message),t.isExamineModalShow=!1,t.getData()):(t.isSxModalShow=!0,t.sxMessage="产品编号：".concat(e.serverCode," 产品已经与方案绑定，失效申请需要调度审核，确定提交调动审核？"))}},confirmSx:function(){var t=this;api(this.examineInfo).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.isSxModalShow=!1}))},confirmSetDiscount:function(){var t=this;this.$refs.formValidate.validate((function(e){if(e){var a=Number(t.discountData.discount);if(!a)return void t.$Message.warning("请输入数字！");if(a<1||a>99)return void t.$Message.warning("优惠折扣比要在1~99之间！");Object(c["v"])({data:{serverCodes:t.requestData,prefDiscount:a}}).then((function(e){t.$Message.info(e.message),t.getData()}))}}))},confirmCancelDiscount:function(){var t=this;api().then((function(e){t.$Message.info(e.message),t.getData()}))},addProduct:function(){this.$router.push("/product-editor/add-transport-product")},edit:function(t){this.$router.push("")},detail:function(t){this.$router.push("/product-editor/product-detail/".concat(t.serverCode,"?type=transport"))},remove:function(t){this.deleteId=id},confirmDelete:function(){},changeDispatchCity:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.search.dispatchCity=t.value.join("~"),a.next=3,e._handelDir(t.value);case 3:e.dispatchOptions=a.sent;case 4:case"end":return a.stop()}}),a)})))()},changeDestinationCity:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.search.destinationCity=t.value.join("~"),a.next=3,e._handelDir(t.value);case 3:e.destinationOptions=a.sent;case 4:case"end":return a.stop()}}),a)})))()}}},d=l,u=(a("a34d"),a("4023")),h=Object(u["a"])(d,s,i,!1,null,"1ec23e9c",null);e["default"]=h.exports},a34d:function(t,e,a){"use strict";var s=a("fcb2"),i=a.n(s);i.a},fcb2:function(t,e,a){}}]);