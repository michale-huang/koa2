{"version":3,"sources":["webpack:///./src/pages/authority-manage/Role.vue?a541","webpack:///./src/api/role.js","webpack:///src/pages/authority-manage/Role.vue","webpack:///./src/pages/authority-manage/Role.vue?bb41","webpack:///./src/pages/authority-manage/Role.vue","webpack:///./node_modules/_core-js@3.6.5@core-js/modules/es.array.find.js","webpack:///./src/pages/authority-manage/Role.vue?8562"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","treeData","positionRender","on","selectChange","directives","name","rawName","value","expression","roleAccountColumns","roleAccountData","scopedSlots","_u","key","fn","ref","row","index","$event","chooseAccountType","model","callback","$$v","$set","_v","_s","accountStatus","showDeleteModal","deleteVisibleChange","handleDeleteModalOk","showItemModal","itemTitle","visibleChange","handleItemModalOk","itemData","ruleValidate","changeItem","staticStyle","_e","type","showType","accountColumns","accountData","selectAccount","showPermissionModal","permissionTitle","handlePermissionModalOk","permissionVisibleChange","positionInfo","departmentName","permissionData","permissionRender","staticRenderFns","apiGetOrganizationList","data","getRequest","baseUrl","apiGetRoleInfoTree","apiAddRoleInfo","postRequest","apiModifyRoleInfo","apiDeleteRoleInfo","apiAddRoleAccount","apiMenuInfoQueryByOrganizationId","apiAddRoleAndMenu","apiAccountQueryRoleList","apiAccountQueryList","component","$","$find","find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","Array","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/chunk-5388f102.bc2d3385.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"role\"},[_vm._m(0),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"tree\"},[_c('Tree',{attrs:{\"data\":_vm.treeData,\"render\":_vm.positionRender,\"children-key\":\"treeList\"},on:{\"on-select-change\":_vm.selectChange}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showRoleAccount),expression:\"showRoleAccount\"}],staticClass:\"account\"},[_c('Table',{attrs:{\"stripe\":\"\",\"columns\":_vm.roleAccountColumns,\"data\":_vm.roleAccountData},scopedSlots:_vm._u([{key:\"accountType\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('Select',{on:{\"on-change\":function($event){return _vm.chooseAccountType(row, index)}},model:{value:(row.accountType),callback:function ($$v) {_vm.$set(row, \"accountType\", $$v)},expression:\"row.accountType\"}},[_c('Option',{attrs:{\"value\":\"1\"}},[_vm._v(\"类型1\")]),_c('Option',{attrs:{\"value\":\"2\"}},[_vm._v(\"类型2\")])],1)]}},{key:\"phone\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(((row.internationalPhonePrefix) + \" \" + (row.phoneNumber)))+\" \")]}},{key:\"accountStatus\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.accountStatus === 'enable' ? '可用' : '不可用')+\" \")]}}])})],1)]),_c('adt-reconfirm-modal',{attrs:{\"showModal\":_vm.showDeleteModal},on:{\"on-visible-change\":_vm.deleteVisibleChange,\"on-ok\":_vm.handleDeleteModalOk}}),_c('adt-my-modal',{attrs:{\"showModal\":_vm.showItemModal,\"title\":_vm.itemTitle,\"width\":\"80%\"},on:{\"on-visible-change\":_vm.visibleChange,\"on-ok\":_vm.handleItemModalOk}},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.itemData,\"rules\":_vm.ruleValidate,\"label-colon\":true,\"label-position\":\"left\",\"label-width\":120}},[(_vm.showType)?_c('FormItem',{attrs:{\"label\":\"新增项\",\"prop\":\"type\"}},[_c('RadioGroup',{on:{\"on-change\":_vm.changeItem},model:{value:(_vm.itemData.type),callback:function ($$v) {_vm.$set(_vm.itemData, \"type\", $$v)},expression:\"itemData.type\"}},[_c('Radio',{attrs:{\"label\":\"1\"}},[_vm._v(\" 岗位 \")]),_c('Radio',{staticStyle:{\"margin-left\":\"30px\"},attrs:{\"label\":\"2\"}},[_vm._v(\" 帐户 \")])],1)],1):_vm._e(),_c('div',{staticClass:\"line\"}),(_vm.itemData.type === '1' || !_vm.showType)?[_c('FormItem',{attrs:{\"label\":\"岗位名称\",\"prop\":\"roleName\"}},[_c('Input',{staticStyle:{\"width\":\"190px\"},model:{value:(_vm.itemData.roleName),callback:function ($$v) {_vm.$set(_vm.itemData, \"roleName\", $$v)},expression:\"itemData.roleName\"}})],1),_c('FormItem',{attrs:{\"label\":\"岗位状态\",\"prop\":\"roleStatus\"}},[_c('Select',{staticStyle:{\"width\":\"190px\"},model:{value:(_vm.itemData.roleStatus),callback:function ($$v) {_vm.$set(_vm.itemData, \"roleStatus\", $$v)},expression:\"itemData.roleStatus\"}},[_c('Option',{attrs:{\"value\":\"enable\"}},[_vm._v(\"可用\")]),_c('Option',{attrs:{\"value\":\"disable\"}},[_vm._v(\"不可用\")])],1)],1),_c('FormItem',{attrs:{\"label\":\"岗位描述\",\"prop\":\"roleDescribe\"}},[_c('Input',{staticStyle:{\"width\":\"50%\"},attrs:{\"type\":\"textarea\"},model:{value:(_vm.itemData.roleDescribe),callback:function ($$v) {_vm.$set(_vm.itemData, \"roleDescribe\", $$v)},expression:\"itemData.roleDescribe\"}})],1)]:_vm._e(),(_vm.itemData.type === '2')?[_c('Table',{attrs:{\"stripe\":\"\",\"columns\":_vm.accountColumns,\"data\":_vm.accountData},on:{\"on-selection-change\":_vm.selectAccount},scopedSlots:_vm._u([{key:\"accountType\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('Select',{on:{\"on-change\":function($event){return _vm.chooseAccountType(row, index)}},model:{value:(row.accountType),callback:function ($$v) {_vm.$set(row, \"accountType\", $$v)},expression:\"row.accountType\"}},[_c('Option',{attrs:{\"value\":\"1\"}},[_vm._v(\"类型1\")]),_c('Option',{attrs:{\"value\":\"2\"}},[_vm._v(\"类型2\")])],1)]}},{key:\"phone\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(((row.internationalPhonePrefix) + \" \" + (row.phoneNumber)))+\" \")]}},{key:\"accountStatus\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.accountStatus === 'enable' ? '可用' : '不可用')+\" \")]}}],null,false,1151818893)})]:_vm._e()],2)],1),_c('adt-my-modal',{attrs:{\"showModal\":_vm.showPermissionModal,\"title\":_vm.permissionTitle},on:{\"on-ok\":_vm.handlePermissionModalOk,\"on-visible-change\":_vm.permissionVisibleChange}},[_c('ul',{staticClass:\"position-info\"},[_c('li',[_vm._v(\"岗位名称：\"+_vm._s(_vm.positionInfo.name))]),_c('li',[_vm._v(\"上级部门：\"+_vm._s(_vm.positionInfo.departmentName))])]),_c('Tree',{ref:\"permissionTree\",staticClass:\"permission-tree\",attrs:{\"data\":_vm.permissionData,\"show-checkbox\":true,\"render\":_vm.permissionRender,\"children-key\":\"menuInfoList\"}})],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"titles\"},[_c('li',[_vm._v(\"公司组织结构\")]),_c('li',[_vm._v(\"岗位帐户\")])])}]\n\nexport { render, staticRenderFns }","import { postRequest, getRequest } from './common'\r\nimport { permission as baseUrl } from './api'\r\n\r\n// 查询组织机构信息\r\nexport const apiGetOrganizationList = data => {\r\n    return getRequest(`${baseUrl}/organizationInfo/getOrganizationList`, data)\r\n}\r\n\r\n// 查询岗位角色信息\r\nexport const apiGetRoleInfoTree = data => {\r\n    return getRequest(`${baseUrl}/roleInfo/getRoleInfoTree`, data)\r\n}\r\n\r\n// 添加岗位角色信息\r\nexport const apiAddRoleInfo = data => {\r\n    return postRequest(`${baseUrl}/roleInfo/addRoleInfo`, data)\r\n}\r\n\r\n// 修改岗位角色信息\r\nexport const apiModifyRoleInfo = data => {\r\n    return postRequest(`${baseUrl}/roleInfo/modifyRoleInfo`, data)\r\n}\r\n\r\n// 删除岗位角色信息\r\nexport const apiDeleteRoleInfo = data => {\r\n    return getRequest(`${baseUrl}/roleInfo/deleteRoleInfo`, data)\r\n}\r\n\r\n// 岗位角色绑定用户信息\r\nexport const apiAddRoleAccount = data => {\r\n    return postRequest(`${baseUrl}/roleAccount/addRoleAccount`, data)\r\n}\r\n\r\n// 根据岗位获取菜单权限\r\nexport const apiMenuInfoQueryByOrganizationId = data => {\r\n    return postRequest(`${baseUrl}/menu/menuInfoQueryByOrganizationIds`, data)\r\n}\r\n\r\n// 岗位角色绑定菜单权限\r\nexport const apiAddRoleAndMenu = data => {\r\n    return postRequest(`${baseUrl}/roleMenu/addRoleAndMenu`, data)\r\n}\r\n\r\n// 查询岗位下用户列表\r\nexport const apiAccountQueryRoleList = data => {\r\n    return postRequest(`${baseUrl}/account/accountQueryRoleList`, data)\r\n}\r\n\r\n// 查询用户列表\r\nexport const apiAccountQueryList = data => {\r\n    return postRequest(`${baseUrl}/account/accountQueryList`, data)\r\n}\r\n","<template>\r\n    <div class=\"role\">\r\n        <ul class=\"titles\">\r\n            <li>公司组织结构</li>\r\n            <li>岗位帐户</li>\r\n        </ul>\r\n        <div class=\"content\">\r\n            <div class=\"tree\">\r\n                <Tree\r\n                    :data=\"treeData\"\r\n                    :render=\"positionRender\"\r\n                    @on-select-change=\"selectChange\"\r\n                    children-key=\"treeList\"\r\n                    >\r\n                </Tree>\r\n            </div>\r\n            <div class=\"account\" v-show=\"showRoleAccount\">\r\n                <Table stripe :columns=\"roleAccountColumns\" :data=\"roleAccountData\">\r\n                    <template #accountType=\"{ row, index }\">\r\n                        <Select v-model=\"row.accountType\" @on-change=\"chooseAccountType(row, index)\">\r\n                            <Option value=\"1\">类型1</Option>\r\n                            <Option value=\"2\">类型2</Option>\r\n                        </Select>\r\n                    </template>\r\n                    <template #phone=\"{ row }\">\r\n                        {{ `${row.internationalPhonePrefix} ${row.phoneNumber}` }}\r\n                    </template>\r\n                    <template #accountStatus=\"{ row }\">\r\n                        {{ row.accountStatus === 'enable' ? '可用' : '不可用' }}\r\n                    </template>\r\n                </Table>\r\n            </div>\r\n        </div>\r\n        <!-- 删除二次确认modal -->\r\n        <adt-reconfirm-modal\r\n            :showModal=\"showDeleteModal\"\r\n            @on-visible-change=\"deleteVisibleChange\"\r\n            @on-ok=\"handleDeleteModalOk\">\r\n        </adt-reconfirm-modal>\r\n        <!-- 新增、编辑岗位（帐户）modal -->\r\n        <adt-my-modal\r\n            :showModal=\"showItemModal\"\r\n            :title=\"itemTitle\"\r\n            width=\"80%\"\r\n            @on-visible-change=\"visibleChange\"\r\n            @on-ok=\"handleItemModalOk\">\r\n            <Form\r\n                ref=\"formValidate\"\r\n                :model=\"itemData\"\r\n                :rules=\"ruleValidate\"\r\n                :label-colon=\"true\"\r\n                label-position=\"left\"\r\n                :label-width=\"120\">\r\n                <FormItem label=\"新增项\" prop=\"type\" v-if=\"showType\">\r\n                    <RadioGroup v-model=\"itemData.type\" @on-change=\"changeItem\">\r\n                        <Radio label=\"1\">\r\n                            岗位\r\n                        </Radio>\r\n                        <Radio label=\"2\" style=\"margin-left: 30px;\">\r\n                            帐户\r\n                        </Radio>\r\n                    </RadioGroup>\r\n                </FormItem>\r\n                <div class=\"line\"></div>\r\n                <template v-if=\"itemData.type === '1' || !showType\">\r\n                    <FormItem label=\"岗位名称\" prop=\"roleName\">\r\n                        <Input v-model=\"itemData.roleName\" style=\"width: 190px;\" />\r\n                    </FormItem>\r\n                    <FormItem label=\"岗位状态\" prop=\"roleStatus\">\r\n                        <Select v-model=\"itemData.roleStatus\" style=\"width: 190px;\">\r\n                            <Option value=\"enable\">可用</Option>\r\n                            <Option value=\"disable\">不可用</Option>\r\n                        </Select>\r\n                    </FormItem>\r\n                    <FormItem label=\"岗位描述\" prop=\"roleDescribe\">\r\n                        <Input type=\"textarea\" v-model=\"itemData.roleDescribe\" style=\"width: 50%;\" />\r\n                    </FormItem>\r\n                </template>\r\n                <template v-if=\"itemData.type === '2'\">\r\n                    <!-- <div class=\"search\">\r\n                        <Form\r\n                            :label-colon=\"true\"\r\n                            label-position=\"left\"\r\n                            inline\r\n                            :label-width=\"80\">\r\n                            <FormItem label=\"帐户名称\">\r\n                                <Input v-model=\"search.accountName\" />\r\n                            </FormItem>\r\n                            <FormItem label=\"手机号码\">\r\n                                <Input v-model=\"search.phoneNumber\" />\r\n                            </FormItem>\r\n                            <Button shape=\"circle\" @click=\"searchAccount\" style=\"margin-left: 30px;\">{{$t('common.searchBtn')}}<Icon type=\"ios-search\" /></Button>\r\n                        </Form>\r\n                    </div> -->\r\n                    <Table stripe :columns=\"accountColumns\" :data=\"accountData\" @on-selection-change=\"selectAccount\">\r\n                        <template #accountType=\"{ row, index }\">\r\n                            <Select v-model=\"row.accountType\" @on-change=\"chooseAccountType(row, index)\">\r\n                                <Option value=\"1\">类型1</Option>\r\n                                <Option value=\"2\">类型2</Option>\r\n                            </Select>\r\n                        </template>\r\n                        <template #phone=\"{ row }\">\r\n                            {{ `${row.internationalPhonePrefix} ${row.phoneNumber}` }}\r\n                        </template>\r\n                        <template #accountStatus=\"{ row }\">\r\n                            {{ row.accountStatus === 'enable' ? '可用' : '不可用' }}\r\n                        </template>\r\n                    </Table>\r\n                </template>\r\n            </Form>\r\n        </adt-my-modal>\r\n        <!-- 配置岗位权限modal -->\r\n        <adt-my-modal\r\n            :showModal=\"showPermissionModal\"\r\n            :title=\"permissionTitle\"\r\n            @on-ok=\"handlePermissionModalOk\"\r\n            @on-visible-change=\"permissionVisibleChange\">\r\n            <ul class=\"position-info\">\r\n                <li>岗位名称：{{ positionInfo.name }}</li>\r\n                <li>上级部门：{{ positionInfo.departmentName }}</li>\r\n            </ul>\r\n            <Tree\r\n                :data=\"permissionData\"\r\n                :show-checkbox=\"true\"\r\n                :render=\"permissionRender\"\r\n                children-key=\"menuInfoList\"\r\n                ref=\"permissionTree\"\r\n                class=\"permission-tree\"\r\n                >\r\n            </Tree>\r\n        </adt-my-modal>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {\r\n        apiGetOrganizationList,\r\n        apiGetRoleInfoTree,\r\n        apiAddRoleInfo,\r\n        apiModifyRoleInfo,\r\n        apiDeleteRoleInfo,\r\n        apiAddRoleAccount,\r\n        apiAddRoleAndMenu,\r\n        apiMenuInfoQueryByOrganizationId,\r\n        apiAccountQueryRoleList,\r\n        apiAccountQueryList\r\n    } from '@/api/role'\r\n    import validateRules from '@/libs/validateRules'\r\n    export default {\r\n        data () {\r\n            return {\r\n                showCheckbox: false,\r\n                itemTitle: '新增项',\r\n                accountTitle: '选择帐户',\r\n                permissionTitle: '配置岗位权限',\r\n                showItemModal: false,\r\n                showDeleteModal: false,\r\n                showAccountModal: false,\r\n                showPermissionModal: false,\r\n                showType: true,\r\n                showRoleAccount: false,\r\n                search: {\r\n                    accountName: '',\r\n                    phoneNumber: ''\r\n                },\r\n                positionInfo: {\r\n                    name: '',\r\n                    departmentName: ''\r\n                },\r\n                accountData: [],\r\n                roleAccountData: [],\r\n                // 选中的row\r\n                selectedData: [],\r\n                parentData: '',\r\n                editData: '',\r\n                deleteData: {\r\n                    root: '',\r\n                    node: '',\r\n                    data: ''\r\n                },\r\n                itemData: {\r\n                    type: '',\r\n                    roleName: '',\r\n                    roleStatus: '',\r\n                    roleDescribe: ''\r\n                },\r\n                ruleValidate: {\r\n                    type: [\r\n                        validateRules.select('新增项')[0]\r\n                    ],\r\n                    roleName: [\r\n                        validateRules.required('岗位名称')[0]\r\n                    ],\r\n                    roleStatus: [\r\n                        validateRules.select('岗位状态')[0]\r\n                    ],\r\n                    roleDescribe: [\r\n                        validateRules.required('岗位描述')[0]\r\n                    ]\r\n                },\r\n                treeData: [],\r\n                // 菜单权限tree数据\r\n                permissionData: [],\r\n                // 如果是公司，只能添加岗位\r\n                isCompany: false\r\n            }\r\n        },\r\n        created () {\r\n            this.initData()\r\n        },\r\n        computed: {\r\n            accountColumns () {\r\n                return [\r\n                    {\r\n                        type: 'selection',\r\n                        width: 60,\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '用户帐号',\r\n                        key: 'accountName',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '手机号码',\r\n                        slot: 'phone',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '邮箱',\r\n                        key: 'accountEmail',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '状态',\r\n                        slot: 'accountStatus',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '帐户类型',\r\n                        slot: 'accountType',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '创建时间',\r\n                        key: 'createDatetime',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '创建人',\r\n                        key: 'createBy',\r\n                        align: 'center'\r\n                    },\r\n                ]\r\n            },\r\n            roleAccountColumns () {\r\n                return [\r\n                    {\r\n                        title: '用户帐号',\r\n                        key: 'accountName',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '手机号码',\r\n                        slot: 'phone',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '邮箱',\r\n                        key: 'accountEmail',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '状态',\r\n                        slot: 'accountStatus',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '帐户类型',\r\n                        key: 'accountType',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '创建时间',\r\n                        key: 'createDatetime',\r\n                        align: 'center'\r\n                    },\r\n                    {\r\n                        title: '创建人',\r\n                        key: 'createBy',\r\n                        align: 'center'\r\n                    },\r\n                ]\r\n            }\r\n        },\r\n        methods: {\r\n            initData () {\r\n                // 查询岗位机构信息\r\n                apiGetOrganizationList().then(({ data }) => {\r\n                    this.treeData = []\r\n                    // this.treeData = data\r\n                    for (const app of data) {\r\n                        app.render = this.companyRender\r\n                        app.treeList = []\r\n                        this.treeData.push(app)\r\n                        // 查询岗位角色信息\r\n                        apiGetRoleInfoTree({ path: app.organizationId }).then(({ data }) => {\r\n                            app.treeList = data\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            visibleChange (data) {\r\n                this.showItemModal = data\r\n            },\r\n            deleteVisibleChange (data) {\r\n                this.showDeleteModal = data\r\n            },\r\n            accountVisibleChange (data) {\r\n                this.showAccountModal = data\r\n            },\r\n            permissionVisibleChange (data) {\r\n                this.showPermissionModal = data\r\n            },\r\n            // 总公司（最外层）render\r\n            companyRender (h, { root, node, data }) {\r\n                return h('span', {\r\n                    style: {\r\n                        display: 'inline-block',\r\n                        width: '100%'\r\n                    }\r\n                }, [\r\n                    h('span', [\r\n                        h('Icon', {\r\n                            props: {\r\n                                type: 'ios-contacts-outline'\r\n                            },\r\n                            style: {\r\n                                marginRight: '8px'\r\n                            }\r\n                        }),\r\n                        h('span', data.organizationName)\r\n                    ]),\r\n                    h('span', {\r\n                        style: {\r\n                            display: 'inline-block',\r\n                            float: 'right',\r\n                            marginRight: '20px'\r\n                        }\r\n                    }, [\r\n                        h('Poptip', {\r\n                            props: {\r\n                                disabled: true,\r\n                                trigger: 'hover',\r\n                                placement: 'bottom',\r\n                                content: '添加下级',\r\n                            }\r\n                        }, [\r\n                            h('Icon', {\r\n                                props: {\r\n                                    type: 'ios-add'\r\n                                },\r\n                                style: {\r\n                                    fontSize: '24px'\r\n                                },\r\n                                on: {\r\n                                    click: () => { this.append(data, 'company') }\r\n                                }\r\n                            }),\r\n                        ])\r\n                    ])\r\n                ]);\r\n            },\r\n            // 岗位render\r\n            positionRender (h, { root, node, data }) {\r\n                return h('span', {\r\n                    style: {\r\n                        display: 'inline-block',\r\n                        width: '100%'\r\n                    }\r\n                }, [\r\n                    h('span', [\r\n                        h('Icon', {\r\n                            props: {\r\n                                type: 'ios-contact-outline'\r\n                            },\r\n                            style: {\r\n                                marginRight: '8px'\r\n                            }\r\n                        }),\r\n                        h('span', data.roleName)\r\n                        // h('span', {\r\n                        //     props: {\r\n                        //         type: 'text',\r\n                        //         value: data.roleName\r\n                        //     },\r\n                        //     on: {\r\n                        //         click: () => { this.getRoleAccount(data) }\r\n                        //     }\r\n                        // })\r\n                    ]),\r\n                    h('span', {\r\n                        style: {\r\n                            display: 'inline-block',\r\n                            float: 'right',\r\n                            marginRight: '20px'\r\n                        }\r\n                    }, [\r\n                        h('Poptip', {\r\n                            props: {\r\n                                disabled: true,\r\n                                trigger: 'hover',\r\n                                placement: 'bottom',\r\n                                content: '分配权限'\r\n                            }\r\n                        }, [\r\n                            h('Icon', {\r\n                                props: {\r\n                                    type: 'ios-options-outline'\r\n                                },\r\n                                style: {\r\n                                    fontSize: '16px',\r\n                                    position: 'relative',\r\n                                    top: '-2px'\r\n                                },\r\n                                on: {\r\n                                    click: () => { this.setPermission(root, node, data) }\r\n                                }\r\n                            }),\r\n                        ]),\r\n                        h('Poptip', {\r\n                            props: {\r\n                                disabled: true,\r\n                                trigger: 'hover',\r\n                                placement: 'bottom',\r\n                                content: '选择帐户'\r\n                            }\r\n                        }, [\r\n                            h('Icon', {\r\n                                props: {\r\n                                    type: 'ios-add'\r\n                                },\r\n                                style: {\r\n                                    fontSize: '24px'\r\n                                },\r\n                                on: {\r\n                                    click: () => { this.append(data) }\r\n                                }\r\n                            }),\r\n                        ]),\r\n                        h('Poptip', {\r\n                            props: {\r\n                                disabled: true,\r\n                                trigger: 'hover',\r\n                                placement: 'bottom',\r\n                                content: '编辑功能'\r\n                            }\r\n                        }, [\r\n                            h('Icon', {\r\n                                props: {\r\n                                    type: 'md-create'\r\n                                },\r\n                                style: {\r\n                                    fontSize: '16px',\r\n                                    position: 'relative',\r\n                                    top: '-3px'\r\n                                },\r\n                                on: {\r\n                                    click: () => { this.edit(data) }\r\n                                }\r\n                            }),\r\n                        ]),\r\n                        h('Poptip', {\r\n                            props: {\r\n                                disabled: true,\r\n                                trigger: 'hover',\r\n                                placement: 'bottom',\r\n                                content: '删除功能'\r\n                            }\r\n                        }, [\r\n                            h('Icon', {\r\n                                props: {\r\n                                    type: 'ios-close'\r\n                                },\r\n                                style: {\r\n                                    fontSize: '24px'\r\n                                },\r\n                                on: {\r\n                                    click: () => { this.remove(root, node, data) }\r\n                                }\r\n                            }),\r\n                        ])\r\n                    ])\r\n                ]);\r\n            },\r\n            // 权限render\r\n            permissionRender (h, { root, node, data }) {\r\n                return h('span', {\r\n                    style: {\r\n                        display: 'inline-block',\r\n                        width: '100%'\r\n                    }\r\n                }, [\r\n                    h('span', [\r\n                        h('span', data.appName || data.menuName)\r\n                    ]),\r\n                    h('span', {\r\n                        style: {\r\n                            display: 'inline-block',\r\n                            float: 'right',\r\n                            marginRight: '20px'\r\n                        }\r\n                    })\r\n                ]);\r\n            },\r\n            // 新增岗位、帐户\r\n            append (data, isCompany) {\r\n                // 重置\r\n                this.$refs.formValidate.fields.forEach(e => {\r\n                    e.resetField()\r\n                })\r\n                this.itemTitle = '新增'\r\n                this.showItemModal = true\r\n                this.parentData = data\r\n                this.itemData.type = ''\r\n                this.showType = true\r\n                // 总公司（最外层）只能添加岗位\r\n                if (isCompany) {\r\n                    this.showType = false\r\n                    this.isCompany = true\r\n                } else {\r\n                    this.isCompany = false\r\n                }\r\n            },\r\n            // 编辑当前岗位信息\r\n            edit (data) {\r\n                // 重置\r\n                this.$refs.formValidate.fields.forEach(e => {\r\n                    e.resetField()\r\n                })\r\n                this.itemTitle = '编辑'\r\n                this.showItemModal = true\r\n                this.editData = data\r\n                this.showType = false\r\n                this.itemData.type = ''\r\n                this.itemData.roleName = data.roleName\r\n                this.itemData.roleStatus = data.roleStatus\r\n                this.itemData.roleDescribe = data.roleDescribe\r\n            },\r\n            handleItemModalOk () {\r\n                this.$refs.formValidate.validate((valid) => {\r\n                    if (valid) {\r\n                        // 添加岗位\r\n                        let promise = new Promise(resolve => {\r\n                            // 新增\r\n                            if (this.showType || this.isCompany) {\r\n                                // 新增岗位\r\n                                if (this.itemData.type === '1' || this.isCompany) {\r\n                                    const data = { ...this.itemData, ...{ organizationId: this.parentData.organizationId, rolePid: this.parentData.roleId || 0 } }\r\n                                    delete data.type\r\n                                    apiAddRoleInfo({ data }).then(({ data }) => {\r\n                                        resolve()\r\n                                    })\r\n                                } else {\r\n                                    // 选择帐户\r\n                                    let [roleId, data] = [this.parentData.roleId, []]\r\n                                    for (const item of this.selectedData) {\r\n                                        if (!item.accountType) {\r\n                                            this.$Message.warning('请给所有选中的帐户选择帐户类型')\r\n                                            return\r\n                                        }\r\n                                        data.push({\r\n                                            roleId,\r\n                                            accountId: item.accountId,\r\n                                            accountType: item.accountType\r\n                                        })\r\n                                    }\r\n                                    if (data.length) {\r\n                                        apiAddRoleAccount({ data}).then(({ data }) => {\r\n                                            resolve()\r\n                                        })\r\n                                    } else {\r\n                                        this.$Message.info('请先选择帐户')\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                // 编辑\r\n                                const data = { ...this.itemData, ...{ roleId: this.editData.roleId, version: this.editData.version, rolePid: this.editData.rolePid } }\r\n                                delete data.type\r\n                                apiModifyRoleInfo({ data }).then(({ data }) => {\r\n                                    resolve()\r\n                                })\r\n                            }\r\n                        })\r\n                        promise.then(() => {\r\n                            this.showItemModal = false\r\n                            this.initData()\r\n                            // const children = this.parentData.children || []\r\n                            // children.push({\r\n                            //     title,\r\n                            //     render,\r\n                            //     id,\r\n                            //     isPosition,\r\n                            // })\r\n                            // this.$set(this.parentData, 'children', children)\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            // 移除岗位、帐户\r\n            remove (root, node, data) {\r\n                this.showDeleteModal = true\r\n                this.deleteData = { root, node, data }\r\n            },\r\n            handleDeleteModalOk () {\r\n                let roleId = this.deleteData.data.roleId\r\n                let promise = new Promise(resolve => {\r\n                    apiDeleteRoleInfo({ data: roleId }).then(({ data }) => {\r\n                        resolve()\r\n                    })\r\n                })\r\n                promise.then(() => {\r\n                    // this.initData()\r\n                    this.showDeleteModal = false\r\n                    const parentKey = this.deleteData.root.find(el => el === this.deleteData.node).parent\r\n                    const parent = this.deleteData.root.find(el => el.nodeKey === parentKey).node\r\n                    const index = parent.treeList.indexOf(this.deleteData.data)\r\n                    parent.treeList.splice(index, 1)\r\n                })\r\n            },\r\n            // 设置权限\r\n            setPermission (root, node, data) {\r\n                this.parentData = data\r\n                const parentKey = root.find(el => el === node).parent\r\n                const parent = root.find(el => el.nodeKey === parentKey).node\r\n                this.positionInfo.departmentName = parent.roleName || parent.organizationName\r\n                this.positionInfo.name = data.roleName\r\n                apiMenuInfoQueryByOrganizationId({ data: { organizationId: data.organizationId, roleId: data.roleId } }).then(({ data }) => {\r\n                    this.showPermissionModal = true\r\n                    this.permissionData = data\r\n                })\r\n            },\r\n            handlePermissionModalOk () {\r\n                // getCheckedNodes获取所有选中的节点\r\n                const permission = this.$refs.permissionTree.getCheckedNodes()\r\n                if (!permission.length) {\r\n                    this.showPermissionModal = false\r\n                    return\r\n                } else {\r\n                    let data = []\r\n                    for (let item of permission) {\r\n                        if (item.menuId) {\r\n                            data.push({\r\n                                roleId: this.parentData.roleId,\r\n                                menuId: item.menuId\r\n                            })\r\n                        }\r\n                    }\r\n                    apiAddRoleAndMenu({ data }).then(({ data }) => {\r\n                        this.showPermissionModal = false\r\n                    })\r\n                }\r\n            },\r\n            // 搜索帐户\r\n            searchAccount () {\r\n                apiAccountQueryList({ data:  { ...this.search, organizationId: this.parentData.organizationId } }).then(({ data }) => {\r\n                    this.accountData = data.content\r\n                })\r\n            },\r\n            // 选择帐户\r\n            selectAccount (selection) {\r\n                this.selectedData = selection\r\n            },\r\n            // 选择帐户类型\r\n            chooseAccountType (row, index) {\r\n                this.accountData[index] = row\r\n                for (const item of this.selectedData) {\r\n                    if (item.accountId === row.accountId) {\r\n                        item.accountType = row.accountType\r\n                        break\r\n                    }\r\n                }\r\n            },\r\n            // 岗位、帐户切换\r\n            changeItem (type) {\r\n                if (type === '2') {\r\n                    // 获取岗位下的帐户\r\n                    apiAccountQueryRoleList({ data: { organizationId: this.parentData.organizationId, roleId: this.parentData.roleId, size: '100', direction: 'desc' } }).then(({ data }) => {\r\n                        this.selectedData = []\r\n                        // 根据帐户类型有没有选择来判断是不是岗位下的帐户\r\n                        const tempData = data.content.length > 0 ? data.content : []\r\n                        for (const account of tempData) {\r\n                            if (account.accountType) {\r\n                                account._checked = true\r\n                                this.selectedData.push({\r\n                                    accountId: account.accountId,\r\n                                    accountType: account.accountType\r\n                                })\r\n                            }\r\n                        }\r\n                        this.accountData = tempData\r\n                        this.showAccountModal = true\r\n                    })\r\n                }\r\n            },\r\n            getRoleAccount (data) {\r\n                console.log(data)\r\n            },\r\n            selectChange (data, curData) {\r\n                // 点击总公司，不需要去获取帐户\r\n                if (!curData.roleId) {\r\n                    return\r\n                }\r\n                this.showRoleAccount = true\r\n                apiAccountQueryRoleList({ data: { organizationId: curData.organizationId, roleId: curData.roleId, size: '100', direction: 'desc' } }).then(({ data }) => {\r\n                        const accountArr = []\r\n                        // 根据帐户类型有没有选择来判断是不是岗位下的帐户\r\n                        const tempData = data.content.length > 0 ? data.content : []\r\n                        for (const account of tempData) {\r\n                            if (account.accountType) {\r\n                                accountArr.push(account)\r\n                            } else {\r\n                                break\r\n                            }\r\n                        }\r\n                        this.roleAccountData = accountArr\r\n                    })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .role {\r\n        min-height: 100%;\r\n        .titles {\r\n            display: flex;\r\n            align-items: center;\r\n            margin-bottom: 16px;\r\n            li {\r\n                width: 35%;\r\n                margin-left: 30px;\r\n                & + li {\r\n                    width: 65%;\r\n                }\r\n            }\r\n        }\r\n        .content {\r\n            display: flex;\r\n            min-height: 100%;\r\n            padding: 16px;\r\n            background-color: #fff;\r\n            .tree {\r\n                width: 35%;\r\n                padding-right: 15px;\r\n            }\r\n            .account {\r\n                width: 65%;\r\n                padding-left: 15px;\r\n                margin-left: 15px;\r\n                border-left: 1px solid $border-color;\r\n            }\r\n        }\r\n    }\r\n    /deep/ .ivu-tree-title {\r\n        width: 100%;\r\n    }\r\n    div + .line {\r\n        border-top: 1px solid $border-color;\r\n        margin-bottom: 12px;\r\n    }\r\n    /deep/ .ivu-poptip {\r\n        margin-left: 12px;\r\n    }\r\n    .position-info {\r\n        display: flex;\r\n        margin-bottom: 12px;\r\n        li + li {\r\n            margin-left: 40px;\r\n        }\r\n    }\r\n    .permission-tree /deep/ .ivu-tree-title{\r\n        width: 400px;\r\n    }\r\n\r\n    .role /deep/ .ivu-modal {\r\n        max-height: 80%;\r\n    }\r\n </style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=6c773ca6&scoped=true&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role.vue?vue&type=style&index=0&id=6c773ca6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c773ca6\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.5.3@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=6c773ca6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.5.3@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=6c773ca6&lang=scss&scoped=true&\""],"sourceRoot":""}