(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6376606f"],{"34d9":function(t,e,a){"use strict";var i=a("8216"),n=a("be57");t.exports=i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},"52b2":function(t,e,a){"use strict";var i=a("9fe3"),n=a.n(i);n.a},"8a9d":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"k",(function(){return r})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return l})),a.d(e,"f",(function(){return o})),a.d(e,"o",(function(){return d})),a.d(e,"n",(function(){return u})),a.d(e,"i",(function(){return h})),a.d(e,"j",(function(){return p})),a.d(e,"m",(function(){return f})),a.d(e,"e",(function(){return g})),a.d(e,"l",(function(){return C})),a.d(e,"d",(function(){return P})),a.d(e,"h",(function(){return b})),a.d(e,"g",(function(){return S}));var i=a("2934"),n=a("4ec3"),s=function(t){return Object(i["b"])("".concat(n["c"],"/customer/add-freight"),t)},r=function(t){return Object(i["b"])("".concat(n["c"],"/sale/add-freight"),t)},c=function(t){return Object(i["b"])("".concat(n["c"],"/dispatch/add-freight"),t)},l=function(t){return Object(i["b"])("".concat(n["c"],"/customer/add-freight-simple"),t)},o=function(t){return Object(i["b"])("".concat(n["c"],"/customer/generate-route"),t)},d=function(t){return Object(i["b"])("".concat(n["c"],"/customer/send-sale"),t)},u=function(t){return Object(i["b"])("".concat(n["c"],"/sale/send-dispatch"),t)},h=function(t){return Object(i["a"])("".concat(n["c"],"/customer/query-detail-freight"),t)},p=function(t){return Object(i["b"])("".concat(n["c"],"/customer/query-list-freight"),t)},f=function(t){return Object(i["b"])("".concat(n["c"],"/sale/query-list-freight"),t)},g=function(t){return Object(i["b"])("".concat(n["c"],"/dispatch/query-list-freight"),t)},C=function(t){return Object(i["a"])("".concat(n["c"],"/sale/query-detail-freight"),t)},P=function(t){return Object(i["a"])("".concat(n["c"],"/dispatch/query-detail-freight"),t)},b=function(t){return Object(i["a"])("".concat(n["c"],"/customer/get-task-affix/")+t.trspType+"/"+t.logisticsType)},S=function(t){return Object(i["a"])("".concat(n["c"],"/get/generate"),t)}},"9fe3":function(t,e,a){},e160:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"simple-entry"},[a("div",{staticClass:"public-detail"},[a("div",{staticClass:"important-info"},[a("Row",[a("Col",{attrs:{span:"4"}},[a("div",{staticClass:"name"},[t._v("基础货运要求")])]),a("Col",{attrs:{span:"20"}},[t.sendShow?a("Button",{on:{click:t.send}},[t._v("发送")]):t._e(),a("Button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:function(e){return t.save("formValidate")}}},[t._v("保存")])],1)],1)],1)]),a("div",{staticClass:"public-table-content public-input"},[a("div",{staticClass:"l-content"},[a("div",{staticClass:"table-data"},[a("ul",{staticClass:"transit"},[a("p",{staticClass:"table-title"},[t._v("基本信息")]),a("Form",{ref:"formValidate",attrs:{model:t.transitModal,"label-position":"left","label-width":100,rules:t.ruleValidate}},[a("FormItem",{staticClass:"min-width",attrs:{label:"启运地："}},[a("i",{staticClass:"rule-class"},[t._v("*")]),a("adt-city-selector",{staticStyle:{width:"120px",display:"inline-block",marginRight:"10px"},on:{"on-change":t.handelDirStart}}),a("Select",{attrs:{filterable:"",clearable:""},on:{"on-change":t.onPlaceChange,"on-clear":t.onPlaceClear},model:{value:t.transitModal.custStartPlace,callback:function(e){t.$set(t.transitModal,"custStartPlace",e)},expression:"transitModal.custStartPlace"}},t._l(t.custStartPlace,(function(e){return a("Option",{key:e.value,attrs:{value:e.value+"-"+e.label}},[t._v(t._s(e.label))])})),1),a("span",{staticClass:"btn-ok",on:{click:t.okPlace}},[t._v("确定")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.startHintShow,expression:"startHintShow"}],staticClass:"hint"},[t._v("请输入启运地")]),a("p",{staticClass:"select-value"},t._l(t.startPlace,(function(e,i){return a("span",{key:i},[t._v(t._s(e)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delPlaceDeparture(i)}}})],1)})),0)],1),a("FormItem",{staticClass:"min-width",attrs:{label:"目的地："}},[a("i",{staticClass:"rule-class"},[t._v("*")]),a("adt-city-selector",{staticStyle:{width:"120px",display:"inline-block",marginRight:"10px"},on:{"on-change":t.handelDirEnd}}),a("Select",{attrs:{filterable:"",clearable:""},on:{"on-change":t.onEndPlaceChange,"on-clear":t.onEndClear},model:{value:t.transitModal.custEndPlace,callback:function(e){t.$set(t.transitModal,"custEndPlace",e)},expression:"transitModal.custEndPlace"}},t._l(t.custEndPlace,(function(e){return a("Option",{key:e.value,attrs:{value:e.value+"-"+e.label}},[t._v(t._s(e.label))])})),1),a("span",{staticClass:"btn-ok",on:{click:t.okEndPlace}},[t._v("确定")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.endHintShow,expression:"endHintShow"}],staticClass:"hint"},[t._v("请输入目的地")]),a("p",{staticClass:"select-value"},t._l(t.endPlace,(function(e,i){return a("span",{key:i},[t._v(t._s(e)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delCustEndPlace(i)}}})],1)})),0)],1),a("FormItem",{staticClass:"min-width",attrs:{label:"中转地："}},[a("adt-city-selector",{staticStyle:{width:"120px",display:"inline-block",marginRight:"10px"},on:{"on-change":t.handelDirTrsspmPort}}),a("Select",{attrs:{filterable:"",clearable:""},on:{"on-change":t.onSiteChange,"on-clear":t.onSiteClear},model:{value:t.transitModal.custTransitPlace,callback:function(e){t.$set(t.transitModal,"custTransitPlace",e)},expression:"transitModal.custTransitPlace"}},t._l(t.custTransitPlace,(function(e){return a("Option",{key:e.value,attrs:{value:e.value+"-"+e.label}},[t._v(t._s(e.label))])})),1),a("span",{staticClass:"btn-ok",on:{click:t.okCustTransitPlace}},[t._v("确定")]),a("p",{staticClass:"select-value"},t._l(t.ctransitPlace,(function(e,i){return a("span",{key:i},[t._v(t._s(e)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delTransit(i)}}})],1)})),0)],1),a("FormItem",{attrs:{label:"货物类型：",prop:"cargoType"}},[a("Select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:t.transitModal.cargoType,callback:function(e){t.$set(t.transitModal,"cargoType",e)},expression:"transitModal.cargoType"}},t._l(t.cargoType,(function(e,i){return a("Option",{key:i,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"物流类型：",prop:"logisticsType"}},[a("Select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:t.transitModal.logisticsType,callback:function(e){t.$set(t.transitModal,"logisticsType",e)},expression:"transitModal.logisticsType"}},t._l(t.logisticsType,(function(e,i){return a("Option",{key:i,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"运输类型：",prop:"trspType"}},[a("Select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:t.transitModal.trspType,callback:function(e){t.$set(t.transitModal,"trspType",e)},expression:"transitModal.trspType"}},t._l(t.trspType,(function(e,i){return a("Option",{key:i,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1)],1)],1),a("ul",{staticClass:"transit"},[a("p",{staticClass:"table-title"},[t._v("货运要求备注：")]),a("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入货运要求备注，500字以内！",maxlength:"500"},model:{value:t.transitModal.freightBrief,callback:function(e){t.$set(t.transitModal,"freightBrief",e)},expression:"transitModal.freightBrief"}})],1),a("div",{staticClass:"bottom"},[a("p",[t._v(" 如果需要准确匹配物流方案，请您"),a("a",{on:{click:t.detailEntryClick}},[t._v("填写详细信息")]),t._v("！ "),a("Icon",{attrs:{type:"ios-arrow-forward"}})],1)])])])]),a("adt-reconfirm-modal",{attrs:{showModal:t.isTransitModal,message:t.transitText},on:{"on-visible-change":t.visibleChange}}),a("adt-reconfirm-modal",{attrs:{showModal:t.isPlaceDepartureModal,message:t.placeDepartureText},on:{"on-visible-change":t.visiblePlaceDeparture,"on-ok":t.handleConfirm,"on-cancel":t.handleCancel}})],1)},n=[],s=(a("2eeb"),a("ea69"),a("e18c"),a("e35a"),a("34d9"),a("96db"),a("0d7a"),a("af86"),a("88d6")),r=(a("b449"),a("5d83")),c=a("5c62"),l=a("77ab"),o=a("8a9d"),d={name:"ConfirmFreightRequest",data:function(){return{sendShow:!1,transitModal:{custStartPlace:"",custStartPlace1:"",custEndPlace:"",custEndPlace1:"",custTransitPlace:"",custTransitPlace1:"",cargoType:"",logisticsType:"",trspType:"",freightBrief:""},trspType:this.$getDictionary("TRANSPORT_TYPE"),cargoType:this.$getDictionary("GOODS_TYPE"),logisticsType:this.$getDictionary("LOGISTICS_TYPE"),custStartPlace:[],custTransitPlace:[],custEndPlace:[],transitText:"",placeDepartureText:"",isTransitModal:!1,isPlaceDepartureModal:!1,ruleValidate:{custStartPlace:[{required:!0,message:"请选择启运地",trigger:"change"}],custEndPlace:[{required:!0,message:"请选择目的地",trigger:"change"}],cargoType:[{required:!0,message:"请选择货物类型",trigger:"change"}],logisticsType:[{required:!0,message:"请选择物流类型",trigger:"change"}],trspType:[{required:!0,message:"请选择运输类型",trigger:"change"}]},ctransitPlace:[],ctransitPlaceCode:[],startPlace:[],startPlaceCode:[],endPlace:[],endPlaceCode:[],checkList:[],addPlaceChange:!1,isStartPlaceModalShow:!1,addEndPlaceChange:!1,isEndPlaceModalShow:!1,freightReqCode:"",freightReqStatus:"",startHintShow:!1,endHintShow:!1,startCity:"",startCityCode:"",endCity:"",endCityCode:"",custTransitCity:"",custTransitCityCode:"",startSite:"",startSiteCode:"",endSite:"",endSiteCode:"",custTransitSite:"",custTransitSiteCode:""}},mounted:function(){this.transitText='中转地过多会导致物流方案的费用过高，<br>时效过长，如需添加请<a class="modal-a" href="">联系客服</a>',this.placeDepartureText="您增加的启运地（目的地）已超过三个， 会匹配出多条路线。是否继续增加？"},watch:{startPlaceCode:{handler:function(t,e){0==t.length?this.startHintShow=!0:this.startHintShow=!1},deep:!0},endPlaceCode:{handler:function(t,e){0==t.length?this.endHintShow=!0:this.endHintShow=!1},deep:!0}},methods:Object(s["a"])({okPlace:function(){0==this.startSite.length&&(this.startPlace.push(this.startCity),this.startPlaceCode.push(this.startCityCode)),0!=this.startSite.length&&(this.startPlace.push(this.startSite),this.startPlaceCode.push(this.startSiteCode)),this.startPlace=Object(c["a"])(new Set(this.startPlace)),this.startPlaceCode=Object(c["a"])(new Set(this.startPlaceCode)),this.isStartPlaceModalShow||!(this.startPlace.length>3)||(this.isPlaceDepartureModal=!0,this.isStartPlaceModalShow=!0,this.addPlaceChange)},okEndPlace:function(){0==this.endSite.length&&(this.endPlace.push(this.endCity),this.endPlaceCode.push(this.endCityCode)),0!=this.endSite.length&&(this.endPlace.push(this.endSite),this.endPlaceCode.push(this.endSiteCode)),this.endPlace=Object(c["a"])(new Set(this.endPlace)),this.endPlaceCode=Object(c["a"])(new Set(this.endPlaceCode)),this.isEndPlaceModalShow||!(this.endPlace.length>=3)||(this.isPlaceDepartureModal=!0,this.isEndPlaceModalShow=!0,this.addEndPlaceChange)},okCustTransitPlace:function(){0==this.custTransitSite.length&&(this.ctransitPlace.push(this.custTransitCity),this.ctransitPlaceCode.push(this.custTransitCityCode)),0!=this.custTransitSite.length&&(this.ctransitPlace.push(this.custTransitSite),this.ctransitPlaceCode.push(this.custTransitSiteCode)),this.ctransitPlace=Object(c["a"])(new Set(this.ctransitPlace)),this.ctransitPlaceCode=Object(c["a"])(new Set(this.ctransitPlaceCode)),this.ctransitPlace.length>=5&&(this.isTransitModal=!0)},_handelDir:function(t,e){return new Promise((function(e,a){var i=t[t.length-1],n=t[t.length-2];"110000000000"!=n&&"120000000000"!=n&&"500000000000"!=n&&"310000000000"!=n||(i=n),Object(l["c"])({city:i}).then((function(t){var a=t.data,i=a[0],n=i.map((function(t){return{value:t.sttnCode,label:t.sttnName}}));e(n)}))}))},handelDirStart:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0==t.data.length){a.next=7;break}return a.next=3,e._handelDir(t.value);case 3:i=a.sent,e.custStartPlace=i,e.startCity=t.data[t.data.length-1].label,e.startCityCode=t.data[t.data.length-1].value;case 7:case"end":return a.stop()}}),a)})))()},onPlaceChange:function(t){if(t){var e=t.split("-")[0],a=t.split("-")[1];this.startSite=a,this.startSiteCode=e}},handelDirTrsspmPort:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0==t.data.length){a.next=7;break}return a.next=3,e._handelDir(t.value);case 3:i=a.sent,e.custTransitPlace=i,e.custTransitCity=t.data[t.data.length-1].label,e.custTransitCityCode=t.data[t.data.length-1].value;case 7:case"end":return a.stop()}}),a)})))()},onSiteChange:function(t){if(t){var e=t.split("-")[0],a=t.split("-")[1];this.custTransitSite=a,this.custTransitSiteCode=e}},handelDirEnd:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0==t.data.length){a.next=7;break}return a.next=3,e._handelDir(t.value);case 3:i=a.sent,e.custEndPlace=i,e.endCity=t.data[t.data.length-1].label,e.endCityCode=t.data[t.data.length-1].value;case 7:case"end":return a.stop()}}),a)})))()},onEndPlaceChange:function(t){if(t){var e=t.split("-")[0],a=t.split("-")[1];this.endSite=a,this.endSiteCode=e}},visibleChange:function(t){this.isTransitModal=t},visiblePlaceDeparture:function(t){this.isPlaceDepartureModal=t},save:function(t){var e=this,a=JSON.parse(JSON.stringify(this.transitModal));this.$set(a,"inputType","0"),a.custStartPlace=this.startPlaceCode,a.custTransitPlace=this.ctransitPlaceCode,a.custEndPlace=this.endPlaceCode,0===this.startPlaceCode.length?this.startHintShow=!0:this.startHintShow=!1,0===this.endPlaceCode.length?this.endHintShow=!0:this.endHintShow=!1,this.$refs[t].validate((function(t){!t||e.startHintShow||e.endHintShow||Object(o["b"])({data:a}).then((function(t){e.$Message.info(t.message),e.freightReqCode=t.data.freightReqCode,e.freightReqStatus=t.data.freightReqStatus,e.sendShow=!0}))}))},send:function(){var t=this,e={freightReqCode:this.freightReqCode,freightReqStatus:this.freightReqStatus};Object(o["o"])({data:e}).then((function(e){t.$Message.info(e.message),200===e.code&&t.$router.push("/freight-request/list-client/1")}))},detailEntryClick:function(){this.$set(this.transitModal,"startPlaceArr",this.startPlace),this.$set(this.transitModal,"endPlaceArr",this.endPlace),this.$set(this.transitModal,"ctransitPlaceArr",this.ctransitPlace),this.$set(this.transitModal,"startPlaceCode",this.startPlaceCode),this.$set(this.transitModal,"endPlaceCode",this.endPlaceCode),this.$set(this.transitModal,"ctransitPlaceCode",this.ctransitPlaceCode);var t=JSON.stringify(this.transitModal);this.$router.push("/freight-request/detail-entry?a=".concat(t))},onPlaceClear:function(t){this.startSite="",this.startSiteCode=""},onEndClear:function(t){this.endSite="",this.endSiteCode=""},onSiteClear:function(){this.custTransitSite="",this.custTransitSiteCode=""},delTransit:function(t){this.ctransitPlace.splice(t,1),this.ctransitPlaceCode.splice(t,1)},delPlaceDeparture:function(t){this.startPlace.splice(t,1),this.startPlaceCode.splice(t,1)},delCustEndPlace:function(t){this.endPlace.splice(t,1),this.endPlaceCode.splice(t,1)},handleConfirm:function(){this.addPlaceChange=!0,this.isPlaceDepartureModal=!1},handleCancel:function(){this.isEndPlaceModalShow=!1,this.isStartPlaceModalShow=!1,this.isPlaceDepartureModal=!1}},"handleConfirm",(function(){this.addPlaceChange=!0,this.isPlaceDepartureModal=!1}))},u=d,h=(a("52b2"),a("4023")),p=Object(h["a"])(u,i,n,!1,null,"99893706",null);e["default"]=p.exports}}]);