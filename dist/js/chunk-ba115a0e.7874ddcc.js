(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba115a0e"],{2463:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("adt-search-folder",{attrs:{searchRouter:{query:{sceneCode:t.search.sceneCode,sceneName:t.search.sceneName,serverType:t.search.serverType,trspType:t.search.trspType,examineStatus:t.search.examineStatus,useStatus:t.search.useStatus}},isStatus:!0},on:{"on-triggerFolder":t.searchChange}},[a("template",{slot:"status"},[a("div",{staticClass:"status"},[a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"name"},[t._v("审核状态:")]),t._l(t.dictionaryApprovalStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.examineStatus===e.dictionaryKey},on:{click:function(a){return t.auditStatus(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2),a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"name"},[t._v("启用状态:")]),t._l(t.dictionaryEnabledStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.useStatus===e.dictionaryKey},on:{click:function(a){return t.enableStatus(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2)],1)]),a("template",{slot:"always-show"},[a("Col",{staticClass:"search-condition",attrs:{span:"4"}},[a("span",[t._v(" 场景编号：")]),a("Input",{attrs:{clearable:""},model:{value:t.search.sceneCode,callback:function(e){t.$set(t.search,"sceneCode",e)},expression:"search.sceneCode"}})],1),a("Col",{staticClass:"search-condition line-margin",attrs:{span:"4"}},[a("span",[t._v(" 场景名称：")]),a("Input",{attrs:{clearable:""},model:{value:t.search.sceneName,callback:function(e){t.$set(t.search,"sceneName",e)},expression:"search.sceneName"}})],1),a("Col",{staticClass:"search-condition line-margin",attrs:{span:"4"}},[a("span",[t._v(" 服务类型：")]),a("Select",{staticClass:"fromItem-content",attrs:{clearable:""},model:{value:t.search.serverType,callback:function(e){t.$set(t.search,"serverType",e)},expression:"search.serverType"}},t._l(t.dictionaryServiceType,(function(e,s){return a("Option",{key:s,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("Col",{staticClass:"search-condition line-margin",attrs:{span:"4"}},[a("span",[t._v(" 运输类型：")]),a("Select",{staticClass:"fromItem-content",attrs:{clearable:""},model:{value:t.search.trspType,callback:function(e){t.$set(t.search,"trspType",e)},expression:"search.trspType"}},t._l(t.dictionaryTransportType,(function(e,s){return a("Option",{key:s,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1)],1)],2),a("div",{staticClass:"btns-paginator"},[a("AdtButton",[a("Button",{on:{click:function(e){return t.add()}}},[t._v("新增场景"),a("Icon",{attrs:{type:"ios-add-circle-outline"}})],1),a("Button",{on:{click:function(e){return t.startUsing()}}},[t._v(t._s("批量启用"+(t.isManager?"":"申请"))),a("Icon",{attrs:{type:"ios-add-circle-outline"}})],1),a("Button",{on:{click:function(e){return t.stopUsing()}}},[t._v(" "+t._s("批量停用"+(t.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-tingyong"}})])])],1),a("adt-paginator",{staticClass:"pagination",attrs:{currentPage:~~t.page,total:~~t.total}})],1),a("AdtMyModal",{attrs:{title:t.modelTitle,okText:"保存",cancelText:"取消",showModal:t.isModalShow,width:"1200"},on:{"on-visible-change":t.addvisibleChange,"on-ok":function(e){return t.saveAdd()},"on-cancel":function(e){return t.cancelAdd()}}},[1==t.distinguish?a("div",[a("Form",{ref:"addFormItemData",staticClass:"fromItem",attrs:{model:t.addFormItem,rules:t.addFormItemRule,"label-width":100,"label-colon":""}},[a("FormItem",{attrs:{label:"场景名称",prop:"sceneName"}},[a("Input",{staticClass:"fromItem-content",model:{value:t.addFormItem.sceneName,callback:function(e){t.$set(t.addFormItem,"sceneName",e)},expression:"addFormItem.sceneName"}})],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"服务类型",prop:"serverType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.addFormItem.serverType,callback:function(e){t.$set(t.addFormItem,"serverType",e)},expression:"addFormItem.serverType"}},t._l(t.dictionaryServiceType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.serviceTag,value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"运输类型",prop:"trspType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.addFormItem.trspType,callback:function(e){t.$set(t.addFormItem,"trspType",e)},expression:"addFormItem.trspType"}},t._l(t.dictionaryTransportType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.transportTag,value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"物流类型",prop:"logisticsType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.addFormItem.logisticsType,callback:function(e){t.$set(t.addFormItem,"logisticsType",e)},expression:"addFormItem.logisticsType"}},t._l(t.dictionaryLogisticsType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.logisticsTag,value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1)],1)],1):t._e(),2==t.distinguish?a("div",[a("div",{staticClass:"scene-top"},[t._v("场景编号"+t._s(t.sceneCode))]),a("div",{staticClass:"scene-edit"},[a("Form",{ref:"editFormItemData",staticClass:"fromItem",attrs:{model:t.editFormItem,rules:t.editFormItemRule,"label-width":75,"label-colon":""}},[a("FormItem",{attrs:{label:"场景名称",prop:"accountEmail"}},[a("Input",{staticClass:"fromItem-content",model:{value:t.editFormItem.sceneName,callback:function(e){t.$set(t.editFormItem,"sceneName",e)},expression:"editFormItem.sceneName"}})],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"服务类型",prop:"serverType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.editFormItem.serverType,callback:function(e){t.$set(t.editFormItem,"serverType",e)},expression:"editFormItem.serverType"}},t._l(t.dictionaryServiceType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.serviceTag,value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"运输类型",prop:"trspType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.editFormItem.trspType,callback:function(e){t.$set(t.editFormItem,"trspType",e)},expression:"editFormItem.trspType"}},t._l(t.dictionaryTransportType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.transportTag,value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"物流类型",prop:"logisticsType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.editFormItem.logisticsType,callback:function(e){t.$set(t.editFormItem,"logisticsType",e)},expression:"editFormItem.logisticsType"}},t._l(t.dictionaryLogisticsType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.logisticsTag,value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1)],1)],1)]):t._e(),a("hr",{staticClass:"line-solid"}),a("adt-tab-btns",{attrs:{height:40,isBaseBtn:!0,titleNames:t.titleNames,btnIndex:t.btnIndex,width:255},on:{handleBtn:t.handleBtn}},[a("div",{staticClass:"line"}),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.btnIndex,expression:"btnIndex == 1"}],staticClass:"tabs"},[a("div",{staticClass:"tabs-task"},[a("div",{staticClass:"tabs-search"},[a("span",[t._v("基础任务名称：")]),a("div",{staticClass:"tabs-condition"},[a("Input",{staticClass:"tabs-condition-input",attrs:{type:"text"},model:{value:t.basicTaskName,callback:function(e){t.basicTaskName=e},expression:"basicTaskName"}}),a("Icon",{staticClass:"tabs-condition-logo",attrs:{type:"md-search"},on:{click:function(e){return t.searchTask(1)}}})],1),a("Button",{staticClass:"tabs-btn",attrs:{type:"primary"},on:{click:function(e){return t.sort(1)}}},[t._v("排序")])],1),a("Table",{attrs:{columns:t.tableColumnsBasicTask,data:t.tableDataBasicTask,stripe:""},on:{"on-selection-change":t.checkBasicTask},scopedSlots:t._u([{key:"sort",fn:function(e){var s=e.row,i=e.index;return[a("div",{staticStyle:{position:"relative"}},[a("span",{staticClass:"required-tag",staticStyle:{width:"30px"}},[t._v("*")]),a("Input",{staticStyle:{width:"80px"},attrs:{clearable:""},on:{"on-change":function(e){return t.changeRowData(s,i,"sort","sortBasic")}},model:{value:s.sort,callback:function(e){t.$set(s,"sort","string"===typeof e?e.trim():e)},expression:"row.sort"}})],1)]}}])})],1),a("div",{staticClass:"tabs-line"}),a("div",{staticClass:"tabs-sort"},[a("div",{staticClass:"tabs-title"},[t._v("基础任务排序:")]),a("Table",{attrs:{columns:t.tableColumnsBasicTaskSort,data:t.tableDataBasicTaskSort,stripe:""}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.btnIndex,expression:"btnIndex == 2"}],staticClass:"tabs"},[a("div",{staticClass:"tabs-task"},[a("div",{staticClass:"tabs-search"},[a("span",[t._v("附加任务名称：")]),a("div",{staticClass:"tabs-condition"},[a("Input",{staticClass:"tabs-condition-input",attrs:{type:"text"},model:{value:t.affixTaskName,callback:function(e){t.affixTaskName=e},expression:"affixTaskName"}}),a("Icon",{staticClass:"tabs-condition-logo",attrs:{type:"md-search"},on:{click:function(e){return t.searchTask(2)}}})],1),a("Button",{staticClass:"tabs-btn",attrs:{type:"primary"},on:{click:function(e){return t.sort(2)}}},[t._v("排序")])],1),a("Table",{attrs:{columns:t.tableColumnsAdditionalTasks,data:t.tableDataAdditionalTasks,stripe:""},on:{"on-selection-change":t.checkBasicTask},scopedSlots:t._u([{key:"sort",fn:function(e){var s=e.row,i=e.index;return[a("div",{staticStyle:{position:"relative"}},[a("span",{staticClass:"required-tag",staticStyle:{width:"30px"}},[t._v("*")]),a("Input",{staticStyle:{width:"80px"},attrs:{clearable:""},on:{"on-change":function(e){return t.changeRowData(s,i,"sort","sortAttach")}},model:{value:s.sort,callback:function(e){t.$set(s,"sort","string"===typeof e?e.trim():e)},expression:"row.sort"}})],1)]}}])})],1),a("div",{staticClass:"tabs-line"}),a("div",{staticClass:"tabs-sort"},[a("div",{staticClass:"tabs-title"},[t._v("基础任务排序:")]),a("Table",{attrs:{columns:t.tableColumnsAdditionalTasksSort,data:t.tableDataAdditionalTasksSort,stripe:""}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.btnIndex,expression:"btnIndex == 3"}],staticClass:"tabs"},[a("div",{staticClass:"tabs-task"},[a("div",{staticClass:"tabs-search"},[a("span",[t._v("单据名称：")]),a("div",{staticClass:"tabs-condition"},[a("Input",{staticClass:"tabs-condition-input",attrs:{type:"text"},model:{value:t.billName,callback:function(e){t.billName=e},expression:"billName"}}),a("Icon",{staticClass:"tabs-condition-logo",attrs:{type:"md-search"},on:{click:function(e){return t.searchTask(3)}}})],1),a("Button",{staticClass:"tabs-btn",attrs:{type:"primary"},on:{click:function(e){return t.sort(3)}}},[t._v("排序")])],1),a("Table",{attrs:{columns:t.tableColumnsDocument,data:t.tableDataDocument,stripe:""},on:{"on-selection-change":t.checkBasicTask},scopedSlots:t._u([{key:"sort",fn:function(e){var s=e.row,i=e.index;return[a("div",{staticStyle:{position:"relative"}},[a("span",{staticClass:"required-tag",staticStyle:{width:"30px"}},[t._v("*")]),a("Input",{staticStyle:{width:"80px"},attrs:{clearable:""},on:{"on-change":function(e){return t.changeRowData(s,i,"sort","sortDocument")}},model:{value:s.sort,callback:function(e){t.$set(s,"sort","string"===typeof e?e.trim():e)},expression:"row.sort"}})],1)]}}])})],1),a("div",{staticClass:"tabs-line"}),a("div",{staticClass:"tabs-sort"},[a("div",{staticClass:"tabs-title"},[t._v("单据排序:")]),a("Table",{attrs:{columns:t.tableColumnsDocumentSort,data:t.tableDataDocumentSort,stripe:""}})],1)])]),a("div",{staticClass:"public-transit scen-select"},[a("Form",{ref:"formScenes",attrs:{model:t.formScenes,inline:"","label-colon":""}},[a("FormItem",{staticClass:"select-transit",attrs:{label:"必须共存场景"}},[a("Select",{attrs:{filterable:"",loading:t.sceneLoading},on:{"on-select":t.onChangeClick},model:{value:t.formScenes.symbiosisScene,callback:function(e){t.$set(t.formScenes,"symbiosisScene",e)},expression:"formScenes.symbiosisScene"}},t._l(t.sceneData,(function(e,s){return a("Option",{key:s,attrs:{value:e.label}},[t._v(t._s(e.value))])})),1),a("p",{staticClass:"select-value"},t._l(t.sceneSelectList,(function(e,s){return a("span",{key:s},[t._v(t._s(e.label)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delTransit(s)}}})],1)})),0)],1),a("FormItem",{staticClass:"select-transit",attrs:{label:"无法共存场景"}},[a("Select",{attrs:{filterable:"",loading:t.sceneNoLoading},on:{"on-select":t.noChangeClick},model:{value:t.formScenes.exclusiveScene,callback:function(e){t.$set(t.formScenes,"exclusiveScene",e)},expression:"formScenes.exclusiveScene"}},t._l(t.sceneData,(function(e,s){return a("Option",{key:s,attrs:{value:e.label}},[t._v(t._s(e.value))])})),1),a("p",{staticClass:"select-value"},t._l(t.sceneNoSelectList,(function(e,s){return a("span",{key:s},[t._v(t._s(e.label)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delTransitNo(s)}}})],1)})),0)],1)],1)],1)])],1),a("Table",{attrs:{columns:t.tableColumns,data:t.tableData,stripe:""},on:{"on-selection-change":t.selectionChange},scopedSlots:t._u([{key:"auditStatus",fn:function(e){var s=e.row;return[a("span",{class:{success:"pass"==s.examineStatus,failure:"fail"==s.examineStatus}},[t._v(t._s(s.examineStatus))])]}},{key:"enableStatus",fn:function(e){var s=e.row;return[a("span",{class:{success:"enable"==s.useStatus,failure:"disable"==s.useStatus}},[t._v(t._s(s.useStatus))])]}},{key:"action",fn:function(e){var s=e.row;return[s.useStatus&&"已停用"!==s.useStatus.trim()||"待审核"===s.examineStatus?t._e():a("span",{staticClass:"icon-action icon-action-word",on:{click:function(e){return t.startUsing(s)}}},[t._v("启")]),s.useStatus&&"已启用"===s.useStatus.trim()&&"待审核"!==s.examineStatus?a("span",{staticClass:"icon-action icon-action-word",on:{click:function(e){return t.stopUsing(s)}}},[t._v("停")]):t._e(),t.isManager&&"待审核"===s.examineStatus?a("Icon",{staticClass:"icon-action",attrs:{type:"ios-contact-outline"},on:{click:function(e){return t.examine(s)}}}):t._e(),a("Icon",{staticClass:"icon-action",attrs:{type:"ios-alert-outline"},on:{click:function(e){return t.detail(s)}}})]}}])}),a("adt-my-modal",{attrs:{title:t.examineModalTitle,showModal:t.isAuditShow,width:"600"},on:{"on-visible-change":t.auditvisibleChange,"on-ok":function(e){return t.saveAudit()}}},[a("RadioGroup",{staticStyle:{"margin-bottom":"20px"},model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[a("Radio",{attrs:{label:"1"}},[t._v("同意"+t._s(1===t.examineType?"启用":"停用"))]),a("Radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"0"}},[t._v("不同意"+t._s(1===t.examineType?"启用":"停用"))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===t.agree,expression:"agree === '0'"}]},[a("div",{staticClass:"reason-name",staticStyle:{"margin-bottom":"6px"}},[t._v("填写驳回原因:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:t.reason,callback:function(e){t.reason="string"===typeof e?e.trim():e},expression:"reason"}})],1)],1),a("adt-reconfirm-modal",{attrs:{showModal:t.isActionDel},on:{"on-visible-change":t.visibleChange,"on-ok":function(e){return t.allDelClick()}}})],1)},i=[],n=(a("fe59"),a("ea69"),a("513c"),a("1b2e"),a("e35a"),a("9cf3"),a("6db4"),a("08ba"),a("80a0")),c=a("e24e"),o=a("88d6"),r=[{title:"选择",align:"center",type:"selection",width:80},{title:"场景编号",align:"center",key:"sceneCode"},{title:"场景名称",align:"center",key:"sceneName"},{title:"运输类型",align:"center",key:"trspType"},{title:"服务类型",align:"center",key:"serverType"},{title:"物流类型",align:"center",key:"logisticsType"},{title:"创建人",align:"center",key:"createBy"},{title:"创建时间",align:"center",key:"createDatetime"},{title:"审核时间",align:"center",key:"examineDatetime"},{title:"审核状态",align:"center",slot:"auditStatus"},{title:"启用状态",align:"center",slot:"enableStatus"},{title:"操作",align:"center",key:"operating",slot:"action"}],l=[{title:"选择",align:"center",type:"selection",width:80},{title:"基础任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",slot:"sort",key:"sort",width:250}],u=[{title:"序号",align:"center",type:"index",width:80},{title:"基础任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",key:"sort",width:250,sortType:"asc"}],d=[{title:"选择",align:"center",type:"selection",width:80},{title:"附加任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",slot:"sort",width:250,sortType:"asc"}],m=[{title:"选择",align:"center",type:"index",width:80},{title:"附加任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",key:"sort",width:250,sortType:"asc"}],p=[{title:"选择",align:"center",type:"selection",width:80},{title:"单据名称",align:"center",key:"taskName"},{title:"排序值",align:"center",slot:"sort",width:250,sortType:"asc"}],h=[{title:"序号",align:"center",type:"index",width:80},{title:"单据名称",align:"center",key:"taskName"},{title:"排序值",align:"center",key:"sort",width:250,sortType:"asc"}],b=a("7b46"),f=a("b962"),y=a("90fe"),v=a("54fb"),g={mixins:[b["a"]],data:function(){var t;return t={userType:"",modelTitle:"",isModalShow:!1,isActionDel:!1,isAuditShow:!1,isEditAuditShow:!1,isManager:!1,examineType:1,examineModalTitle:"启用审核",value:"1",distinguish:0,judgment:0,search:{examineStatus:"",useStatus:"",sceneCode:"",sceneName:"",serverType:"",trspType:""},basicTaskName:"",affixTaskName:"",billName:"",addType:{},auditStatusNum:"默认值",enableStatusNum:"默认值",titleNames:["基础任务映射设置","附加任务映射设置","单据映射设置"],btnIndex:1,addFormItem:{},addFormItemRule:{sceneName:[f["a"].required("场景名称")[0]],serverType:[f["a"].select("服务类型")[0]],trspType:[f["a"].select("运输类型")[0]],logisticsType:[f["a"].select("物流类型")[0]]},sceneCode:"",editFormItem:{},editFormItemRule:{},dictionaryServiceType:this.$getDictionary("SERVICE_TYPE")||[],dictionaryTransportType:this.$getDictionary("TRANSPORT_TYPE")||[],dictionaryLogisticsType:this.$getDictionary("LOGISTICS_TYPE")||[],dictionaryApprovalStatus:this.$getDictionary("AUDIT_STATUS")||[],dictionaryEnabledStatus:this.$getDictionary("ENABLE_STATUS")||[],tableColumnsBasicTask:l,tableColumnsAdditionalTasks:d,tableColumnsDocument:p,tableDataBasicTaskAudit:[],tableDataAdditionalTasksAudit:[],tableDataDocumentAudit:[],tableDataBasicTask:[],formBasis:{sort:""},ruleBasis:{sort:[f["a"].required("基础任务名称")[0]]},checkTask:[],selectionList:[],tableDataBasicTaskSort:[],tableColumnsBasicTaskSort:u},Object(o["a"])(t,"tableColumnsAdditionalTasks",d),Object(o["a"])(t,"tableColumnsAdditionalTasksSort",m),Object(o["a"])(t,"tableDataAdditionalTasksSort",[]),Object(o["a"])(t,"tableColumnsDocument",p),Object(o["a"])(t,"tableColumnsDocumentSort",h),Object(o["a"])(t,"tableDataDocumentSort",[]),Object(o["a"])(t,"formScenes",{symbiosisScene:"",exclusiveScene:""}),Object(o["a"])(t,"tableDataAdditionalTasks",[]),Object(o["a"])(t,"tableDataDocument",[]),Object(o["a"])(t,"tableColumns",r),Object(o["a"])(t,"tableData",[]),Object(o["a"])(t,"isAdd",!0),Object(o["a"])(t,"selectedData",[]),Object(o["a"])(t,"sceneLoading",!1),Object(o["a"])(t,"list",[{sceneCode:"111",sceneName:"场景1"},{sceneCode:"222",sceneName:"场景2"}]),Object(o["a"])(t,"sceneData",[]),Object(o["a"])(t,"sceneSelect",[]),Object(o["a"])(t,"sceneSelectList",[]),Object(o["a"])(t,"sceneNoLoading",!1),Object(o["a"])(t,"sceneNoData",[]),Object(o["a"])(t,"sceneNoSelect",[]),Object(o["a"])(t,"sceneNoSelectList",[]),Object(o["a"])(t,"examineInfo",{}),Object(o["a"])(t,"agree","1"),Object(o["a"])(t,"reason",""),Object(o["a"])(t,"test",[]),Object(o["a"])(t,"serviceTag","服务类型"),Object(o["a"])(t,"transportTag","运输类型"),Object(o["a"])(t,"logisticsTag","物流类型"),Object(o["a"])(t,"dataList",[]),t},mounted:function(){this.getDictionaryData(),this.userType=JSON.parse(window.sessionStorage.getItem("logisticsData")),this.userType="管理员","管理员"==this.userType&&(this.isManager=!0)},methods:{addvisibleChange:function(t){this.isModalShow=t},auditvisibleChange:function(t){this.isAuditShow=t},visibleChange:function(t){this.isActionDel=t},selectionChange:function(t){this.selectionList=t},getDictionaryData:function(){this.$getDictionary("SERVICE_TYPE"),this.$getDictionary("TRANSPORT_MODE")},dataInit:function(){this.getData()},getData:function(){var t=this,e={direction:"asc",examineStatus:this.search.examineStatus,page:this.page,sceneCode:this.search.sceneCode,sceneName:this.search.sceneName,serverType:this.search.serverType,trspType:this.search.trspType,useStatus:this.search.useStatus};Object(v["j"])({data:e}).then((function(e){200==e.code&&(t.tableData=e.data.content||[],t.total=e.data.totalElements,t.tableData.forEach((function(t){t.createDatetime=Object(y["a"])(t.createDatetime),t.examineDatetime=Object(y["a"])(t.examineDatetime)})))}))},add:function(){this.isModalShow=!0,this.distinguish=1,this.modelTitle="新增场景",this.isAdd=!0,this.getAddData()},getAddData:function(t,e,a){if(t||e||a){var s={serverType:t||"",trspType:e||"",logisticsType:a||""};"T"==t||"Y"==t?e&&a&&(this.addType=s,this.getTypeData(s)):(this.addType=s,this.getTypeData(s))}else{var i={serverType:"服务类型",trspType:"运输类型",logisticsType:"物流类型"};this.getTypeData(i)}},getTypeData:function(t){var e=this;Object(v["h"])({data:t}).then((function(t){200==t.code&&(e.tableDataBasicTask=t.data.baseTasks||[],e.tableDataAdditionalTasks=t.data.affixTasks||[],e.tableDataDocument=t.data.bills||[],e.sceneNoData=t.data.sceneInfo||[],e.sceneNoData.forEach((function(t){e.sceneData.push({value:t.sceneName,label:t.sceneCode})})))}))},startUsing:function(t){var e=this,a=this.handleRequestData(t);a.length&&Object(v["c"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},stopUsing:function(t){var e=this,a=this.handleRequestData(t);a.length&&Object(v["b"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},handleRequestData:function(t){var e=[];if(t)return e.push(n(t)),e;if(this.selectionList.length){var a,s=Object(c["a"])(this.selectionList);try{for(s.s();!(a=s.n()).done;){var i=a.value;e.push(n(i))}}catch(o){s.e(o)}finally{s.f()}}else this.$Message.warning("请先选择场景");return e;function n(t){var e=t.sceneCode,a=t.taskCode,s=t.useStatus,i=t.version,n=t.examineStatus;return{sceneCode:e,taskCode:a,useStatus:s,version:i,examineStatus:n}}},selectType:function(t){"服务类型"==t.tag&&(this.serverValue=t.value),"运输类型"==t.tag&&(this.trspValue=t.value),"物流类型"==t.tag&&(this.logisticsValue=t.value),this.getAddData(this.serverValue,this.trspValue,this.logisticsValue)},checkBasicTask:function(t){this.selectedData[this.btnIndex]=t},sort:function(t){if(1==t){if(!this.verifyItem())return;this.tableDataBasicTaskSort=this.selectedData[this.btnIndex]}if(2==t){if(!this.verifyItem())return;this.tableDataAdditionalTasksSort=this.selectedData[this.btnIndex]}if(3==t){if(!this.verifyItem())return;this.tableDataDocumentSort=this.selectedData[this.btnIndex]}},searchTask:function(t){var e=this,a=this.addType;1==t&&(a.taskName=this.basicTaskName,Object(v["l"])({data:a}).then((function(t){200==t.code&&(e.tableDataBasicTask=t.data||[])}))),2==t&&(a.taskName=this.affixTaskName,Object(v["k"])({data:a}).then((function(t){200==t.code&&(e.tableDataAdditionalTasks=t.data||[])})))},delTransit:function(t){this.sceneSelectList.splice(t,1)},onChangeClick:function(t){this.sceneSelectList.push(t),this.sceneSelect.push(t.value)},delTransitNo:function(t){this.sceneNoSelectList.splice(t,1)},noChangeClick:function(t){this.sceneNoSelect.push(t.value),this.sceneNoSelectList.push(t)},changeRowData:function(t,e,a,s){"sortBasic"==s&&(this.tableDataBasicTask[e]=t),"sortAttach"==s&&(this.tableDataAdditionalTasks[e]=t),"sortDocument"==s&&(this.tableDataDocument[e]=t);var i,n=Object(c["a"])(this.selectedData[this.btnIndex]);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(o.taskName===t.taskName){o[a]="sort"===a?Number(t[a]):t[a];break}}}catch(r){n.e(r)}finally{n.f()}},searchChange:function(){},examine:function(t){t.useStatus&&"已停用"!==t.useStatus.trim()?(this.examineType=0,this.examineModalTitle="停用审核"):(this.examineType=1,this.examineModalTitle="启用审核"),this.examineInfo.sceneCode=t.sceneCode,this.examineInfo.version=t.version,this.isAuditShow=!0},audit:function(t){this.isAuditShow=!0},edit:function(t){this.isModalShow=!0,this.distinguish=2,this.modelTitle="编辑场景",this.isAdd=!1,this.sceneCode=t.sceneCode,this.editFormItem=t;var e={serverType:t.serverType,trspType:t.trspType,logisticsType:t.logisticsType};this.getTypeData(e)},remove:function(){this.isActionDel=!0},allDelClick:function(){},saveAdd:function(){var t=this,e=this;function a(){e.$Message.info("保存成功"),e.$refs.addFormItemData.resetFields(),e.selectedData=[],e.isModalShow=!1,e.sceneNoData=[],e.getData()}this.$refs.addFormItemData.validate((function(e){if(e){if(!t.verifyItem())return;var s=Object(n["a"])({},t.addFormItem);s.baseTasks=t.selectedData[1],s.affixTasks=t.selectedData[2],s.blsCodes=t.selectedData[3],s.symbiosisScenes=t.sceneSelect,s.mutexScenes=t.sceneNoSelect,t.isAdd,Object(v["a"])({data:s}).then((function(t){a()}))}}))},verifyItem:function(){if(!this.selectedData[this.btnIndex].length)return this.$Message.warning("请至少选择一个任务！"),!1;var t,e=[],a=Object(c["a"])(this.selectedData[this.btnIndex]);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(!s.sort&&!Number.isNaN(s.sort))return this.$Message.warning("选中任务的排序值必填！"),!1;if(!/^\d+$/.test(s.sort))return void this.$Message.warning("排序值只能是整数！");e.push(s.sort)}}catch(i){a.e(i)}finally{a.f()}return!Object(y["c"])(e)||(this.$Message.warning("选中的任务的排序值不能重复！"),!1)},saveAudit:function(){var t=this,e=Object(n["a"])({},this.examineInfo);if(1===this.examineType)if("1"===this.agree)Object(v["g"])({data:e}).then((function(e){t.$Message.info(e.message),t.isAuditShow=!1,t.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");e.message=this.reason,Object(v["f"])({data:e}).then((function(e){t.$Message.info(e.message),t.isAuditShow=!1,t.getData()}))}else if("1"===this.agree)Object(v["e"])({data:e}).then((function(e){t.$Message.info(e.message),t.isAuditShow=!1,t.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");e.message=this.reason,Object(v["d"])({data:e}).then((function(e){t.$Message.info(e.message),t.isAuditShow=!1,t.reason="",t.getData()}))}},cancelAdd:function(){this.sceneNoData=[]},detail:function(t){var e=t.sceneCode;this.$router.push({path:"/standard-mapper/scene-manage/detail",query:{sceneCode:e}})},auditStatus:function(t){this.search.examineStatus===t?this.search.examineStatus="":this.search.examineStatus=t},enableStatus:function(t){this.search.useStatus===t?this.search.useStatus="":this.search.useStatus=t},handleBtn:function(t){this.btnIndex=t+1}}},T=g,k=(a("a65b"),a("4023")),S=Object(k["a"])(T,s,i,!1,null,"1e9c8450",null);e["default"]=S.exports},"54fb":function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"a",(function(){return c})),a.d(e,"j",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"f",(function(){return d})),a.d(e,"e",(function(){return m})),a.d(e,"d",(function(){return p})),a.d(e,"l",(function(){return h})),a.d(e,"k",(function(){return b})),a.d(e,"i",(function(){return f}));var s=a("2934"),i=a("4ec3"),n=function(t){return Object(s["b"])("".concat(i["e"],"/scene/init-scene-add"),t)},c=function(t){return Object(s["b"])("".concat(i["e"],"/scene/add"),t)},o=function(t){return Object(s["b"])("".concat(i["e"],"/scene/query-page"),t)},r=function(t){return Object(s["b"])("".concat(i["e"],"/scene/enable"),t)},l=function(t){return Object(s["b"])("".concat(i["e"],"/scene/disable"),t)},u=function(t){return Object(s["b"])("".concat(i["e"],"/scene/enable-exam-pass"),t)},d=function(t){return Object(s["b"])("".concat(i["e"],"/scene/enable-exam-fail"),t)},m=function(t){return Object(s["b"])("".concat(i["e"],"/scene/disable-exam-pass"),t)},p=function(t){return Object(s["b"])("".concat(i["e"],"/scene/disable-exam-fail"),t)},h=function(t){return Object(s["b"])("".concat(i["e"],"/scene/add/query-task-base"),t)},b=function(t){return Object(s["b"])("".concat(i["e"],"/scene/add/query-task-affix"),t)},f=function(t){return Object(s["a"])("".concat(i["e"],"/scene/query-detail"),t)}},"6db4":function(t,e,a){"use strict";var s=a("1c8b"),i=a("c10f").trim,n=a("f221");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"7b46":function(t,e,a){"use strict";e["a"]={props:{page:{default:1}},data:function(){return{total:0,perpage:15}},created:function(){this.dataInit("judgment")},watch:{$route:function(){this.dataInit()}},methods:{paginatorInit:function(t,e){this.perpage=t,this.total=e}}}},a65b:function(t,e,a){"use strict";var s=a("f608"),i=a.n(s);i.a},f221:function(t,e,a){var s=a("efe2"),i=a("fc8c"),n="​᠎";t.exports=function(t){return s((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}},f608:function(t,e,a){}}]);