(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0074a71f"],{"2f2c":function(t,e,s){"use strict";s.d(e,"f",(function(){return i})),s.d(e,"d",(function(){return r})),s.d(e,"g",(function(){return o})),s.d(e,"h",(function(){return c})),s.d(e,"n",(function(){return l})),s.d(e,"e",(function(){return d})),s.d(e,"b",(function(){return p})),s.d(e,"c",(function(){return u})),s.d(e,"k",(function(){return h})),s.d(e,"o",(function(){return m})),s.d(e,"i",(function(){return v})),s.d(e,"l",(function(){return f})),s.d(e,"p",(function(){return C})),s.d(e,"j",(function(){return g})),s.d(e,"m",(function(){return b})),s.d(e,"a",(function(){return x}));var a=s("2934"),n=s("4ec3"),i=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/search/get-scheme"),t)},r=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/get-scheme"),t)},o=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/get-list-dspt"),t)},c=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/get-list-mkt"),t)},l=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/recommend-pass"),t)},d=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/get-scheme-details"),t)},p=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/get-scene-cstm"),t)},u=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/get-scene-list"),t)},h=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/recommend-check"),t)},m=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/recommend-route"),t)},v=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/recommend-all"),t)},f=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/recommend-check-cstm"),t)},C=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/recommend-route-cstm"),t)},g=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/recommend-all-cstm"),t)},b=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/recommend-modify"),t)},x=function(t){return Object(a["c"])("".concat(n["f"],"/scheme/confirm-only-scheme"),t)}},6930:function(t,e,s){"use strict";var a=s("70ce"),n=s.n(a);n.a},"70ce":function(t,e,s){},b687:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title"},[t._v("方案基本信息")]),s("AdtSchemeInformationRoute",{attrs:{logistics:t.logistics}},[s("template",{slot:"price"},[s("Row",[s("Col",{attrs:{span:"5"}},[s("span",[t._v("参考价格:"+t._s(t.programData.hghtPrice)+t._s(t.programData.offerCurrTranslate))])]),s("Col",{attrs:{span:"5"}},[s("span",[t._v("参考时长:"+t._s(t.programData.hghtTmeff)+t._s(t.programData.tmeffUnitTranslate))])]),s("Col",{attrs:{span:"4"}},[s("span",[t._v("结算固定汇率:"+t._s(t.programData.exrt))])]),s("Col",{attrs:{span:"5"}},[s("span",[t._v("方案截至时间:"+t._s(t.programData.endOfTime))])]),s("Col",{attrs:{span:"5"}},[s("span",[t._v("方案截止前提醒时间:"+t._s(t.programData.remindTime)+"天")])])],1)],1),s("template",{slot:"service"},[s("Row",t._l(t.schemeProxyList,(function(e,a){return s("Col",{key:a,attrs:{span:"6"}},[s("span",[t._v(t._s(e.sceneName))]),s("span",[t._v("费用：")]),s("span",[t._v(t._s(e.fee))]),s("span",[t._v(t._s(e.currTranslate))])])})),1)],1)],2),s("p",{staticClass:"title"},[t._v("产品服务信息")]),s("Card",[s("adt-tab-btns",{attrs:{height:40,width:200,isUnderline:!0,isMark:t.isMark,titleNames:t.titleNames,btnIndex:t.changeIndex},on:{handleBtn:t.handleBtn}},[s("Divider")],1),s("Button",{staticClass:"step-save",on:{click:t.saveServiceProvider}},[t._v("保存")]),s("div",{staticClass:"collapse"},[s("Collapse",{attrs:{accordion:""},on:{"on-change":t.changeFont},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.programData[t.tabNames[t.changeIndex-1]],(function(e,a){return s("Panel",{key:a,attrs:{name:String(a)}},[1==t.changeIndex?s("div",{staticClass:"collapse-head"},[s("span",[t._v(t._s(e.departurePortTranslate))]),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{fill:"#02ADB5","xlink:href":"#icon-andaotongcaidanICON_jiantou"}})]),s("span",[t._v(t._s(e.destinationPortTranslate))]),s("span",[t._v(t._s(t.changeText))])]):t._e(),2==t.changeIndex?s("div",{staticClass:"collapse-head"},[s("span",[t._v(t._s(e.sttnCodeTranslate))]),s("span",[t._v(t._s(t.changeText))])]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.supplierList,expression:"serverTransportList.supplierList"}],attrs:{slot:"content"},slot:"content"},[s("Row",[s("Col",{staticClass:"service-provider",attrs:{span:"8"}},[s("div",{staticClass:"service-provider-title"},[s("span",{staticClass:"service-provider-merchant"},[t._v("选择服务商")])]),s("div",{staticClass:"service-provider-company"},t._l(e.supplierList,(function(n,i){return s("RadioGroup",{key:i,model:{value:e.checkGroup,callback:function(s){t.$set(e,"checkGroup",s)},expression:"serverTransportList.checkGroup"}},[s("div",{on:{click:function(s){return t.selectCompany(a,i,e)}}},[s("Radio",{class:{"service-select-click":t.num==i},attrs:{id:"test",label:n.serverCode}},[s("p",{staticClass:"service-select"},[s("span",[t._v(t._s(n.enterpriseName))]),s("span",{staticClass:"price"},[t._v("基础价格:"+t._s(n.priceTotal)+t._s(n.currTranslate))]),s("span",{staticClass:"time"},[t._v("时长: "+t._s(n.totalTime)+t._s(n.totalTimeUnitTranslate))])]),s("div",{class:{triangle:t.num==i},staticStyle:{position:"absolute"}}),s("p")])],1)])})),1)]),t.isShow?s("Col",{staticClass:"product",attrs:{span:"16"}},[s("div",{staticClass:"product-title"},[t._v("产品编号: "+t._s(t.serverCode))]),s("adt-tab-btns",{attrs:{isSmallBtn:!0,titleNames:t.titleNamesScenes,btnIndex:t.changeIndexScenes},on:{handleBtn:t.handleBtnScenes}}),s("hr",{staticStyle:{"border-style":"dashed",margin:"10px 0",color:"#E5E5E5"},attrs:{size:"1"}}),s("adt-tab-btns",{staticStyle:{"justify-content":"flex-start"},attrs:{isBaseBtn:!0,titleNames:t.titleNamesTask,btnIndex:t.changeIndexTask,width:200,height:30},on:{handleBtn:t.handleBtnTask}}),t._l(t.sceneList,(function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.changeIndexScenes-1==a,expression:"changeIndexScenes - 1 == id"}],key:a},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.changeIndexTask,expression:"changeIndexTask == 1"}]},[s("AdtTaskContent",{staticClass:"spacing",attrs:{basicTask:t.basicTask,additionalTasks:t.additionalTasks,basicTaskData:t.basicTaskData}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.changeIndexTask,expression:"changeIndexTask == 2"}]},[s("p",{staticClass:"spacing"},[t._v("监控:")]),s("div",{staticClass:"monitor"},[s("div",{staticClass:"monitor-abnormal"},[s("Row",[s("Col",{attrs:{span:"4"}},[t._v("异常1")]),s("Col",{attrs:{span:"6"}},[t._v("异常通知方式：{{}}")]),s("Col",{attrs:{span:"14"}},[t._v("异常通知内容：{{}}")])],1)],1),s("div",{staticClass:"monitor-notice"},[s("p",[s("span",[t._v("异常通知企业：")]),s("span",{staticClass:"monitor-notice-people",on:{click:t.addExceptionNotifier}},[t._v(" 添加异常通知人 ")])]),s("Row",{staticClass:"monitor-company"},[s("CheckboxGroup",{model:{value:t.notifyCompany,callback:function(e){t.notifyCompany=e},expression:"notifyCompany"}},[s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务1"}},[t._v("安道通1")])],1),s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务2"}},[t._v("安道通2")])],1),s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务3"}},[t._v("安道通3")])],1)],1)],1)],1)]),s("div",{staticClass:"monitor"},[s("div",{staticClass:"monitor-abnormal"},[s("Row",[s("Col",{attrs:{span:"4"}},[t._v("异常1")]),s("Col",{attrs:{span:"6"}},[t._v("异常通知方式：{{}}")]),s("Col",{attrs:{span:"14"}},[t._v("异常通知内容：{{}}")])],1)],1),s("div",{staticClass:"monitor-notice"},[s("p",[s("span",[t._v("异常通知企业：")]),s("span",{staticClass:"monitor-notice-people"},[t._v("添加异常通知人")])]),s("Row",{staticClass:"monitor-company"},[s("CheckboxGroup",{model:{value:t.notifyCompany,callback:function(e){t.notifyCompany=e},expression:"notifyCompany"}},[s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务1"}},[t._v("安道通1")])],1),s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务2"}},[t._v("安道通2")])],1),s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务3"}},[t._v("安道通3")])],1)],1)],1)],1)])]),3==t.changeIndexTask?s("div",[s("div",[s("p",{staticClass:"spacing"},[t._v("协同协作1:")]),s("div",{staticClass:"cooperation"},[s("div",{staticClass:"cooperation-notice"},[s("p",[s("span",[t._v("协同协作方：")]),s("span",{staticClass:"cooperation-notice-people",on:{click:t.addCollaborators}},[t._v("添加协同协作方")])]),s("Row",{staticClass:"cooperation-company"},[s("CheckboxGroup",{model:{value:t.notifyCompany,callback:function(e){t.notifyCompany=e},expression:"notifyCompany"}},[s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务1"}},[t._v("安道通1")])],1),s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务2"}},[t._v("安道通2")])],1),s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务3"}},[t._v("安道通3")])],1)],1)],1)],1),s("Row",{staticClass:"cooperation-description"},[s("Col",{attrs:{span:"8"}},[t._v("协同协作方式："+t._s(1122))]),s("Col",{attrs:{span:"16"}},[t._v("协同协作内容："+t._s(3344))])],1)],1)]),s("div",[s("p",{staticClass:"spacing"},[t._v("协同协作2:")]),s("div",{staticClass:"cooperation"},[s("div",{staticClass:"cooperation-notice"},[s("p",[s("span",[t._v("协同协作方：")]),s("span",{staticClass:"cooperation-notice-people"},[t._v("添加协同协作方")])]),s("Row",{staticClass:"cooperation-company"},[s("CheckboxGroup",{model:{value:t.notifyCompany,callback:function(e){t.notifyCompany=e},expression:"notifyCompany"}},[s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务1"}},[t._v("安道通1")])],1),s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务2"}},[t._v("安道通2")])],1),s("Col",{staticClass:"service-proxy",attrs:{span:"4"}},[s("Checkbox",{attrs:{label:"代理服务3"}},[t._v("安道通3")])],1)],1)],1)],1),s("Row",{staticClass:"cooperation-description"},[s("Col",{attrs:{span:"8"}},[t._v("协同协作方式："+t._s(1122))]),s("Col",{attrs:{span:"16"}},[t._v("协同协作内容："+t._s(3344))])],1)],1)])]):t._e()])}))],2):t._e()],1)],1)])})),1)],1),s("AdtMyModal",{attrs:{title:t.modelTitle,showModal:t.isModalShow,okText:"确认",cancelText:"取消"},on:{"on-visible-change":t.isModelShow,"on-ok":function(e){return t.save()},"on-cancel":function(e){return t.cancel()}}},[s("Form",{ref:"formInline",staticClass:"form",attrs:{model:t.formItem,rules:t.ruleItem,"label-width":100,inline:"","label-colon":""}},[s("FormItem",{attrs:{prop:"companyName",label:"企业名称"}},[s("Input",{attrs:{type:"text"},model:{value:t.formItem.companyName,callback:function(e){t.$set(t.formItem,"companyName",e)},expression:"formItem.companyName"}})],1),s("FormItem",{attrs:{label:"数据对接方式"}},[t._v("邮箱")]),s("FormItem",{attrs:{prop:"emailAddress",label:"邮箱地址"}},[s("Input",{attrs:{type:"text"},model:{value:t.formItem.emailAddress,callback:function(e){t.$set(t.formItem,"emailAddress",e)},expression:"formItem.emailAddress"}})],1)],1)],1)],1)],1)},n=[],i=(s("4160"),s("a434"),s("a9e3"),s("159b"),s("ade3")),r=s("5530"),o=s("3fec"),c=s("c161"),l=s("b962"),d=s("2f2c"),p={components:{AdtTaskContent:o["a"],AdtSchemeInformationRoute:c["a"]},props:{executoryEntrustCode:"",freightReqCode:"",logisticsSchemeCode:"",routeList:""},data:function(){return{tabNames:["serverTransportList","serverStationList","serverCustomsList","serverBondList"],isShow:!1,value:[],listData:{},programData:{},schemeProxyList:[],changeText:"展开",agencyService:[],exchangeRate:"",selectTime:"",checkAllGroup:Number(),customs:"",changeIndex:1,isMark:!1,showServiceProvider:[],sceneList:[],num:"默认值",titleNames:["运输服务","场所服务"],titleNamesScenes:["场景1","场景2","场景3"],changeIndexScenes:1,titleNamesTask:["任务","监控设置","协同协作设置"],changeIndexTask:1,indeterminate:!0,checkAll:!1,logistics:[],basicTask:[],additionalTasks:[],notifyCompany:[],distinguish:0,modelTitle:"",isModalShow:!1,formInline:{},formItem:{},ruleItem:{companyName:[l["a"].required("企业名称")[0]],emailAddress:[l["a"].required("邮箱地址")[0]]},serverCode:"",schemeServerList:[],routeDataList:[]}},mounted:function(){this.getRouteData()},methods:{getRouteData:function(){var t=this,e=[];this.routeDataList=JSON.parse(this.routeList)||[],this.routeDataList.forEach((function(t){e.push({departurePort:t.departurePort,destinationPort:t.destinationPort,roadCode:t.roadCode})}));var s={freightReqCode:this.freightReqCode,logisticsSchemeCode:this.logisticsSchemeCode,routeCode:this.routeDataList[0].routeCode,routeList:e};Object(d["d"])({data:s}).then((function(e){200==e.code&&(t.listData=e.data||{},t.logistics=t.listData.routeLists||[],t.getData())}))},getData:function(){var t=this,e={freightReqCode:this.listData.freightReqCode,logisticsSchemeCode:this.listData.logisticsSchemeCode,routeCode:this.listData.routeCode,stepId:""};Object(d["e"])({data:e}).then((function(e){if(200==e.code){t.getDetailsData=e.data;var s=e.data.schemeProxyList||[],a=[];s.forEach((function(t){"true"==t.checked&&a.push(t)})),t.schemeProxyList=a,t.combinedData(t.getDetailsData)}}))},combinedData:function(t){t.serverTransportList=t.serverTransportList||[],t.serverStationList=t.serverStationList||[],t.serverCustomsList=t.serverCustomsList||[],t.serverBondList=t.serverBondList||[];var e=[],s=[],a=[],n=[];this.extractServer(t.serverTransportList,e,"departurePortTranslate","destinationPortTranslate"),this.extractServer(t.serverStationList,s,"sttnCodeTranslate"),this.extractServer(t.serverCustomsList,a,"customsCode"),this.extractServer(t.serverBondList,n,"seboCode"),this.listData.serverTransportList=JSON.parse(JSON.stringify(e)),this.listData.serverStationList=JSON.parse(JSON.stringify(s)),this.listData.serverCustomsList=JSON.parse(JSON.stringify(a)),this.listData.serverBondList=JSON.parse(JSON.stringify(n)),this.addSupplier("serverTransportList",t),this.addSupplier("serverStationList",t),this.addSupplier("serverCustomsList",t),this.addSupplier("serverBondList",t),this.programData=Object(r["a"])({},this.listData)},extractServer:function(t,e,s,a){t.forEach((function(t){var n;e.push((n={},Object(i["a"])(n,s,t[0][s]),Object(i["a"])(n,a,t[0][a]),n));for(var r=0;r<t.length;r++)"false"==t[r].checked&&t.splice(r--,1)}))},addSupplier:function(t,e){this.listData[t].forEach((function(s,a){s.supplierList=e[t][a],s.checkGroup=""}))},handleBtn:function(t){this.changeIndex=t+1,this.value=[],this.changeText="展开"},handleBtnScenes:function(t){this.changeIndexScenes=t+1,this.scenesDataHandle(this.sceneList)},handleBtnTask:function(t){this.changeIndexTask=t+1},selectCompany:function(t,e,s){var a=this;if("INPUT"===event.target.nodeName){var n=s.supplierList[e];this.num=e,this.serverCode=n.serverCode,1==this.changeIndex&&n&&(this.isMark=!0);var i={serverCode:n.serverCode,serviceType:n.serviceType};Object(d["c"])({data:i}).then((function(s){200==s.code&&s.data.length?(a.isShow=!0,a.sceneList=s.data||[],a.sceneList.forEach((function(t){t.taskReq=t.taskRes,delete t.taskRes})),a.scenesDataHandle(a.sceneList),1==a.changeIndex&&(a.programData.serverTransportList[t].supplierList[e].sceneList=a.sceneList),2==a.changeIndex&&(a.programData.serverStationList[t].supplierList[e].sceneList=a.sceneList),3==a.changeIndex&&(a.programData.serverCustomsList[t].supplierList[e].sceneList=a.sceneList),4==a.changeIndex&&(a.programData.serverBondList[t].supplierList[e].sceneList=a.sceneList)):a.isShow=!1}))}},scenesDataHandle:function(t){var e=[],s=t[Number(this.changeIndexScenes)-1]||{};t.forEach((function(t,s){e.push(t.sceneName)})),this.titleNamesScenes=e,this.basicTaskData={serverDuration:s.serverDuration,serverDurationUnit:s.serverDurationUnit,taskCost:s.taskCost,currTranslate:s.currTranslate},this.basicTask=s.taskReq.taskBaseList||[],this.additionalTasks=s.taskReq.taskAffixList||[]},saveServiceProvider:function(){var t=this,e=[];this.programData.serverTransportList.forEach((function(t){t.supplierList&&t.supplierList.forEach((function(s){s.serverCode==t.checkGroup&&(s.checked="true",e.push(s))}))}));var s=[];this.programData.serverStationList.forEach((function(t){t.supplierList&&t.supplierList.forEach((function(e){e.serverCode==t.checkGroup&&(e.checked="true",s.push(e))}))}));var a=[];this.programData.serverCustomsList.forEach((function(t){t.supplierList&&t.supplierList.forEach((function(e){e.serverCode==t.checkGroup&&(e.checked="true",a.push(e))}))}));var n=[];this.programData.serverBondList.forEach((function(t){t.supplierList&&t.supplierList.forEach((function(e){e.serverCode==t.checkGroup&&(e.checked="true",n.push(e))}))}));var i={executoryEntrustCode:this.executoryEntrustCode,logisticsSchemeCode:this.programData.logisticsSchemeCode,freightReqCode:this.programData.freightReqCode,serverAgentList:this.schemeProxyList,serverTransportList:e,serverStationList:s,serverCustomsList:a,serverBondList:n};Object(d["a"])({data:i}).then((function(e){200==e.code&&(t.$Message.info("保存成功"),t.$router.push({path:"/logisstics-commission/one-logistics/1"}))}))},changeFont:function(t){1==this.isShow&&(this.isShow=!1),"展开"==this.changeText?this.changeText="收起":this.changeText="展开"},isModelShow:function(t){this.isModalShow=t},addExceptionNotifier:function(){this.isModalShow=!0,this.modelTitle="新增异常处理人",this.distinguish=1},addCollaborators:function(){this.isModalShow=!0,this.modelTitle="新增协同协作方",this.distinguish=2},save:function(){var t=this,e={companyName:this.formItem.companyName,emailAddress:this.formItem.emailAddress};this.$refs["formInline"].validate((function(s){s&&(1==t.distinguish&&testApi({data:e}).then((function(t){t.code})),2==t.distinguish&&testApi({data:e}).then((function(t){t.code})))}))},cancel:function(){this.$refs.formInline.resetFields()}}},u=p,h=(s("6930"),s("2877")),m=Object(h["a"])(u,a,n,!1,null,"dafeb0b2",null);e["default"]=m.exports}}]);