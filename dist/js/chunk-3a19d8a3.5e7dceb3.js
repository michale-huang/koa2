(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a19d8a3"],{"24cd":function(t,e,a){"use strict";var n=a("3575"),s=a.n(n);s.a},3575:function(t,e,a){},"7e75":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("adt-search-folder",{attrs:{searchRouter:{query:t.search},isStatus:!0}},[a("template",{slot:"status"},[a("div",{staticClass:"status"},[a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"name"},[t._v("审核状态:")]),t._l(t.auditStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.examineStatus===e.dictionaryKey},on:{click:function(a){return t.auditStatusClick(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2),a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"name"},[t._v("启用状态:")]),t._l(t.enableStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.useStatus===e.dictionaryKey},on:{click:function(a){return t.enableStatusClick(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2)],1)]),a("template",{slot:"always-show"},[a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[t._v("单据编号:")]),a("Input",{attrs:{clearable:""},model:{value:t.search.billsCode,callback:function(e){t.$set(t.search,"billsCode",e)},expression:"search.billsCode"}})],1),a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[t._v("单据名称:")]),a("Input",{attrs:{clearable:""},model:{value:t.search.billsName,callback:function(e){t.$set(t.search,"billsName",e)},expression:"search.billsName"}})],1)],1)],2),a("div",{staticClass:"btns-paginator"},[a("AdtButton",[a("Button",{on:{click:function(e){return t.add()}}},[t._v(" 新增单据 "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_tianjia"}})])]),a("Button",{on:{click:function(e){return t.startUsing()}}},[t._v(" "+t._s("批量启用"+(t.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-shenqing"}})])]),a("Button",{on:{click:function(e){return t.stopUsing()}}},[t._v(" "+t._s("批量停用"+(t.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-shenqing"}})])])],1),a("adt-paginator",{staticClass:"pagination",attrs:{currentPage:~~t.page,total:~~t.total}})],1),a("AdtMyModal",{attrs:{title:t.modalTitle,showModal:t.isModalShow,okText:"保存",cancelText:"取消",width:"600"},on:{"on-visible-change":t.addVisibleChange,"on-ok":function(e){return t.save()},"on-cancel":function(e){return t.cancel()}}},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleInline}},[a("FormItem",{attrs:{label:"单据名称",prop:"billsName","label-width":80}},[a("Input",{staticStyle:{width:"160px"},model:{value:t.formItem.billsName,callback:function(e){t.$set(t.formItem,"billsName",e)},expression:"formItem.billsName"}})],1),a("Divider"),a("div",{staticClass:"font-title"},[t._v("选择数据项")]),a("Table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:t.dataItemColumns,data:t.dataItem,"max-height":"300",stripe:""},on:{"on-selection-change":t.checkDataItem}}),a("FormItem",{attrs:{label:"备注信息",prop:"remark","label-width":70}},[a("Input",{attrs:{type:"textarea"},model:{value:t.formItem.remark,callback:function(e){t.$set(t.formItem,"remark",e)},expression:"formItem.remark"}})],1)],1)],1),a("div",{staticClass:"public-table-data"},[a("Table",{attrs:{columns:t.tableColumns,data:t.tableData,stripe:""},on:{"on-selection-change":t.selectionChange},scopedSlots:t._u([{key:"examineStatus",fn:function(e){var n=e.row;return[a("span",{class:{success:"pass"===n.examineStatus,error:"fail"===n.examineStatus}},[t._v(" "+t._s(n.examineStatusTranslate)+" ")])]}},{key:"useStatus",fn:function(e){var n=e.row;return[a("span",{class:{success:"enable"===n.useStatus,error:"disable"===n.useStatus}},[t._v(" "+t._s(n.useStatusTranslate)+" ")])]}},{key:"action",fn:function(e){var n=e.row;return[n.useStatus&&"disable"!==n.useStatus||"wait"===n.examineStatus?t._e():a("span",{staticClass:"icon-action icon-action-word",attrs:{title:"启用"},on:{click:function(e){return t.startUsing(n)}}},[t._v("启")]),n.useStatus&&"enable"===n.useStatus&&"wait"!==n.examineStatus?a("span",{staticClass:"icon-action icon-action-word",attrs:{title:"停用"},on:{click:function(e){return t.stopUsing(n)}}},[t._v("停")]):t._e(),a("span",{attrs:{title:"审核"}},[t.isManager&&"wait"===n.examineStatus?a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.examine(n,"billsCode","useStatus","version")}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_shenhe"}})]):t._e()]),a("span",{attrs:{title:"删除"}},[t.isManager&&"enable"!==n.useStatus?a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.remove(n)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_caozuo-shanchu"}})]):t._e()]),a("span",{attrs:{title:"详情"}},[a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.detail(n)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_caozuo-xiangqing"}})])])]}}])})],1),a("adt-my-modal",{attrs:{title:t.examineModalTitle,showModal:t.isExamineModalShow,width:"600"},on:{"on-visible-change":t.examineVisibleChange,"on-ok":function(e){return t.saveAudit()}}},[a("RadioGroup",{staticStyle:{"margin-bottom":"20px"},model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[a("Radio",{attrs:{label:"1"}},[t._v("同意"+t._s(1===t.examineType?"启用":"停用"))]),a("Radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"0"}},[t._v(" 不同意"+t._s(1===t.examineType?"启用":"停用")+" ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===t.agree,expression:"agree === '0'"}]},[a("div",{staticClass:"reason-name",staticStyle:{"margin-bottom":"6px"}},[t._v("填写驳回原因:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:t.reason,callback:function(e){t.reason="string"===typeof e?e.trim():e},expression:"reason"}})],1)],1),a("adt-reconfirm-modal",{attrs:{showModal:t.isActionDel},on:{"on-visible-change":t.visibleChange,"on-ok":function(e){return t.allDelClick()}}})],1)},s=[],i=(a("4160"),a("b0c0"),a("ac1f"),a("841c"),a("159b"),a("5530")),o=a("781c"),l=a("b962"),c=a("90fe"),r=a("cba4"),u=a("ea32"),d={mixins:[o["a"]],props:{examineStatus:"",useStatus:"",billsCode:"",billsName:""},data:function(){return{userType:"",modelTitle:"",formItem:{billsName:"",remark:""},ruleInline:{billsName:[l["a"].required("单据名称")[0]]},dataItem:[],dataItemColumns:r["b"],search:{examineStatus:this.examineStatus,useStatus:this.useStatus,billsCode:this.billsCode,billsName:this.billsName},tableColumns:r["c"],tableData:[],list:[],name:"单据",selectedItemData:[],deleteList:[],deleteData:{}}},methods:{getData:function(){var t=this,e={examineStatus:this.search.examineStatus,useStatus:this.search.useStatus,billsCode:this.search.billsCode,billsName:this.search.billsName,page:this.page};Object(u["k"])({data:e}).then((function(e){200==e.code&&(t.tableData=e.data.content||[],t.total=e.data.totalElements,t.tableData.forEach((function(t){t.createDatetime=Object(c["a"])(t.createDatetime),t.examineDatetime=Object(c["a"])(t.examineDatetime)})))}))},startUsing:function(t){var e=this,a=this.handleRequestData(t,"billsCode","examineStatus","useStatus","version");a.length&&Object(u["d"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},stopUsing:function(t){var e=this,a=this.handleRequestData(t,"billsCode","examineStatus","useStatus","version");a.length&&Object(u["c"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},audit:function(t){this.isExamineModalShow=!0},edit:function(t){this.isModalShow=!0,this.modelTitle="编辑单据",this.billsCode=t.billsCode;var e={serverType:t.serverType,trspType:t.trspType,logisticsType:t.logisticsType};this.getTypeData(e)},remove:function(t){this.isActionDel=!0,this.deleteData={billsCode:t.billsCode,version:t.version}},allDelClick:function(){var t=this;Object(u["b"])({data:this.deleteData}).then((function(e){t.$Message.info("删除成功"),t.isActionDel=!1,t.getData()}))},checkDataItem:function(t){this.selectedItemData=t},add:function(){this.isModalShow=!0,this.modalTitle="新增".concat(this.name),this.isAdd=!0,this.getListData()},getListData:function(){var t=this;Object(u["i"])().then((function(e){t.dataItem=e.data}))},save:function(){var t=this,e=this;function a(){e.$Message.info("保存成功"),e.$refs.formItem.resetFields(),e.selectedItemData=[],e.isModalShow=!1,e.getData()}this.$refs.formItem.validate((function(e){if(e){var n=Object(i["a"])({},t.formItem);n.dataExams=t.selectedItemData,t.isAdd?Object(u["a"])({data:n}).then((function(t){a()})):apiUpdate({data:n}).then((function(t){a()}))}}))},saveAudit:function(){var t=this,e=Object(i["a"])({},this.examineInfo);if(1===this.examineType)if("1"===this.agree)Object(u["h"])({data:e}).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");e.examineRsn=this.reason,Object(u["g"])({data:e}).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.getData()}))}else if("1"===this.agree)Object(u["f"])({data:e}).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");e.examineRsn=this.reason,Object(u["e"])({data:e}).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.reason="",t.getData()}))}},cancel:function(){},detail:function(t){var e=t.billsCode;this.$router.push({path:"/standard-mapper/document-manage/detail",query:{billsCode:e}})},auditStatusClick:function(t){this.search.examineStatus===t?this.search.examineStatus="":this.search.examineStatus=t},enableStatusClick:function(t){this.search.useStatus===t?this.search.useStatus="":this.search.useStatus=t}}},m=d,h=(a("24cd"),a("2877")),f=Object(h["a"])(m,n,s,!1,null,"4b42e082",null);e["default"]=f.exports},cba4:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var n=[{title:"选择",align:"center",type:"selection",width:80},{title:"单据编号",align:"center",key:"billsCode"},{title:"单据名称",align:"center",key:"billsName"},{title:"创建人",align:"center",key:"createByTranslate"},{title:"创建时间",align:"center",key:"createDatetime"},{title:"审核时间",align:"center",key:"examineDatetime"},{title:"审核状态",align:"center",slot:"examineStatus"},{title:"启用状态",align:"center",slot:"useStatus"},{title:"操作",align:"center",key:"operating",slot:"action"}],s=[{title:"序号",align:"center",type:"index",width:80},{title:"数据项名称",align:"center",key:"label"}],i=[{title:"选择",align:"center",type:"selection",width:80},{title:"数据项名称",align:"center",key:"label"}]},ea32:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"i",(function(){return o})),a.d(e,"k",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return r})),a.d(e,"h",(function(){return u})),a.d(e,"g",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"e",(function(){return h})),a.d(e,"b",(function(){return f})),a.d(e,"j",(function(){return b}));var n=a("2934"),s=a("4ec3"),i=function(t){return Object(n["c"])("".concat(s["h"],"/bills/add"),t)},o=function(t){return Object(n["c"])("".concat(s["h"],"/bills/template-data"),t)},l=function(t){return Object(n["c"])("".concat(s["h"],"/bills/query-list"),t)},c=function(t){return Object(n["c"])("".concat(s["h"],"/bills/enable"),t)},r=function(t){return Object(n["c"])("".concat(s["h"],"/bills/disable"),t)},u=function(t){return Object(n["c"])("".concat(s["h"],"/bills/enable-exam-pass"),t)},d=function(t){return Object(n["c"])("".concat(s["h"],"/bills/enable-exam-fail"),t)},m=function(t){return Object(n["c"])("".concat(s["h"],"/bills/disable-exam-pass"),t)},h=function(t){return Object(n["c"])("".concat(s["h"],"/bills/disable-exam-fail"),t)},f=function(t){return Object(n["c"])("".concat(s["h"],"/bills/del"),t)},b=function(t){return Object(n["a"])("".concat(s["h"],"/bills/query-detail"),t)}}}]);