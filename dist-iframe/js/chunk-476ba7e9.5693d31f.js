(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-476ba7e9"],{"28f5":function(t,e,a){"use strict";var s=a("ffa8"),n=a.n(s);n.a},"38fc":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-source-manage"},[a("adt-search-folder",{attrs:{searchRouter:{query:{sourceCode:t.search.sourceCode,sourceName:t.search.sourceName,db:t.search.db,examineStatus:t.search.examineStatus,useStatus:t.search.useStatus}},isStatus:!0}},[a("template",{slot:"status"},[a("div",{staticClass:"status"},[a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"name"},[t._v("审核状态:")]),t._l(t.auditStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.examineStatus===e.dictionaryKey},on:{click:function(a){return t.chooseExamineStatus(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2),a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"name"},[t._v("启用状态:")]),t._l(t.enableStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.useStatus===e.dictionaryKey},on:{click:function(a){return t.chooseUseStatus(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2)],1)]),a("template",{slot:"always-show"},[a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[t._v("异常编号:")]),a("Input",{attrs:{clearable:""},model:{value:t.search.sourceCode,callback:function(e){t.$set(t.search,"sourceCode",e)},expression:"search.sourceCode"}})],1),a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[t._v("异常名称:")]),a("Input",{attrs:{clearable:""},model:{value:t.search.sourceName,callback:function(e){t.$set(t.search,"sourceName",e)},expression:"search.sourceName"}})],1)],1)],2),a("div",{staticClass:"content"},[a("div",{staticClass:"btns-paginator"},[a("adt-button",[a("Button",{on:{click:function(e){return t.add()}}},[t._v(" 新增异常 "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_tianjia"}})])]),a("Button",{on:{click:function(e){return t.startUsing()}}},[t._v(" "+t._s("批量启用"+(t.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-shenqing"}})])]),a("Button",{on:{click:function(e){return t.stopUsing()}}},[t._v(" "+t._s("批量停用"+(t.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-shenqing"}})])])],1),a("adt-paginator",{attrs:{currentPage:~~t.page,total:~~t.total}})],1),a("div",{staticClass:"public-table-data"},[a("Table",{attrs:{columns:t.columns,data:t.tableData,stripe:""},on:{"on-selection-change":t.selectionChange},scopedSlots:t._u([{key:"createDatetime",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.timestampFormat(a.createDatetime))+" ")]}},{key:"examineStatus",fn:function(e){var s=e.row;return[a("span",{class:{success:"pass"===s.examineStatus,error:"fail"===s.examineStatus}},[t._v(" "+t._s(s.examineStatusTranslate)+" ")])]}},{key:"useStatus",fn:function(e){var s=e.row;return[a("span",{class:{success:"enable"===s.useStatus,error:"disable"===s.useStatus}},[t._v(" "+t._s(s.useStatusTranslate)+" ")])]}},{key:"action",fn:function(e){var s=e.row;return[s.useStatus&&"disable"!==s.useStatus||"wait"===s.examineStatus?t._e():a("span",{staticClass:"icon-action icon-action-word",attrs:{title:"启用"},on:{click:function(e){return t.startUsing.apply(void 0,[t.apiEnable,s].concat(t.startAndStopData))}}},[t._v("启")]),s.useStatus&&"enable"===s.useStatus&&"wait"!==s.examineStatus?a("span",{staticClass:"icon-action icon-action-word",attrs:{title:"停用"},on:{click:function(e){return t.stopUsing.apply(void 0,[t.apiDisable,s].concat(t.startAndStopData))}}},[t._v("停")]):t._e(),a("span",{attrs:{title:"审核"}},[t.isManager&&"wait"===s.examineStatus?a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.examine(s,"taskCode","version")}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_shenhe"}})]):t._e()]),t.isManager&&"enable"!==s.useStatus?a("span",{attrs:{title:"删除"}},[a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.remove(s,"taskCode")}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_caozuo-shanchu"}})])]):t._e(),a("span",{attrs:{title:"详情"}},[a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.detail(s)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_caozuo-xiangqing"}})])])]}}])})],1)]),a("adt-my-modal",{attrs:{okText:"保存",width:"1500",title:t.modalTitle,showModal:t.isModalShow},on:{"on-visible-change":t.addVisibleChange,"on-ok":function(e){return t.save()},"on-cancel":function(e){return t.cancel()}}},[a("Form",{ref:"formItemData",staticClass:"two-column",attrs:{"label-position":"left",model:t.formItem,rules:t.formItemRule,inline:"","label-colon":""}},[a("FormItem",{attrs:{label:"异常名称",prop:"sourceType","label-width":82}},[a("Input",{attrs:{maxlength:"10",clearable:""},model:{value:t.formItem.sourceType,callback:function(e){t.$set(t.formItem,"sourceType",e)},expression:"formItem.sourceType"}})],1),a("FormItem",{attrs:{label:"适用场景",prop:"bm","label-width":120}},[a("Select",{attrs:{clearable:""},model:{value:t.formItem.bm,callback:function(e){t.$set(t.formItem,"bm",e)},expression:"formItem.bm"}},t._l(t.itemType,(function(e){return a("Option",{key:e.dictionaryKey,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1),a("FormItem",{attrs:{label:"异常处理方式",prop:"xx","label-width":150}},[a("Select",{attrs:{clearable:""},model:{value:t.formItem.xx,callback:function(e){t.$set(t.formItem,"xx",e)},expression:"formItem.xx"}},t._l(t.itemType,(function(e){return a("Option",{key:e.dictionaryKey,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1),a("div",{staticClass:"compare-data"},[a("title",[t._v("异常比对数据：")]),a("div",{staticClass:"data-container"},[a("div",{staticClass:"data"},[a("div",{staticClass:"data-item"},[a("FormItem",{attrs:{label:"异常数据源",prop:"dataSource","label-width":105}},[a("Select",{attrs:{clearable:""},model:{value:t.formItem.dataSource,callback:function(e){t.$set(t.formItem,"dataSource",e)},expression:"formItem.dataSource"}},t._l(t.itemType,(function(e){return a("Option",{key:e.dictionaryKey,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)],1),a("div",{staticClass:"data-item"},[a("FormItem",{attrs:{label:"数据显示名称",prop:"displayName","label-width":130}},[a("Select",{attrs:{clearable:""},model:{value:t.formItem.displayName,callback:function(e){t.$set(t.formItem,"displayName",e)},expression:"formItem.displayName"}},t._l(t.itemType,(function(e){return a("Option",{key:e.dictionaryKey,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)],1)]),a("div",{staticClass:"condition"},[a("FormItem",{attrs:{label:"异常比对条件",prop:"condition","label-width":120}},[a("Select",{attrs:{clearable:""},model:{value:t.formItem.condition,callback:function(e){t.$set(t.formItem,"condition",e)},expression:"formItem.condition"}},t._l(t.itemType,(function(e){return a("Option",{key:e.dictionaryKey,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)],1),a("div",{staticClass:"data"},[a("div",{staticClass:"data-item"},[a("FormItem",{attrs:{label:"异常数据源",prop:"dataSource","label-width":105}},[a("Select",{attrs:{clearable:""},model:{value:t.formItem.dataSource,callback:function(e){t.$set(t.formItem,"dataSource",e)},expression:"formItem.dataSource"}},t._l(t.itemType,(function(e){return a("Option",{key:e.dictionaryKey,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)],1),a("div",{staticClass:"data-item"},[a("FormItem",{attrs:{label:"数据显示名称",prop:"displayName","label-width":130}},[a("Select",{attrs:{clearable:""},model:{value:t.formItem.displayName,callback:function(e){t.$set(t.formItem,"displayName",e)},expression:"formItem.displayName"}},t._l(t.itemType,(function(e){return a("Option",{key:e.dictionaryKey,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)],1)])])]),a("div",{staticClass:"contact-scene"},[a("title",[a("span",{staticClass:"required-tag"},[t._v("*")]),t._v("异常处理关联场景：")]),a("div",{staticClass:"scenes"},[a("FormItem",{attrs:{prop:"chosenScenes"}},[a("CheckboxGroup",{staticClass:"checkobox-group",model:{value:t.formItem.chosenScenes,callback:function(e){t.$set(t.formItem,"chosenScenes",e)},expression:"formItem.chosenScenes"}},t._l(t.scenes,(function(e,s){return a("div",{key:s,staticClass:"checkbox-items"},[a("Checkbox",{attrs:{label:e}},[t._v(t._s(""))]),a("div",{staticClass:"scene-name",on:{click:function(e){return t.handleClickScene(s)}}},[t._v(t._s(e))])],1)})),0)],1)],1)]),a("div",{staticClass:"form-item notice-content"},[a("div",{staticClass:"name"},[t._v("通知内容:")]),a("Input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:t.formItem.noticeContent,callback:function(e){t.$set(t.formItem,"noticeContent","string"===typeof e?e.trim():e)},expression:"formItem.noticeContent"}})],1)],1),a("div",{staticClass:"form-item"},[a("div",{staticClass:"name"},[t._v("备注信息:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:t.formItem.note,callback:function(e){t.$set(t.formItem,"note","string"===typeof e?e.trim():e)},expression:"formItem.note"}})],1)],1),a("adt-my-modal",{attrs:{width:"600",title:t.examineModalTitle,showModal:t.isExamineModalShow},on:{"on-visible-change":t.examineVisibleChange,"on-ok":function(e){return t.examineSave()}}},[a("RadioGroup",{staticStyle:{"margin-bottom":"20px"},model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[a("Radio",{attrs:{label:"1"}},[t._v("同意"+t._s(1===t.examineType?"启用":"停用"))]),a("Radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"0"}},[t._v("不同意"+t._s(1===t.examineType?"启用":"停用"))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===t.agree,expression:"agree === '0'"}]},[a("div",{staticClass:"reason-name",staticStyle:{"margin-bottom":"6px"}},[t._v("填写驳回原因:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:t.reason,callback:function(e){t.reason="string"===typeof e?e.trim():e},expression:"reason"}})],1)],1),a("adt-my-modal",{attrs:{showModal:t.isActionDel,title:"系统提示"},on:{"on-visible-change":t.visibleChange,"on-ok":function(e){return t.confirmDel()}}},[a("div",[a("div",{staticStyle:{"margin-bottom":"6px"}},[t._v("填写删除原因:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:t.delInfo.removeRsn,callback:function(e){t.$set(t.delInfo,"removeRsn","string"===typeof e?e.trim():e)},expression:"delInfo.removeRsn"}})],1)])],1)},n=[],i=(a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("841c"),a("5530")),o=a("2934"),r=a("4ec3"),c=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/query-list"),t)},l=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/add"),t)},u=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/enable"),t)},m=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/disable"),t)},d=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/enable-exam-pass"),t)},f=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/enable-exam-fail"),t)},h=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/disable-exam-pass"),t)},p=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/disable-exam-fail"),t)},v=function(t){return Object(o["c"])("".concat(r["h"],"/unusual/del"),t)},y=a("b962"),b=(a("90fe"),a("781c")),g=[{title:"选择",align:"center",type:"selection",width:60},{title:"异常编号",align:"center",key:"sourceCode"},{title:"异常名称",align:"center",key:"sourceName"},{title:"异常解决方案",align:"center",key:"db"},{title:"创建人",align:"center",key:"createBy"},{title:"创建时间",align:"center",slot:"createDatetime"},{title:"审核状态",align:"center",slot:"examineStatus"},{title:"审核时间",align:"center",key:"examineDatetime"},{title:"启用状态",align:"center",slot:"useStatus"},{title:"操作",align:"center",slot:"action",width:150}],x={name:"UnusualManage",mixins:[b["a"]],props:{sourceCode:"",sourceName:"",examineStatus:"",useStatus:""},data:function(){return{itemType:this.$getDictionary("ITEM_TYPE"),name:"异常",search:{sourceCode:this.sourceCode,sourceName:this.sourceName,examineStatus:this.examineStatus,useStatus:this.useStatus},tableData:[{sourceName:"name"}],columns:g,formItem:{sourceType:"",bm:"",noticeContent:"",note:"",chosenScenes:[]},formItemRule:{sourceType:[y["a"].required("异常名称")[0]],bm:[y["a"].select("适用场景")[0]],xx:[y["a"].select("异常处理方式")[0]],dataSource:[y["a"].select("异常数据源")[0]],displayName:[y["a"].select("数据显示名称")[0]],condition:[y["a"].select("异常比对条件")[0]],chosenScenes:[y["a"].minMultipleChoice("异常处理关联场景")[0]]},scenes:["场景1","场景2","场景2","场景2"],chosenScenes:[]}},methods:{getData:function(){var t=this,e=Object(i["a"])({page:this.page},this.search);c({data:e}).then((function(e){var a=e.data;t.tableData=a.content||[],t.total=a.totalElements}))},cancel:function(){this.$refs.formItemData.resetFields(),this.reset()},startUsing:function(t){var e=this,a=this.handleRequestData(t);a.length&&u({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},stopUsing:function(t){var e=this,a=this.handleRequestData(t);a.length&&m({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},edit:function(t){var e=this;this.isAdd=!1;var a={name:t.name};getQueryUnusual(a).then((function(t){e.formItem=t.data,e.formItem.maxLength=e.formItem.maxLength.toString(),e.formItem.rules=t.data.rules||[],e.isModalShow=!0,e.modalTitle="编辑异常"}))},detail:function(t){this.$router.push("/standard-mapper/unusual-manage/detail/".concat(t.name))},confirmDel:function(){var t=this;v({data:this.delInfo}).then((function(e){t.$Message.info(e.message),t.isActionDel=!1,t.getData()}))},save:function(){var t=this,e=this;function a(){e.$Message.info("保存成功"),e.$refs.formItemData.resetFields(),e.reset(),e.isModalShow=!1,e.getData()}this.$refs.formItemData.validate((function(e){if(e){var s=Object(i["a"])({},t.formItem);s.datas=t.selectedData,t.isAdd?l({data:s}).then((function(t){a()})):apiUpdateUnusual({data:s}).then((function(t){a()}))}}))},examineSave:function(){var t=this,e=Object(i["a"])({},this.examineInfo);if(1===this.examineType)if("1"===this.agree)d({data:e}).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写驳回原因！");e.message=this.reason,f({data:e}).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.getData()}))}else if("1"===this.agree)h({data:e}).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");e.message=this.reason,p({data:e}).then((function(e){t.$Message.info(e.message),t.isExamineModalShow=!1,t.getData()}))}},reset:function(){}}},S=x,I=(a("28f5"),a("2877")),_=Object(I["a"])(S,s,n,!1,null,"269a120f",null);e["default"]=_.exports},ffa8:function(t,e,a){}}]);