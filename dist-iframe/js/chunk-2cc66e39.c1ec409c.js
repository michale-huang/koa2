(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cc66e39"],{"2f2c":function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"d",(function(){return r})),s.d(t,"g",(function(){return c})),s.d(t,"h",(function(){return o})),s.d(t,"n",(function(){return l})),s.d(t,"e",(function(){return h})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return v})),s.d(t,"k",(function(){return u})),s.d(t,"o",(function(){return m})),s.d(t,"i",(function(){return p})),s.d(t,"l",(function(){return f})),s.d(t,"p",(function(){return C})),s.d(t,"j",(function(){return g})),s.d(t,"m",(function(){return k})),s.d(t,"a",(function(){return x}));var a=s("2934"),i=s("4ec3"),n=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/search/get-scheme"),e)},r=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/get-scheme"),e)},c=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/get-list-dspt"),e)},o=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/get-list-mkt"),e)},l=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/recommend-pass"),e)},h=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/get-scheme-details"),e)},d=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/get-scene-cstm"),e)},v=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/get-scene-list"),e)},u=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/recommend-check"),e)},m=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/recommend-route"),e)},p=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/recommend-all"),e)},f=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/recommend-check-cstm"),e)},C=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/recommend-route-cstm"),e)},g=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/recommend-all-cstm"),e)},k=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/recommend-modify"),e)},x=function(e){return Object(a["c"])("".concat(i["f"],"/scheme/confirm-only-scheme"),e)}},"3efc":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"program"},[s("span",{staticClass:"title"},[e._v("方案基本信息")]),s("Button",{staticClass:"program-confirm",attrs:{type:"primary"},on:{click:e.confirmPlan}},[e._v("确认方案")])],1),s("AdtSchemeInformationRoute",{attrs:{logistics:e.logistics}},[s("template",{slot:"price"},[s("Row",[s("Col",{attrs:{span:"6"}},[s("span",[e._v("价格区间："+e._s(e.listData.lwstPrice)+"-"+e._s(e.listData.hghtPrice)+e._s(e.listData.offerCurrTranslate))])]),s("Col",{attrs:{span:"6"}},[s("span",[e._v("时长区间："+e._s(e.listData.lwstTmeff)+"-"+e._s(e.listData.hghtTmeff)+e._s(e.listData.tmeffUnitTranslate))])])],1)],1),s("template",{slot:"service"},[s("div",{staticClass:"service"},[s("p",[s("span",{staticClass:"title"},[e._v("选择代理服务:")]),s("span",[e._v("（没有可选代理服务请"),s("span",{staticClass:"contact-us",on:{click:e.contactUs}},[e._v("联系我们")]),e._v("）")]),s("span",[e._v("单位（元）")])]),s("Row",e._l(e.schemeProxyList,(function(t,a){return s("Col",{key:a,staticClass:"service-proxy",attrs:{span:"6"}},[s("Checkbox",{attrs:{label:t.serverCode},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"agentList.checked"}},[s("span",[e._v(e._s(t.sceneName))]),s("span",[e._v(" 费用："),s("Input",{attrs:{type:"text"},model:{value:t.fee,callback:function(s){e.$set(t,"fee",s)},expression:"agentList.fee"}})],1),s("span",{staticClass:"service-price"},[e._v(e._s(t.currTranslate))])])],1)})),1)],1),s("Row",{staticClass:"program"},[s("Col",{attrs:{span:"10"}},[s("span",{staticClass:"title"},[e._v("结算汇率:")]),s("RadioGroup",{staticClass:"program-settlement",on:{"on-change":e.singleChoice},model:{value:e.listData.exrtMode,callback:function(t){e.$set(e.listData,"exrtMode",t)},expression:"listData.exrtMode"}},[s("Radio",{attrs:{label:"extrinsic"}},[e._v("非固有汇率")]),s("Radio",{staticClass:"program-inherent",attrs:{label:"inherent"}},[s("span",[e._v("固有汇率")]),s("Input",{attrs:{type:"text"},model:{value:e.listData.exrt,callback:function(t){e.$set(e.listData,"exrt",t)},expression:"listData.exrt"}})],1)],1)],1),s("Col",{attrs:{span:"6"}},[s("span",{staticClass:"title"},[e._v("方案有效期：")]),s("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date"},model:{value:e.listData.endOfTime,callback:function(t){e.$set(e.listData,"endOfTime",t)},expression:"listData.endOfTime"}})],1),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"title"},[e._v("方案截止前 ")]),s("Input",{staticStyle:{width:"200px"},model:{value:e.listData.remindTime,callback:function(t){e.$set(e.listData,"remindTime",t)},expression:"listData.remindTime"}}),s("span",{staticClass:"title"},[e._v(" 天提醒")])],1)],1)],1)],2),s("p",{staticClass:"title"},[e._v("产品服务信息")]),s("Card",[s("adt-tab-btns",{attrs:{height:40,width:200,isUnderline:!0,titleNames:e.titleNames,btnIndex:e.changeIndex},on:{handleBtn:e.handleBtn}},[s("Divider")],1),s("div",{staticClass:"collapse"},[s("Collapse",{attrs:{accordion:""},on:{"on-change":e.changeFont},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.programData[e.tabNames[e.changeIndex-1]],(function(t,a){return s("Panel",{key:a,attrs:{name:String(a)}},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.changeIndex,expression:"changeIndex == 1"}],staticClass:"collapse-head"},[s("span",[e._v(e._s(t.departurePortTranslate))]),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{fill:"#02ADB5","xlink:href":"#icon-andaotongcaidanICON_jiantou"}})]),s("span",[e._v(e._s(t.destinationPortTranslate))]),s("span",[e._v(e._s(e.changeText))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.changeIndex,expression:"changeIndex == 2"}],staticClass:"collapse-head"},[s("span",[e._v(e._s(t.sttnCodeTranslate))]),s("span",[e._v(e._s(e.changeText))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.serverList,expression:"serverTransportList.serverList"}],attrs:{slot:"content"},slot:"content"},[s("Row",[s("Col",{staticClass:"service-provider",attrs:{span:"8"}},[s("div",{staticClass:"service-provider-title"},[s("span",{staticClass:"service-provider-merchant"},[e._v("选择服务商")])]),s("div",{staticClass:"service-provider-company"},[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("Checkbox",{attrs:{indeterminate:t.check.indeterminate},on:{"on-change":function(s){return e.handleCheckAll(t)}},model:{value:t.check.checkAll,callback:function(s){e.$set(t.check,"checkAll",s)},expression:"serverTransportList.check.checkAll"}},[e._v("全选")])],1),s("CheckboxGroup",{model:{value:t.check.checkAllGroup,callback:function(s){e.$set(t.check,"checkAllGroup",s)},expression:"serverTransportList.check.checkAllGroup"}},e._l(t.serverList,(function(t,a){return s("div",{key:a,on:{click:function(s){return e.selectCompany(a,t)}}},[s("Checkbox",{class:{"service-select-click":e.num==a},attrs:{label:t.serverCode}},[s("p",{staticClass:"service-select"},[s("span",[e._v(e._s(t.enterpriseName))]),s("span",{staticClass:"price"},[e._v("基础价格: "+e._s(t.priceTotal)+e._s(t.currTranslate))]),s("span",{staticClass:"time"},[e._v("时长: "+e._s(t.totalTime)+e._s(t.totalTimeUnit))])]),s("div",{class:{triangle:e.num==a},staticStyle:{position:"absolute"}}),s("p")])],1)})),0)],1)]),e.isShow?s("Col",{staticClass:"product",attrs:{span:"16"}},[s("div",{staticClass:"product-title"},[e._v("产品编号: "+e._s(e.serverCode))]),s("adt-tab-btns",{attrs:{isSmallBtn:!0,titleNames:e.titleNamesScenes,btnIndex:e.changeIndexScenes},on:{handleBtn:e.handleBtnScenes}}),s("hr",{staticStyle:{"border-style":"dashed",margin:"10px 0",color:"#E5E5E5"},attrs:{size:"1"}}),s("adt-tab-btns",{staticStyle:{"justify-content":"flex-start"},attrs:{isBaseBtn:!0,titleNames:e.titleNamesTask,btnIndex:e.changeIndexTask,width:200,height:30},on:{handleBtn:e.handleBtnTask}}),e._l(e.scenesList,(function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.changeIndexScenes-1==a,expression:"changeIndexScenes - 1 == id"}],key:a},[1==e.changeIndexTask?s("div",[s("AdtTaskContent",{staticClass:"spacing",attrs:{basicTask:e.basicTask,additionalTasks:e.additionalTasks,basicTaskData:e.basicTaskData}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.changeIndexTask,expression:"changeIndexTask == 2"}]},[s("div",{staticClass:"spacing"},[e._v("监控:")]),s("div",{staticClass:"monitor"},[s("div",{staticClass:"monitor-abnormal"},[s("Row",[s("Col",{attrs:{span:"4"}},[e._v("异常1")]),s("Col",{attrs:{span:"6"}},[e._v("异常通知方式：{{}}")]),s("Col",{attrs:{span:"14"}},[e._v("异常通知内容：{{}}")])],1)],1),s("div",{staticClass:"monitor-notice"},[s("span",[e._v("异常通知企业：")])])]),s("div",{staticClass:"monitor"},[s("div",{staticClass:"monitor-abnormal"},[s("Row",[s("Col",{attrs:{span:"4"}},[e._v("异常1")]),s("Col",{attrs:{span:"6"}},[e._v("异常通知方式：{{}}")]),s("Col",{attrs:{span:"14"}},[e._v("异常通知内容：{{}}")])],1)],1),s("div",{staticClass:"monitor-notice"},[s("span",[e._v("异常通知企业：")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:3==e.changeIndexTask,expression:"changeIndexTask == 3"}]},[s("div",[s("p",{staticClass:"spacing"},[e._v("协同协作1:")]),s("div",{staticClass:"cooperation"},[s("div",{staticClass:"cooperation-notice"},[s("span",[e._v("协同协作方：")])]),s("Row",{staticClass:"cooperation-description"},[s("Col",{attrs:{span:"8"}},[e._v("协同协作方式："+e._s(1122))]),s("Col",{attrs:{span:"16"}},[e._v("协同协作内容："+e._s(3344))])],1)],1)]),s("div",[s("p",{staticClass:"spacing"},[e._v("协同协作2:")]),s("div",{staticClass:"cooperation"},[s("div",{staticClass:"cooperation-notice"},[s("span",[e._v("协同协作方：")])]),s("Row",{staticClass:"cooperation-description"},[s("Col",{attrs:{span:"8"}},[e._v("协同协作方式："+e._s(1122))]),s("Col",{attrs:{span:"16"}},[e._v("协同协作内容："+e._s(3344))])],1)],1)])])])}))],2):e._e()],1)],1)])})),1)],1)],1)],1)},i=[],n=(s("4160"),s("a9e3"),s("159b"),s("2909")),r=s("5530"),c=s("3fec"),o=s("c161"),l=(s("90fe"),s("2f2c")),h={components:{AdtTaskContent:c["a"],AdtSchemeInformationRoute:o["a"]},data:function(){return{tabNames:["serverTransportList","serverStationList","serverCustomsList","serverBondList"],isShow:!1,listData:{remindTime:"",endOfTime:"",exrtMode:""},programData:{},schemeProxyListModel:[],changeText:"展开",serviceInformation:{},synergisticList:[],checkServicePrice:[],checkServicePriceData:[],exrtMode:"",inherent:"",getDetailsData:{},showServiceProvider:[],serviceProviderList:[],selectServiceProvider:[],num:"默认值",value:"",serverAgentListModel:[],schemeProxyList:[],schemeServer:[],schemeServerList:[],schemeServerAll:[],schemeServerListAll:[],selectTime:"",changeIndex:1,titleNames:["运输服务","场所服务"],titleNamesScenes:["场景1","场景2","场景3"],changeIndexScenes:1,titleNamesTask:["任务","监控设置","协同协作设置"],changeIndexTask:1,indeterminate:!1,checkAll:!1,logistics:[],scenesList:[],basicTask:[],additionalTasks:[],transportValue:"",placeValue:"",customsValue:"",bondValue:"",serverDataList:[]}},mounted:function(){this.listData=JSON.parse(window.sessionStorage.getItem("logisticsData"))||{},this.logistics=this.listData.routeLists||[],this.getData()},methods:{getData:function(){var e=this,t={freightReqCode:this.listData.freightReqCode,logisticsSchemeCode:this.listData.logisticsSchemeCode,routeCode:this.listData.routeCode,stepId:this.listData.stepId};Object(l["e"])({data:t}).then((function(t){200==t.code&&(e.getDetailsData=t.data,e.schemeProxyList=t.data.schemeProxyList||[],e.schemeProxyList.forEach((function(e){"true"===e.checked?e.checked=!0:e.checked=!1})),e.combinedData(e.getDetailsData))}))},combinedData:function(e){e.serverTransportList=e.serverTransportList||[],e.serverStationList=e.serverStationList||[],e.serverCustomsList=e.serverCustomsList||[],e.serverBondList=e.serverBondList||[];var t=[],s=[],a=[],i=[];e.serverTransportList.forEach((function(e){t.push({departurePortTranslate:e[0].departurePortTranslate,destinationPortTranslate:e[0].destinationPortTranslate})})),e.serverStationList.forEach((function(e){s.push({sttnCodeTranslate:e[0].sttnCodeTranslate})})),e.serverCustomsList.forEach((function(e){a.push({customsCode:e[0].customsCode})})),e.serverBondList.forEach((function(e){i.push({seboCode:e[0].seboCode})})),this.listData.serverTransportList=JSON.parse(JSON.stringify(t)),this.listData.serverStationList=JSON.parse(JSON.stringify(s)),this.listData.serverCustomsList=JSON.parse(JSON.stringify(a)),this.listData.serverBondList=JSON.parse(JSON.stringify(i)),this.addCheck("serverTransportList",e),this.addCheck("serverStationList",e),this.addCheck("serverCustomsList",e),this.addCheck("serverBondList",e),this.listData.schemeProxyList=e.schemeProxyList,this.programData=Object(r["a"])({},this.listData),this.tickTwice("serverTransportList"),this.tickTwice("serverStationList"),this.tickTwice("serverCustomsList"),this.tickTwice("serverBondList")},addCheck:function(e,t){this.listData[e].forEach((function(s,a){s.serverList=t[e][a],s.check={checkAllGroup:[],checkAll:!1,indeterminate:!1}}))},tickTwice:function(e){this.programData[e].forEach((function(e){e.serverList&&e.serverList.forEach((function(t){"true"==t.checked&&e.check.checkAllGroup.push(t.serverCode)}))}))},handleBtn:function(e){this.changeIndex=e+1,this.value=[],this.changeText="展开"},handleBtnScenes:function(e){this.changeIndexScenes=e+1,this.scenesDataHandle(this.scenesList)},handleBtnTask:function(e){this.changeIndexTask=e+1},contactUs:function(){},changeFont:function(e){1==this.isShow&&(this.isShow=!1),"展开"==this.changeText?this.changeText="收起":this.changeText="展开"},singleChoice:function(e){"extrinsic"==e&&(this.listData.exrtMode="extrinsic"),"inherent"==e&&(this.listData.exrtMode="inherent")},handleCheckAll:function(e){var t=this,s=e.check,a=e.serverList;s.checkAll?(a.forEach((function(e){e.checked=!0,t.selectServiceProvider.push(e.serverCode)})),s.checkAllGroup=this.selectServiceProvider,this.schemeServerAll=e.serverList):(a.forEach((function(e){e.checked=!1})),s.checkAllGroup=[],this.selectServiceProvider=[],this.schemeServerAll=[])},checkChange:function(e){},selectCompany:function(e,t){var s=this;if("INPUT"===event.target.nodeName){this.num=e,this.serverCode=t.serverCode;var a={serverCode:t.serverCode,serviceType:t.serviceType};"false"==t.checked?t.checked="true":t.checked="false",Object(l["c"])({data:a}).then((function(e){200==e.code&&e.data.length?(s.isShow=!0,s.scenesList=e.data||[],s.scenesDataHandle(s.scenesList)):s.isShow=!1}))}},scenesDataHandle:function(e){var t=[],s=e[Number(this.changeIndexScenes)-1]||{};e.forEach((function(e,s){t.push(e.sceneName)})),this.titleNamesScenes=t,this.basicTaskData={serverDuration:s.serverDuration,serverDurationUnitTranslate:s.serverDurationUnitTranslate,taskCost:s.taskCost,currTranslate:s.currTranslate},this.basicTask=s.taskRes.taskBaseList||[],this.additionalTasks=s.taskRes.taskAffixList||[]},confirmPlan:function(){var e=this;this.serverDataList=[];var t=JSON.parse(JSON.stringify(this.programData)),s=[];t.serverTransportList.forEach((function(e,t){0!==e.check.checkAllGroup.length&&s.push(1)})),this.addService("serverTransportList"),this.addService("serverStationList"),this.addService("serverCustomsList"),this.addService("serverBondList");var a=JSON.parse(JSON.stringify(this.programData.schemeProxyList));a.forEach((function(t){t.checked=String(t.checked),t.freightReqCode=e.programData.freightReqCode,t.logisticsSchemeCode=e.programData.logisticsSchemeCode,t.fee=Number(t.fee),t.curr="CNY"}));var i={endOfTime:this.listData.endOfTime,exrt:this.listData.exrt,exrtMode:this.listData.exrtMode,freightReqCode:this.listData.freightReqCode,logisticsSchemeCode:this.listData.logisticsSchemeCode,remindTime:this.listData.remindTime,schemeProxyList:a,schemeServerList:this.schemeServerList,totalPrices:this.programData.totalPrices,schemeValidity:this.programData.schemeValidity,schemeValidityUnit:this.programData.schemeValidityUnit};s.length==t.serverTransportList.length?Object(l["m"])({data:i}).then((function(t){200==t.code&&(e.$Message.info("确定成功"),e.$router.push({path:"/logistics-solutions/customer-service-plan/1"}))})):this.$Message.info("请选择运输服务")},addService:function(e){var t=this,s=JSON.parse(JSON.stringify(this.programData));s[e].forEach((function(e){e.serverList&&e.serverList.forEach((function(e){e.logisticsSchemeCode=t.programData.logisticsSchemeCode,t.serverDataList.push(e)}))})),this.schemeServerList=Object(n["a"])(this.serverDataList)}}},d=h,v=(s("4118"),s("2877")),u=Object(v["a"])(d,a,i,!1,null,"764aec44",null);t["default"]=u.exports},4118:function(e,t,s){"use strict";var a=s("8951"),i=s.n(a);i.a},8951:function(e,t,s){}}]);