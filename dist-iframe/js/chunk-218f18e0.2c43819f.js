(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-218f18e0"],{"51c0":function(e,t,a){},7154:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"h",(function(){return o})),a.d(t,"g",(function(){return r})),a.d(t,"i",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return h}));var s=a("2934"),n=a("4ec3"),i=function(e){return Object(s["c"])("".concat(n["h"],"/message/add"),e)},o=function(e){return Object(s["c"])("".concat(n["h"],"/message/query-list"),e)},r=function(e){return Object(s["a"])("".concat(n["h"],"/message/query-info"),e)},c=function(e){return Object(s["c"])("".concat(n["h"],"/message/update"),e)},l=function(e){return Object(s["c"])("".concat(n["h"],"/message/enable"),e)},d=function(e){return Object(s["c"])("".concat(n["h"],"/message/disable"),e)},u=function(e){return Object(s["c"])("".concat(n["h"],"/message/examine"),e)},m=function(e){return Object(s["a"])("".concat(n["h"],"/message/query-detail"),e)},h=function(e){return Object(s["c"])("".concat(n["h"],"/message/delete"),e)}},"7f08":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("adt-search-folder",{attrs:{searchRouter:{query:e.search},isStatus:!0}},[a("template",{slot:"status"},[a("div",{staticClass:"status"},[a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"name"},[e._v("审核状态:")]),e._l(e.auditStatus,(function(t){return a("span",{key:t.dictionaryKey,class:{"click-status":e.search.examineStatus===t.dictionaryKey},on:{click:function(a){return e.chooseExamineStatus(t.dictionaryKey)}}},[e._v(" "+e._s(t.dictionaryValue)+" ")])}))],2),a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"name"},[e._v("启用状态:")]),e._l(e.enableStatus,(function(t){return a("span",{key:t.dictionaryKey,class:{"click-status":e.search.templateStatus===t.dictionaryKey},on:{click:function(a){return e.chooseUseStatus(t.dictionaryKey)}}},[e._v(" "+e._s(t.dictionaryValue)+" ")])}))],2)],1)]),a("template",{slot:"always-show"},[a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[e._v("消息编号:")]),a("Input",{attrs:{clearable:""},model:{value:e.search.messageCode,callback:function(t){e.$set(e.search,"messageCode",t)},expression:"search.messageCode"}})],1),a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[e._v("消息名称:")]),a("Input",{attrs:{clearable:""},model:{value:e.search.messageName,callback:function(t){e.$set(e.search,"messageName",t)},expression:"search.messageName"}})],1),a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[e._v("业务环节:")]),a("Select",{attrs:{clearable:""},model:{value:e.search.businessType,callback:function(t){e.$set(e.search,"businessType",t)},expression:"search.businessType"}},e._l(e.businessTypeData,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1)],1)],2),a("div",{staticClass:"btns-paginator"},[a("AdtButton",[a("Button",{on:{click:function(t){return e.add()}}},[e._v(" 新增消息 "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_tianjia"}})])]),a("Button",{on:{click:function(t){return e.startUsing()}}},[e._v(" "+e._s("批量启用"+(e.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-shenqing"}})])]),a("Button",{on:{click:function(t){return e.stopUsing()}}},[e._v(" "+e._s("批量停用"+(e.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-shenqing"}})])])],1),a("adt-paginator",{attrs:{currentPage:~~e.page,total:~~e.total}})],1),a("div",{staticClass:"public-table-data"},[a("Table",{attrs:{columns:e.tableColumns,data:e.tableData,stripe:""},on:{"on-selection-change":e.selectionChange},scopedSlots:e._u([{key:"examineStatus",fn:function(t){var s=t.row;return[a("span",{class:{success:"pass"===s.examineStatus,error:"fail"===s.examineStatus}},[e._v(" "+e._s(s.examineStatusTranslate)+" ")])]}},{key:"templateStatus",fn:function(t){var s=t.row;return[a("span",{class:{success:"enable"===s.templateStatus,error:"disable"===s.templateStatus}},[e._v(" "+e._s(s.templateStatusTranslate)+" ")])]}},{key:"action",fn:function(t){var s=t.row;return[s.templateStatus&&"disable"!==s.templateStatus||"wait"===s.examineStatus?e._e():a("span",{staticClass:"icon-action icon-action-word",attrs:{title:"启用"},on:{click:function(t){return e.startUsing(s)}}},[e._v("启")]),s.templateStatus&&"enable"===s.templateStatus&&"wait"!==s.examineStatus?a("span",{staticClass:"icon-action icon-action-word",attrs:{title:"停用"},on:{click:function(t){return e.stopUsing(s)}}},[e._v("停")]):e._e(),a("span",{attrs:{title:"审核"}},[e.isManager&&"wait"===s.examineStatus?a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.examine(s)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_shenhe"}})]):e._e()]),"enable"!==s.useStatus?a("span",{attrs:{title:"编辑"}},[a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.edit(s)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_caozuo-bianji"}})])]):e._e(),e.isManager&&"enable"!==s.templateStatus?a("span",{attrs:{title:"删除"}},[a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.remove(s)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_caozuo-shanchu"}})])]):e._e(),a("span",{attrs:{title:"详情"}},[a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.detail(s)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_caozuo-xiangqing"}})])])]}}])})],1),a("AdtMyModal",{attrs:{title:"创建消息",showModal:e.isModalShow,okText:"保存",cancelText:"取消",width:"650"},on:{"on-visible-change":e.addvisibleChange,"on-ok":function(t){return e.saveAdd()},"on-cancel":function(t){return e.cancelAdd()}}},[a("div",[a("Form",{ref:"addFormRef",staticClass:"fromItem",attrs:{"label-colon":"",model:e.addFormItem,rules:e.addFormRule,"label-width":100}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"消息名称",prop:"messageName"}},[a("Input",{staticClass:"fromItem-content",attrs:{maxlength:"10"},model:{value:e.addFormItem.messageName,callback:function(t){e.$set(e.addFormItem,"messageName",t)},expression:"addFormItem.messageName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"业务环节",prop:"businessType"}},[a("Select",{attrs:{clearable:""},model:{value:e.addFormItem.businessType,callback:function(t){e.$set(e.addFormItem,"businessType",t)},expression:"addFormItem.businessType"}},e._l(e.businessTypeData,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1)],1)],1),a("FormItem",{attrs:{label:"消息内容",prop:"messageContent"}},[a("Input",{attrs:{type:"textarea",maxlength:"500"},model:{value:e.addFormItem.messageContent,callback:function(t){e.$set(e.addFormItem,"messageContent",t)},expression:"addFormItem.messageContent"}})],1),a("FormItem",{attrs:{label:"备注信息"}},[a("Input",{attrs:{type:"textarea",maxlength:"500"},model:{value:e.addFormItem.remark,callback:function(t){e.$set(e.addFormItem,"remark",t)},expression:"addFormItem.remark"}})],1)],1)],1)]),a("AdtMyModal",{attrs:{title:"编辑消息",showModal:e.isEditModalShow,okText:"保存",cancelText:"取消",width:"650"},on:{"on-visible-change":e.editvisibleChange,"on-ok":function(t){return e.saveEdit()},"on-cancel":function(t){return e.cancelEdit()}}},[a("div",[a("Form",{ref:"editFormRef",staticClass:"fromItem",attrs:{"label-colon":"",model:e.editFormItem,rules:e.editFormRule,"label-width":100}},[a("div",{staticClass:"edit-field"},[a("span",{staticClass:"name",staticStyle:{width:"100px"}},[e._v("消息编号：")]),e._v(e._s(e.messageEditCode)+" ")]),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"消息名称",prop:"messageName"}},[a("Input",{staticClass:"fromItem-content",attrs:{maxlength:"10"},model:{value:e.editFormItem.messageName,callback:function(t){e.$set(e.editFormItem,"messageName",t)},expression:"editFormItem.messageName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"业务环节",prop:"businessType"}},[a("Select",{attrs:{clearable:""},model:{value:e.editFormItem.businessType,callback:function(t){e.$set(e.editFormItem,"businessType",t)},expression:"editFormItem.businessType"}},e._l(e.businessTypeData,(function(t){return a("Option",{key:t.dictionaryKey,attrs:{value:t.dictionaryKey}},[e._v(" "+e._s(t.dictionaryValue)+" ")])})),1)],1)],1)],1),a("FormItem",{attrs:{label:"消息内容",prop:"messageContent"}},[a("Input",{attrs:{type:"textarea",maxlength:"500"},model:{value:e.editFormItem.messageContent,callback:function(t){e.$set(e.editFormItem,"messageContent",t)},expression:"editFormItem.messageContent"}})],1),a("FormItem",{attrs:{label:"备注信息"}},[a("Input",{attrs:{type:"textarea",maxlength:"500"},model:{value:e.editFormItem.remark,callback:function(t){e.$set(e.editFormItem,"remark",t)},expression:"editFormItem.remark"}})],1)],1)],1)]),a("adt-my-modal",{attrs:{title:e.examineModalTitle,showModal:e.isAuditShow,width:"600"},on:{"on-visible-change":e.auditvisibleChange,"on-ok":function(t){return e.saveAudit()}}},[a("RadioGroup",{staticStyle:{"margin-bottom":"20px"},model:{value:e.agree,callback:function(t){e.agree=t},expression:"agree"}},[a("Radio",{attrs:{label:"1"}},[e._v("同意"+e._s(1===e.examineType?"启用":"停用"))]),a("Radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"0"}},[e._v("不同意"+e._s(1===e.examineType?"启用":"停用"))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===e.agree,expression:"agree === '0'"}]},[a("div",{staticClass:"reason-name",staticStyle:{"margin-bottom":"6px"}},[e._v("填写驳回原因:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:e.reason,callback:function(t){e.reason="string"===typeof t?t.trim():t},expression:"reason"}})],1)],1),a("adt-reconfirm-modal",{attrs:{showModal:e.editModalShow,message:e.editMsg},on:{"on-visible-change":e.visibleChangeEdit,"on-ok":function(t){return e.editModalClick()}}}),a("adt-my-modal",{attrs:{showModal:e.isActionDel,title:"系统提示"},on:{"on-visible-change":e.visibleChange,"on-ok":function(t){return e.confirmDel()}}},[a("div",[a("div",{staticStyle:{"margin-bottom":"6px"}},[e._v("填写删除原因:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:e.delInfo.reason,callback:function(t){e.$set(e.delInfo,"reason","string"===typeof t?t.trim():t)},expression:"delInfo.reason"}})],1)])],1)},n=[],i=(a("4160"),a("ac1f"),a("841c"),a("159b"),a("b85c")),o=a("5530"),r=a("7154"),c=[{title:"选择",align:"center",type:"selection",width:80},{title:"消息编号",align:"center",key:"messageCode"},{title:"消息名称",align:"center",key:"messageName"},{title:"业务环节",align:"center",key:"businessTypeTranslate"},{title:"创建人",align:"center",key:"createByTranslate"},{title:"创建时间",align:"center",key:"createDatetime"},{title:"审核状态",align:"center",slot:"examineStatus"},{title:"审核时间",align:"center",key:"examineDatetime"},{title:"启用状态",align:"center",slot:"templateStatus"},{title:"操作",align:"center",key:"operating",slot:"action",width:180}],l=a("b962"),d=a("781c"),u=a("90fe"),m={mixins:[d["a"]],props:{examineStatus:"",templateStatus:"",businessType:"",messageCode:"",messageName:""},data:function(){return{dictionaryApprovalStatus:this.$getDictionary("AUDIT_STATUS")||[],dictionaryEnabledStatus:this.$getDictionary("ENABLE_STATUS")||[],businessTypeData:this.$getDictionary("BUSINESS_STEP")||[],search:{businessType:this.businessType||"",messageCode:this.messageCode||"",messageName:this.messageName||"",examineStatus:this.examineStatus||"",templateStatus:this.templateStatus||""},messageEditCode:"",addFormItem:{},editFormItem:{},addFormRule:{messageName:[l["a"].required("消息名称")[0]],businessType:[l["a"].select("业务环节")[0]],messageContent:[l["a"].required("消息内容")[0]]},editFormRule:{messageName:[l["a"].required("消息名称")[0]],businessType:[l["a"].select("业务环节")[0]],messageContent:[l["a"].required("消息内容")[0]]},distinguish:0,isModalShow:!1,isEditModalShow:!1,editModalShow:!1,editMsg:"",tableColumns:c,tableData:[],isAuditShow:!1,examineModalTitle:"启用审核",stopData:{}}},methods:{chooseUseStatus:function(e){this.search.templateStatus===e?this.search.templateStatus="":this.search.templateStatus=e},confirmDel:function(){var e=this,t=[];t.push(this.delInfo),Object(r["b"])({data:t}).then((function(t){e.$Message.info(t.message),e.isActionDel=!1,e.getData()}))},getData:function(){var e=this,t=Object(o["a"])({page:this.page,size:15},this.search);Object(r["h"])({data:t}).then((function(t){e.tableData=t.data.content||[],e.total=t.data.totalElements,e.tableData.forEach((function(e){e.createDatetime=Object(u["a"])(e.createDatetime),e.examineDatetime=Object(u["a"])(e.examineDatetime)}))}))},saveAdd:function(){var e=this;this.$refs.addFormRef.validate((function(t){if(t){var a=e.addFormItem;Object(r["a"])({data:a}).then((function(t){e.$Message.info(t.message),e.$refs.addFormRef.resetFields(),e.addFormItem={},e.isModalShow=!1,e.getData()}))}}))},saveEdit:function(){var e=this;this.$refs.editFormRef.validate((function(t){if(t){var a=e.editFormItem;Object(r["i"])({data:a}).then((function(t){e.$Message.info(t.message),e.isEditModalShow=!1,e.getData()}))}}))},cancelAdd:function(){this.addFormItem={},this.trspModeData=[],void 0!==this.$refs.addFormRef&&this.$refs.addFormRef.resetFields()},cancelEdit:function(){void 0!==this.$refs.editFormRef&&this.$refs.editFormRef.resetFields()},edit:function(e){var t=this;if("enable"===e.templateStatus)this.editModalShow=!0,this.editMsg="请停用".concat(e.messageName,"消息再进行编辑"),this.stopData.templateStatus=e.templateStatus,this.stopData.messageCode=e.messageCode,this.stopData.examineStatus=e.examineStatus;else{this.isEditModalShow=!0;var a={messageCode:e.messageCode};Object(r["g"])(a).then((function(e){t.editFormItem=e.data,t.messageEditCode=e.data.messageCode}))}},startUsing:function(e){var t=this,a=this.handleRequestData(e);a.length&&Object(r["e"])({data:a}).then((function(e){t.$Message.info(e.message),t.getData()}))},stopUsing:function(e){var t=this,a=this.handleRequestData(e);a.length&&Object(r["d"])({data:a}).then((function(e){t.$Message.info(e.message),t.getData()}))},handleRequestData:function(e){var t=[];if(e)return t.push(o(e)),t;if(this.selectionList.length){var a,s=Object(i["a"])(this.selectionList);try{for(s.s();!(a=s.n()).done;){var n=a.value;t.push(o(n))}}catch(r){s.e(r)}finally{s.f()}}else this.$Message.warning("请先选择场所");return t;function o(e){var t=e.examineStatus,a=e.messageCode,s=e.templateStatus;return{sttnCode:a,useStatus:s,examineStatus:t}}},examine:function(e){this.reason="",e.templateStatus&&"disable"!==e.templateStatus?(this.examineType=0,this.examineModalTitle="停用审核"):(this.examineType=1,this.examineModalTitle="启用审核"),this.examineInfo.examineStatus=e.examineStatus,this.examineInfo.disagreeReason="",this.examineInfo.opinion="",this.examineInfo.sttnCode=e.messageCode,this.examineInfo.useStatus=e.templateStatus,this.isAuditShow=!0},saveAudit:function(){var e=this,t=Object(o["a"])({},this.examineInfo);if(1===this.examineType)if("1"===this.agree)t.opinion="AO",Object(r["f"])({data:t}).then((function(t){e.$Message.info(t.message),e.isAuditShow=!1,e.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");t.opinion="DO",t.disagreeReason=this.reason,Object(r["f"])({data:t}).then((function(t){e.$Message.info(t.message),e.isAuditShow=!1,e.getData()}))}else if("1"===this.agree)t.opinion="AC",Object(r["f"])({data:t}).then((function(t){e.$Message.info(t.message),e.isAuditShow=!1,e.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");t.opinion="DC",t.disagreeReason=this.reason,Object(r["f"])({data:t}).then((function(t){e.$Message.info(t.message),e.isAuditShow=!1,e.getData()}))}},detail:function(e){var t=e.messageCode;this.$router.push({path:"/standard-mapper/message-manage/detail",query:{messageCode:t}})},remove:function(e){this.isActionDel=!0,this.delInfo.code=e.messageCode,this.delInfo.reason="",this.delInfo.useStatus=e.templateStatus},editModalClick:function(){this.stopUsing(this.stopData),this.editModalShow=!1},auditvisibleChange:function(e){this.isAuditShow=e},addvisibleChange:function(e){this.isModalShow=e},editvisibleChange:function(e){this.isEditModalShow=e},visibleChangeEdit:function(e){this.editModalShow=e}}},h=m,f=(a("e3ed"),a("2877")),g=Object(f["a"])(h,s,n,!1,null,"0af55cf4",null);t["default"]=g.exports},e3ed:function(e,t,a){"use strict";var s=a("51c0"),n=a.n(s);n.a}}]);