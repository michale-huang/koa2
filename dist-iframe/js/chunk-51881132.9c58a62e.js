(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51881132"],{"7db0":function(e,n,a){"use strict";var t=a("23e7"),i=a("b727").find,o=a("44d2"),c=a("ae40"),s="find",u=!0,d=c(s);s in[]&&Array(1)[s]((function(){u=!1})),t({target:"Array",proto:!0,forced:u||!d},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},c8e0:function(e,n,a){"use strict";a.r(n);var t=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"menu-permission"},[a("Tree",{attrs:{data:e.treeData,render:e.menuRender,"children-key":"menuInfoList"}}),a("adt-reconfirm-modal",{attrs:{showModal:e.showDeleteModal},on:{"on-visible-change":e.deleteVisibleChange,"on-ok":e.handleDeleteModalOk}}),a("adt-my-modal",{attrs:{showModal:e.showItemModal,title:e.itemTitle,width:"650"},on:{"on-visible-change":e.visibleChange,"on-ok":e.handleItemModalOk}},[a("Form",{ref:"formValidate",staticClass:"two-column",attrs:{inline:"",model:e.itemData,rules:e.ruleValidate,"label-colon":!0,"label-position":"left","label-width":100}},[e.showType?a("FormItem",{attrs:{label:"新增项",prop:"menuType"}},[a("RadioGroup",{on:{"on-change":e.handleChooseType},model:{value:e.itemData.menuType,callback:function(n){e.$set(e.itemData,"menuType",n)},expression:"itemData.menuType"}},[a("Radio",{attrs:{label:"1"}},[e._v(" 菜单项 ")]),a("Radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"2"}},[e._v(" 功能项 ")])],1)],1):e._e(),a("div",{staticClass:"line"}),a("FormItem",{attrs:{label:"名称",prop:"menuName"}},[a("Input",{model:{value:e.itemData.menuName,callback:function(n){e.$set(e.itemData,"menuName",n)},expression:"itemData.menuName"}})],1),a("FormItem",{staticStyle:{"margin-left":"55px"},attrs:{label:"编码code",prop:"menuCode"}},[a("Input",{model:{value:e.itemData.menuCode,callback:function(n){e.$set(e.itemData,"menuCode",n)},expression:"itemData.menuCode"}})],1),a("FormItem",{attrs:{label:"状态",prop:"menuStatus"}},[a("Select",{model:{value:e.itemData.menuStatus,callback:function(n){e.$set(e.itemData,"menuStatus",n)},expression:"itemData.menuStatus"}},[a("Option",{attrs:{value:"enable"}},[e._v("可用")]),a("Option",{attrs:{value:"disable"}},[e._v("不可用")])],1)],1),a("FormItem",{staticStyle:{"margin-left":"55px"},attrs:{label:"页面路由URL",prop:"menuRoute"}},[a("Input",{model:{value:e.itemData.menuRoute,callback:function(n){e.$set(e.itemData,"menuRoute","string"===typeof n?n.trim():n)},expression:"itemData.menuRoute"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.itemData.menuType,expression:"itemData.menuType === '1'"}]},[a("div",{staticClass:"icon-title"},[e._v("选择图标")]),a("div",{staticClass:"icon-container"},e._l(e.iconGather,(function(n,t){return a("div",{key:t,class:["icon",{active:e.itemData.iconCode===n}],on:{click:function(a){return e.chooseIcon(n)}}},[a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#"+n}})])])})),0)])],1)],1)],1)},i=[],o=(a("7db0"),a("4160"),a("c975"),a("a434"),a("d3b7"),a("159b"),a("5530")),c=a("b85c"),s=a("2934"),u=a("4ec3"),d=function(e){return Object(s["c"])("".concat(u["i"],"/appInfo/appInfoQueryList"),e)},r=function(e){return Object(s["a"])("".concat(u["i"],"/menu/menuInfoQueryByAppCode"),e)},l=function(e){return Object(s["c"])("".concat(u["i"],"/menu/menuInfoAdd"),e)},m=function(e){return Object(s["c"])("".concat(u["i"],"/menu/menuInfoUpdate"),e)},p=function(e){return Object(s["a"])("".concat(u["i"],"/menu/menuInfoDelete"),e)},h=a("b962"),f={data:function(){return{itemTitle:"新增项",showItemModal:!1,showDeleteModal:!1,showType:!0,parentData:"",editData:"",deleteData:{root:"",node:"",data:""},itemData:{menuType:"",menuName:"",menuCode:"",menuStatus:"",menuRoute:"",iconCode:""},ruleValidate:{menuType:[h["a"].select("新增项")[0]],menuName:[h["a"].required("名称")[0]],menuCode:[h["a"].required("编码code")[0]],menuStatus:[h["a"].required("状态")[0]]},treeData:[],iconGather:["icondian","iconADTcaidanICON_fanganbianjiqi","iconADTcaidanICON_chanpinguanli","iconADTcaidanICON_fanganchaxun","iconADTcaidanICON_chanpinzhongxin","iconADTcaidanICON_caidanguanli","iconADTcaidanICON_chanpinbianjiqi","iconADTcaidanICON_fuwuqudongqi","iconADTcaidanICON_gerenzhongxin","iconADTcaidanICON_wuliufanganguanli","iconADTcaidanICON_kehufankuizhongxin","iconADTcaidanICON_dingdanzhongxin","iconADTcaidanICON_huoyunyaoqiuguanli","iconADTcaidanICON_fanganshoucangjia","iconADTcaidanICON_shouye","iconADTcaidanICON_shijianchakanqi","iconADTcaidanICON_kehuguanli","iconADTcaidanICON_wuliuquanchengjihua","iconADTcaidanICON_gongyingshangguanli","iconADTcaidanICON_gangweijiaoseguanli","iconADTcaidanICON_xiaoxiguanli","iconADTcaidanICON_yingyongkongzhitai","iconADTcaidanICON_yonghuguanli","iconADTcaidanICON_mobanguanli","iconADTcaidanICON_xuqiubianjiqi","iconADTcaidanICON_zhangdanguanli","iconADTcaidanICON_xietongxiezuochakan","iconADTcaidanICON_wuliuweituoguanli","iconADTcaidanICON_wuliuwenjianjia","iconADTcaidanICON_zhihangkanban","iconADTcaidanICON_zhihangchakanqi","iconADTcaidanICON_zidianguanli","iconADTcaidanICON_zuzhijigouguanli","iconADTcaidanICON_zuzhiquanxianguanli","iconADTcaidanICON_biaozhunyingsheqi"]}},created:function(){this.initData()},methods:{chooseIcon:function(e){this.itemData.iconCode=e},initData:function(){var e=this;d().then((function(n){var a=n.data;e.treeData=[];var t,i=Object(c["a"])(a);try{var o=function(){var n=t.value;n.render=e.appRender,n.menuInfoList=[],e.treeData.push(n),r({path:n.appCode}).then((function(a){var t=a.data;n.menuInfoList=t,e.recursion(n)}))};for(i.s();!(t=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}))},visibleChange:function(e){this.showItemModal=e},deleteVisibleChange:function(e){this.showDeleteModal=e},recursion:function(e){"2"===e.menuType&&(e.render=this.functionRender);var n=e.menuInfoList;if(n){var a,t=Object(c["a"])(n);try{for(t.s();!(a=t.n()).done;){var i=a.value;this.recursion(i)}}catch(o){t.e(o)}finally{t.f()}}},appRender:function(e,n){var a=this,t=(n.root,n.node,n.data);return e("span",{style:{display:"inline-block",width:"100%"}},[e("span",[e("span",t.appName)]),e("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}},[e("Poptip",{props:{disabled:!0,trigger:"hover",placement:"bottom",content:"添加下级"}},[e("Icon",{props:{type:"ios-add"},style:{fontSize:"24px"},on:{click:function(){a.append(t)}}})])])])},menuRender:function(e,n){var a=this,t=n.root,i=n.node,o=n.data;return e("span",{style:{display:"inline-block",width:"100%"}},[e("span",[e("span",o.menuName)]),e("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}},[e("span",{style:{padding:"1px 2px",fontSize:"12px",borderRadius:"4px",border:"enable"===o.menuStatus?"1px solid #02ADB5":"1px solid #999",color:"enable"===o.menuStatus?"#02ADB5":"#999"}},"enable"===o.menuStatus?"可用":"不可用"),e("Poptip",{props:{disabled:!0,trigger:"hover",placement:"bottom",content:"添加菜单项"}},[e("Icon",{props:{type:"ios-add"},style:{fontSize:"24px"},on:{click:function(){a.append(o)}}})]),e("Poptip",{props:{disabled:!0,trigger:"hover",placement:"bottom",content:"编辑菜单项"}},[e("Icon",{props:{type:"md-create"},style:{fontSize:"16px",position:"relative",top:"-3px"},on:{click:function(){a.edit(o)}}})]),e("Poptip",{props:{disabled:!0,trigger:"hover",placement:"bottom",content:"删除菜单项"}},[e("Icon",{props:{type:"ios-close"},style:{fontSize:"24px"},on:{click:function(){a.remove(t,i,o)}}})])])])},functionRender:function(e,n){var a=this,t=n.root,i=n.node,o=n.data;return e("span",{style:{display:"inline-block",width:"100%"}},[e("span",[e("span",o.menuName)]),e("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}},[e("Poptip",{props:{disabled:!0,trigger:"hover",placement:"bottom",content:"编辑功能"}},[e("Icon",{props:{type:"md-create"},style:{fontSize:"16px",position:"relative",top:"-3px"},on:{click:function(){a.edit(o)}}})]),e("Poptip",{props:{disabled:!0,trigger:"hover",placement:"bottom",content:"删除功能"}},[e("Icon",{props:{type:"ios-close"},style:{fontSize:"24px"},on:{click:function(){a.remove(t,i,o)}}})])])])},append:function(e){this.showItemModal=!0,this.parentData=e,this.itemData.menuType="",this.itemData.iconCode="",this.showType=!0,this.itemTitle="新增",this.$refs.formValidate.fields.forEach((function(e){e.resetField()}))},edit:function(e){this.parentData=e,this.showType=!1,this.itemTitle="编辑",this.editData=e,this.itemData.menuType=e.menuType,this.itemData.menuName=e.menuName,this.itemData.menuCode=e.menuCode,this.itemData.menuStatus=e.menuStatus,this.itemData.menuRoute=e.menuRoute,this.itemData.iconCode=e.iconCode,this.showItemModal=!0},handleItemModalOk:function(){var e=this;this.$refs.formValidate.validate((function(n){if(n){if("1"===e.itemData.menuType&&!e.itemData.iconCode)return void e.$Message.warning("请先选择图标！");var a=new Promise((function(n){if(e.showType){var a=Object(o["a"])({},e.itemData,{},{appCode:e.parentData.appCode,menuPid:e.parentData.menuId||0});l({data:a}).then((function(a){a.data?(e.$Message.success(a.message),n()):e.$Message.warning(a.message)}))}else{var t=Object(o["a"])({},e.itemData,{},{menuId:e.editData.menuId,menuPid:e.editData.menuPid,version:e.editData.version});m({data:t}).then((function(a){a.data?(e.$Message.success(a.message),n()):e.$Message.warning(a.message)}))}}));a.then((function(){e.showItemModal=!1,e.initData()}))}}))},remove:function(e,n,a){this.showDeleteModal=!0,this.deleteData={root:e,node:n,data:a}},handleDeleteModalOk:function(){var e=this,n=this.deleteData.data.menuId,a=new Promise((function(e){p({data:n}).then((function(n){n.data;e()}))}));a.then((function(){e.showDeleteModal=!1;var n=e.deleteData.root.find((function(n){return n===e.deleteData.node})).parent,a=e.deleteData.root.find((function(e){return e.nodeKey===n})).node,t=a.menuInfoList.indexOf(e.deleteData.data);a.menuInfoList.splice(t,1)}))},handleChooseType:function(){}}},D=f,g=(a("f895"),a("2877")),I=Object(g["a"])(D,t,i,!1,null,"416826ff",null);n["default"]=I.exports},ce14:function(e,n,a){},f895:function(e,n,a){"use strict";var t=a("ce14"),i=a.n(t);i.a}}]);