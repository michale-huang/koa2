(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36743275"],{"35ec":function(e,t,n){"use strict";n.d(t,"v",(function(){return s})),n.d(t,"r",(function(){return r})),n.d(t,"o",(function(){return i})),n.d(t,"t",(function(){return o})),n.d(t,"s",(function(){return u})),n.d(t,"q",(function(){return d})),n.d(t,"p",(function(){return f})),n.d(t,"m",(function(){return l})),n.d(t,"n",(function(){return h})),n.d(t,"u",(function(){return p})),n.d(t,"l",(function(){return v})),n.d(t,"h",(function(){return b})),n.d(t,"e",(function(){return m})),n.d(t,"j",(function(){return j})),n.d(t,"i",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"f",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"k",(function(){return x})),n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return C}));var a=n("2934"),c=n("4ec3"),s=function(e){return Object(a["c"])("".concat(c["j"],"/transport/query-list"),e)},r=function(e){return Object(a["c"])("".concat(c["j"],"/transport/exam-enable"),e)},i=function(e){return Object(a["c"])("".concat(c["j"],"/transport/exam-disable"),e)},o=function(e){return Object(a["c"])("".concat(c["j"],"/transport/valid-exam-pass"),e)},u=function(e){return Object(a["c"])("".concat(c["j"],"/transport/valid-exam-fail"),e)},d=function(e){return Object(a["c"])("".concat(c["j"],"/transport/disabled-exam-pass"),e)},f=function(e){return Object(a["c"])("".concat(c["j"],"/transport/disabled-exam-fail"),e)},l=function(e){return Object(a["a"])("".concat(c["j"],"/transport/add-code"),e)},h=function(e){return Object(a["c"])("".concat(c["j"],"/transport/add-server"),e)},p=function(e){return Object(a["a"])("".concat(c["j"],"/transport/query-detail"),e)},v=function(e){return Object(a["c"])("".concat(c["j"],"/station/query-page"),e)},b=function(e){return Object(a["c"])("".concat(c["j"],"/station/exam-enable"),e)},m=function(e){return Object(a["c"])("".concat(c["j"],"/station/exam-disable"),e)},j=function(e){return Object(a["c"])("".concat(c["j"],"/station/valid-exam-pass"),e)},y=function(e){return Object(a["c"])("".concat(c["j"],"/station/valid-exam-fail"),e)},O=function(e){return Object(a["c"])("".concat(c["j"],"/station/disabled-exam-pass"),e)},g=function(e){return Object(a["c"])("".concat(c["j"],"/station/disabled-exam-fail"),e)},w=function(e){return Object(a["a"])("".concat(c["j"],"/station/add-code"),e)},k=function(e){return Object(a["c"])("".concat(c["j"],"/station/add-server"),e)},x=function(e){return Object(a["a"])("".concat(c["j"],"/station/query-detail"),e)},S=function(e){return Object(a["c"])("".concat(c["j"],"/server/query-scene"),e)},C=function(e){return Object(a["a"])("".concat(c["j"],"/server/query-task"),e)}},"9c46":function(e,t,n){"use strict";n("99af"),n("c975"),n("a15b"),n("d81d"),n("45fc"),n("a434"),n("a9e3"),n("9129"),n("d3b7"),n("07ac"),n("ac1f"),n("1276"),n("96cf");var a=n("1da1"),c=n("5530"),s=n("b85c"),r=n("90fe"),i=n("35ec"),o=n("77ab");t["a"]={data:function(){return{isSceneModalShow:!1,titleNames:["设置基础任务费用时长","设置附加任务费用时长"],curSceneName:"",tabIndex:1,isBasicTask:!0,curCollapse:"",curProductIndex:0,productAllInfo:[],selectList:[],isSceneSpread:!1,dictionary:{},sceneName:"",sceneTableData:[{sceneCode:1,sceneName:"场景1"},{sceneCode:2,sceneName:"场景2"}],sceneColumns:[{title:"选择",align:"center",type:"selection",width:100},{title:"场景名称",align:"center",key:"sceneName"},{title:"排序值",align:"center",slot:"sort",width:150}],previewTableData:[],previewColumns:[{title:"序号",align:"center",type:"index",width:100},{title:"场景名称",align:"center",key:"sceneName"},{title:"排序值",align:"center",key:"sort",sortType:"asc",width:150}],selectedData:[],hasPendingProduct:!1}},methods:{sceneVisibleChange:function(e){this.isSceneModalShow=e},handleBtn:function(e){this.tabIndex=e+1,this.isBasicTask=0===e},handleReset:function(){this.$refs.parameterFormValidate.resetFields()},saveParameter:function(){var e=this;if(this.hasPendingProduct)this.$Message.warning("请先保存产品！");else{var t=!0,n=!0;if(this.$refs.formValidate&&this.$refs.formValidate.validate((function(e){t=!!e})),this.$refs.parameterFormValidate&&this.$refs.parameterFormValidate.validate((function(e){n=!!e})),t&&n){var a=function(t){e.curCollapse="0",e.hasPendingProduct=!0;var n,a=[],i=[],o=Object(s["a"])(r);try{for(o.s();!(n=o.n()).done;){var d=n.value;d&&a.push(d.split("~")[1])}}catch(l){o.e(l)}finally{o.f()}for(var f in e.siteData)i[f]=e.siteData[f].split("~")[1];e.productAllInfo.unshift(Object(c["a"])({serverCode:t,sceneTabIndex:-1,parameters:a.join("+"),sites:i},u))};if("T"===this.productType&&"C"===this.parameterData.trspType.split("~")[0]&&(!this.parameterData.contaSizeType||!this.parameterData.contaSource))return void this.$Message.warning("运输类型为集装箱，集装箱尺寸类型和集装箱来源必填");var r=Object.values(this.parameterData),o=r.some((function(e){return e}));if(!o)return void this.$Message.warning("请先选择参数！");var u={};for(var d in this.parameterData)u[d]=this.parameterData[d]&&this.parameterData[d].split("~")[0];for(var f in this.siteData)u[f]=this.siteData[f]&&this.siteData[f].split("~")[0];"T"===this.productType?(u.departurePort="".concat(u.dispatchCity,";").concat(u.dispatchSite),u.destinationPort="".concat(u.destinationCity,";").concat(u.destinationSite),delete u.dispatchCity,delete u.dispatchSite,delete u.destinationCity,delete u.destinationSite):"Y"===this.productType&&(u.sttnCode="".concat(u.dispatchCity,";").concat(u.dispatchSite),delete u.dispatchCity,delete u.dispatchSite),"T"===this.productType?Object(i["m"])().then((function(e){var t=e.data;a(t)})):"Y"===this.productType&&Object(i["c"])().then((function(e){var t=e.data;a(t)}))}}},selectionChange:function(e){this.selectedData=e},changeRowData:function(e,t,n){this.sceneTableData[t]=e;var a,c=Object(s["a"])(this.selectedData);try{for(c.s();!(a=c.n()).done;){var r=a.value;if(r.sceneName===e.sceneName){r[n]="sort"===n?Number(e[n]):e[n];break}}}catch(i){c.e(i)}finally{c.f()}},previewSort:function(){this.verifyItem()&&(this.previewTableData=this.selectedData)},verifyItem:function(){if(!this.selectedData.length)return this.$Message.warning("请至少选择一个场景！"),!1;var e,t=[],n=Object(s["a"])(this.selectedData);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(!a.sort&&!Number.isNaN(a.sort))return this.$Message.warning("选中的场景的排序值必填！"),!1;if(!/^\d+$/.test(a.sort))return void this.$Message.warning("排序值只能是整数！");t.push(a.sort)}}catch(c){n.e(c)}finally{n.f()}return!Object(r["c"])(t)||(this.$Message.warning("选中的场景的排序值不能重复！"),!1)},searchScene:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.apiGetScene();case 1:case"end":return t.stop()}}),t)})))()},chooseScene:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.sceneName="",n.next=3,t.apiGetScene();case 3:a=n.sent,a&&(t.curProductIndex=e,t.isSceneModalShow=!0);case 5:case"end":return n.stop()}}),n)})))()},apiGetScene:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.curProductIndex,n={sceneName:this.sceneName,serverType:this.productType,trspType:this.productAllInfo[t].trspType.split("~")[0],logisticsType:this.productAllInfo[t].logisticsType.split("~")[0]};return new Promise((function(t){Object(i["a"])({data:n}).then((function(n){var a=n.data;e.sceneTableData=a,t(!0)}))}))},confirmChooseScene:function(){if(this.verifyItem()){var e,t=[],n=[],a=Object(s["a"])(this.selectedData);try{for(a.s();!(e=a.n()).done;){var c=e.value;if(c.mutexScene){var r,i=Object(s["a"])(c.mutexScene.split(";"));try{for(i.s();!(r=i.n()).done;){var o,u=r.value,d=Object(s["a"])(this.selectedData);try{for(d.s();!(o=d.n()).done;){var f=o.value;if(u===f.sceneCode)return void this.$Message.warning({content:"".concat(c.sceneName,"不能与").concat(f.sceneName,"同时选择，否则无法创建！"),duration:10,closable:!0})}}catch(C){d.e(C)}finally{d.f()}}}catch(C){i.e(C)}finally{i.f()}}if(c.symbiosisScene){var l,h=Object(s["a"])(c.symbiosisScene.split(";"));try{for(h.s();!(l=h.n()).done;){var p,v=l.value,b=!1,m=Object(s["a"])(this.selectedData);try{for(m.s();!(p=m.n()).done;){var j=p.value;v===j.sceneCode&&(b=!0)}}catch(C){m.e(C)}finally{m.f()}if(!b){var y,O="",g=Object(s["a"])(this.sceneTableData);try{for(g.s();!(y=g.n()).done;){var w=y.value;if(v===w.sceneCode){O=w.sceneName;break}}}catch(C){g.e(C)}finally{g.f()}return void this.$Message.warning({content:"".concat(c.sceneName,"必须要选择").concat(O,"，否则无法创建！"),duration:10,closable:!0})}}}catch(C){h.e(C)}finally{h.f()}}var k=c.sceneName,x=c.sceneCode,S=c.sort;n.push(k),t.push({sceneName:k,sceneCode:x,sort:S,taskBasesList:{},taskAffixesList:[]})}}catch(C){a.e(C)}finally{a.f()}this.$set(this.productAllInfo[this.curProductIndex],"scenesList",t),this.$set(this.productAllInfo[this.curProductIndex],"sceneNames",n),this.$set(this.productAllInfo[this.curProductIndex],"sceneTabIndex",-1),this.curSceneName="",this.isSceneModalShow=!1}},handleSceneBtn:function(e,t,n){this.$set(this.productAllInfo[n],"sceneTabIndex",e+1),this.curSceneName=t,this.curProductIndex=n;var a=this.productAllInfo[n].scenesList[e];a.taskBasesList.lists||Object(i["b"])({sceneCode:a.sceneCode}).then((function(e){var t=e.data;a.taskBasesList.lists=[],a.taskAffixesList=[];var n,c=Object(s["a"])(t.baseTaskQueryRes);try{for(c.s();!(n=c.n()).done;){var r=n.value;a.taskBasesList.lists.push({taskCode:r.taskCode,taskName:r.taskName})}}catch(d){c.e(d)}finally{c.f()}var i,o=Object(s["a"])(t.affixTaskQueryRes);try{for(o.s();!(i=o.n()).done;){var u=i.value;a.taskAffixesList.push({taskCode:u.taskCode,taskName:u.taskName,isChecked:!1})}}catch(d){o.e(d)}finally{o.f()}}))},chooseProduct:function(e,t){if(t)this.selectList.push(e);else{var n=this.selectList.indexOf(e);this.selectList.splice(n,1)}},goToAddProduct:function(e){var t="";switch(e){case"T":t="transport";break;case"Y":t="site";break;case"C":t="customs";break;case"B":t="cpa";break}this.$router.push("/product-editor/add-".concat(t,"-product"))},_handelDir:function(e){return new Promise((function(t){var n=e[e.length-1];Object(o["e"])({city:n}).then((function(e){var n=e.data,a=n&&n.length?n[0]:[],c=a.map((function(e){return{value:e.sttnCode,label:e.sttnName}}));t(c)}))}))}}}}}]);