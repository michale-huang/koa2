(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74ebe292"],{2463:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("adt-search-folder",{attrs:{searchRouter:{query:{sceneCode:t.search.sceneCode,sceneName:t.search.sceneName,serverType:t.search.serverType,trspType:t.search.trspType,examineStatus:t.search.examineStatus,useStatus:t.search.useStatus}},isStatus:!0},on:{"on-triggerFolder":t.searchChange}},[a("template",{slot:"status"},[a("div",{staticClass:"status"},[a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"name"},[t._v("审核状态:")]),t._l(t.dictionaryApprovalStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.examineStatus===e.dictionaryKey},on:{click:function(a){return t.auditStatus(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2),a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"name"},[t._v("启用状态:")]),t._l(t.dictionaryEnabledStatus,(function(e){return a("span",{key:e.dictionaryKey,class:{"click-status":t.search.useStatus===e.dictionaryKey},on:{click:function(a){return t.enableStatus(e.dictionaryKey)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2)],1)]),a("template",{slot:"always-show"},[a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[t._v("场景编号:")]),a("Input",{attrs:{clearable:""},model:{value:t.search.sceneCode,callback:function(e){t.$set(t.search,"sceneCode",e)},expression:"search.sceneCode"}})],1),a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[t._v("场景名称:")]),a("Input",{attrs:{clearable:""},model:{value:t.search.sceneName,callback:function(e){t.$set(t.search,"sceneName",e)},expression:"search.sceneName"}})],1),a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[t._v("服务类型:")]),a("Select",{staticClass:"fromItem-content",attrs:{clearable:""},model:{value:t.search.serverType,callback:function(e){t.$set(t.search,"serverType",e)},expression:"search.serverType"}},t._l(t.dictionaryServiceType,(function(e,s){return a("Option",{key:s,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1),a("Col",{staticClass:"form-item",attrs:{span:"6"}},[a("span",[t._v("运输类型:")]),a("Select",{staticClass:"fromItem-content",attrs:{clearable:""},model:{value:t.search.trspType,callback:function(e){t.$set(t.search,"trspType",e)},expression:"search.trspType"}},t._l(t.dictionaryTransportType,(function(e,s){return a("Option",{key:s,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)],1)],2),a("div",{staticClass:"btns-paginator"},[a("AdtButton",[a("Button",{on:{click:function(e){return t.add()}}},[t._v(" 新增场景 "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_tianjia"}})])]),a("Button",{on:{click:function(e){return t.startUsing()}}},[t._v(" "+t._s("批量启用"+(t.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-shenqing"}})])]),a("Button",{on:{click:function(e){return t.stopUsing()}}},[t._v(" "+t._s("批量停用"+(t.isManager?"":"申请"))+" "),a("svg",{staticClass:"iconfont",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-shenqing"}})])])],1),a("adt-paginator",{staticClass:"pagination",attrs:{currentPage:~~t.page,total:~~t.total}})],1),a("AdtMyModal",{attrs:{title:t.modelTitle,showModal:t.isModalShow,okText:"保存",cancelText:"取消",width:"1200"},on:{"on-visible-change":t.addvisibleChange,"on-ok":function(e){return t.saveAdd()},"on-cancel":function(e){return t.cancelAdd()}}},[1==t.distinguish?a("div",[a("Form",{ref:"addFormItemData",staticClass:"fromItem",attrs:{model:t.addFormItem,rules:t.addFormItemRule,"label-width":100,"label-colon":""}},[a("FormItem",{attrs:{label:"场景名称",prop:"sceneName"}},[a("Input",{staticClass:"fromItem-content",model:{value:t.addFormItem.sceneName,callback:function(e){t.$set(t.addFormItem,"sceneName",e)},expression:"addFormItem.sceneName"}})],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"服务类型",prop:"serverType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.addFormItem.serverType,callback:function(e){t.$set(t.addFormItem,"serverType",e)},expression:"addFormItem.serverType"}},t._l(t.dictionaryServiceType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.serviceTag,value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1),a("FormItem",{staticClass:"fromItem-margin",class:"A"!==t.addFormItem.serverType&&t.addFormItem.serverType?"ivu-form-item-required ivu-form-item-label margin-top":"",attrs:{"show-message":!("A"===t.addFormItem.serverType||!t.addFormItem.serverType),label:"运输类型",prop:"trspType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.addFormItem.trspType,callback:function(e){t.$set(t.addFormItem,"trspType",e)},expression:"addFormItem.trspType"}},t._l(t.dictionaryTransportType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.transportTag,value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1),a("FormItem",{staticClass:"fromItem-margin",class:"A"!==t.addFormItem.serverType&&t.addFormItem.serverType?"ivu-form-item-required ivu-form-item-label margin-top":"",attrs:{"show-message":!("A"===t.addFormItem.serverType||!t.addFormItem.serverType),label:"物流类型",prop:"logisticsType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.addFormItem.logisticsType,callback:function(e){t.$set(t.addFormItem,"logisticsType",e)},expression:"addFormItem.logisticsType"}},t._l(t.dictionaryLogisticsType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.logisticsTag,value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)],1)],1):t._e(),2==t.distinguish?a("div",[a("div",{staticClass:"scene-top"},[t._v("场景编号"+t._s(t.sceneNumber))]),a("div",{staticClass:"scene-edit"},[a("Form",{ref:"editFormItemData",staticClass:"fromItem",attrs:{model:t.editFormItem,rules:t.editFormItemRule,"label-width":75,"label-colon":""}},[a("FormItem",{attrs:{label:"场景名称",prop:"accountEmail"}},[a("Input",{staticClass:"fromItem-content",model:{value:t.editFormItem.sceneName,callback:function(e){t.$set(t.editFormItem,"sceneName",e)},expression:"editFormItem.sceneName"}})],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"服务类型",prop:"serverType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.editFormItem.serverType,callback:function(e){t.$set(t.editFormItem,"serverType",e)},expression:"editFormItem.serverType"}},t._l(t.dictionaryServiceType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.serviceTag,value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"运输类型",prop:"trspType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.editFormItem.trspType,callback:function(e){t.$set(t.editFormItem,"trspType",e)},expression:"editFormItem.trspType"}},t._l(t.dictionaryTransportType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.transportTag,value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1),a("FormItem",{staticClass:"fromItem-margin",attrs:{label:"物流类型",prop:"logisticsType"}},[a("Select",{staticClass:"fromItem-content",on:{"on-select":t.selectType},model:{value:t.editFormItem.logisticsType,callback:function(e){t.$set(t.editFormItem,"logisticsType",e)},expression:"editFormItem.logisticsType"}},t._l(t.dictionaryLogisticsType,(function(e,s){return a("Option",{key:s,attrs:{tag:t.logisticsTag,value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)],1)],1)]):t._e(),a("hr",{staticClass:"line-solid"}),a("adt-tab-btns",{attrs:{height:40,isBaseBtn:!0,titleNames:t.titleNames,btnIndex:t.btnIndex,width:255},on:{handleBtn:t.handleBtn}},[a("div",{staticClass:"line"}),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.btnIndex,expression:"btnIndex == 1"}],staticClass:"tabs"},[a("div",{staticClass:"tabs-task"},[a("div",{staticClass:"tabs-search"},[a("span",[t._v("基础任务名称：")]),a("div",{staticClass:"tabs-condition"},[a("Input",{staticClass:"tabs-condition-input",attrs:{type:"text"},model:{value:t.basicTaskName,callback:function(e){t.basicTaskName=e},expression:"basicTaskName"}}),a("svg",{staticClass:"icon-action iconfont tabs-condition-logo",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.searchTask(1)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_sousuo"}})])],1),a("Button",{staticClass:"tabs-btn",attrs:{type:"primary"},on:{click:function(e){return t.sort(1)}}},[t._v("排序")])],1),a("Table",{attrs:{columns:t.tableColumnsBasicTask,data:t.tableDataBasicTask,"max-height":"300",stripe:""},on:{"on-selection-change":t.checkBasicTask},scopedSlots:t._u([{key:"sort",fn:function(e){var s=e.row,i=e.index;return[a("div",{staticStyle:{position:"relative"}},[a("span",{staticClass:"required-tag",staticStyle:{width:"30px"}},[t._v("*")]),a("Input",{staticStyle:{width:"80px"},attrs:{clearable:""},on:{"on-change":function(e){return t.changeRowData(s,i,"sort","sortBasic")}},model:{value:s.sort,callback:function(e){t.$set(s,"sort","string"===typeof e?e.trim():e)},expression:"row.sort"}})],1)]}}])})],1),a("div",{staticClass:"tabs-line"}),a("div",{staticClass:"tabs-sort"},[a("div",{staticClass:"tabs-title"},[t._v("基础任务排序:")]),a("Table",{attrs:{columns:t.tableColumnsBasicTaskSort,data:t.tableDataBasicTaskSort,stripe:""}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.btnIndex,expression:"btnIndex == 2"}],staticClass:"tabs"},[a("div",{staticClass:"tabs-task"},[a("div",{staticClass:"tabs-search"},[a("span",[t._v("附加任务名称：")]),a("div",{staticClass:"tabs-condition"},[a("Input",{staticClass:"tabs-condition-input",attrs:{type:"text"},model:{value:t.affixTaskName,callback:function(e){t.affixTaskName=e},expression:"affixTaskName"}}),a("svg",{staticClass:"icon-action iconfont tabs-condition-logo",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.searchTask(2)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_sousuo"}})])],1),a("Button",{staticClass:"tabs-btn",attrs:{type:"primary"},on:{click:function(e){return t.sort(2)}}},[t._v("排序")])],1),a("Table",{attrs:{columns:t.tableColumnsAdditionalTasks,data:t.tableDataAdditionalTasks,"max-height":"300",stripe:""},on:{"on-selection-change":t.checkBasicTask},scopedSlots:t._u([{key:"sort",fn:function(e){var s=e.row,i=e.index;return[a("div",{staticStyle:{position:"relative"}},[a("span",{staticClass:"required-tag",staticStyle:{width:"30px"}},[t._v("*")]),a("Input",{staticStyle:{width:"80px"},attrs:{clearable:""},on:{"on-change":function(e){return t.changeRowData(s,i,"sort","sortAttach")}},model:{value:s.sort,callback:function(e){t.$set(s,"sort","string"===typeof e?e.trim():e)},expression:"row.sort"}})],1)]}}])})],1),a("div",{staticClass:"tabs-line"}),a("div",{staticClass:"tabs-sort"},[a("div",{staticClass:"tabs-title"},[t._v("基础任务排序:")]),a("Table",{attrs:{columns:t.tableColumnsAdditionalTasksSort,data:t.tableDataAdditionalTasksSort,stripe:""}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.btnIndex,expression:"btnIndex == 3"}],staticClass:"tabs"},[a("div",{staticClass:"tabs-task"},[a("div",{staticClass:"tabs-search"},[a("span",[t._v("单据名称：")]),a("div",{staticClass:"tabs-condition"},[a("Input",{staticClass:"tabs-condition-input",attrs:{type:"text"},model:{value:t.billName,callback:function(e){t.billName=e},expression:"billName"}}),a("svg",{staticClass:"icon-action iconfont tabs-condition-logo",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.searchTask(3)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_sousuo"}})])],1),a("Button",{staticClass:"tabs-btn",attrs:{type:"primary"},on:{click:function(e){return t.sort(3)}}},[t._v("排序")])],1),a("Table",{attrs:{columns:t.tableColumnsDocument,data:t.tableDataDocument,"max-height":"300",stripe:""},on:{"on-selection-change":t.checkBasicTask},scopedSlots:t._u([{key:"sort",fn:function(e){var s=e.row,i=e.index;return[a("div",{staticStyle:{position:"relative"}},[a("span",{staticClass:"required-tag",staticStyle:{width:"30px"}},[t._v("*")]),a("Input",{staticStyle:{width:"80px"},attrs:{clearable:""},on:{"on-change":function(e){return t.changeRowData(s,i,"sort","sortDocument")}},model:{value:s.sort,callback:function(e){t.$set(s,"sort","string"===typeof e?e.trim():e)},expression:"row.sort"}})],1)]}}])})],1),a("div",{staticClass:"tabs-line"}),a("div",{staticClass:"tabs-sort"},[a("div",{staticClass:"tabs-title"},[t._v("单据排序:")]),a("Table",{attrs:{columns:t.tableColumnsDocumentSort,data:t.tableDataDocumentSort,stripe:""}})],1)])]),a("div",{staticClass:"public-transit scen-select"},[a("Form",{ref:"formScenes",attrs:{model:t.formScenes,inline:"","label-colon":""}},[a("FormItem",{staticClass:"select-transit",attrs:{label:"必须共存场景",prop:"symbiosisScene"}},[a("Select",{staticStyle:{width:"170px"},attrs:{loading:t.sceneLoading,filterable:""},on:{"on-select":t.onChangeClick},model:{value:t.formScenes.symbiosisScene,callback:function(e){t.$set(t.formScenes,"symbiosisScene",e)},expression:"formScenes.symbiosisScene"}},t._l(t.sceneData,(function(e,s){return a("Option",{key:s,attrs:{value:e.label}},[t._v(" "+t._s(e.value)+" ")])})),1),a("p",{staticClass:"select-value"},t._l(t.sceneSelectList,(function(e,s){return a("span",{key:s},[t._v(t._s(e.label)+" "),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delTransit(s)}}})],1)})),0)],1),a("FormItem",{staticClass:"select-transit",staticStyle:{"margin-bottom":"0px !important"},attrs:{label:"无法共存场景",prop:"exclusiveScene"}},[a("Select",{staticStyle:{width:"170px"},attrs:{loading:t.sceneNoLoading,filterable:""},on:{"on-select":t.noChangeClick},model:{value:t.formScenes.exclusiveScene,callback:function(e){t.$set(t.formScenes,"exclusiveScene",e)},expression:"formScenes.exclusiveScene"}},t._l(t.sceneData,(function(e,s){return a("Option",{key:s,attrs:{value:e.label}},[t._v(" "+t._s(e.value)+" ")])})),1),a("p",{staticClass:"select-value"},t._l(t.sceneNoSelectList,(function(e,s){return a("span",{key:s},[t._v(t._s(e.label)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delTransitNo(s)}}})],1)})),0)],1)],1)],1)])],1),a("div",{staticClass:"public-table-data"},[a("Table",{attrs:{columns:t.tableColumns,data:t.tableData,stripe:""},on:{"on-selection-change":t.selectionChange},scopedSlots:t._u([{key:"examineStatus",fn:function(e){var s=e.row;return[a("span",{class:{success:"pass"===s.examineStatus,error:"fail"===s.examineStatus}},[t._v(" "+t._s(s.examineStatusTranslate)+" ")])]}},{key:"useStatus",fn:function(e){var s=e.row;return[a("span",{class:{success:"enable"===s.useStatus,error:"disable"===s.useStatus}},[t._v(" "+t._s(s.useStatusTranslate)+" ")])]}},{key:"action",fn:function(e){var s=e.row;return[s.useStatus&&"disable"!==s.useStatus||"wait"===s.examineStatus?t._e():a("span",{staticClass:"icon-action icon-action-word",attrs:{title:"启用"},on:{click:function(e){return t.startUsing(s)}}},[t._v("启")]),s.useStatus&&"enable"===s.useStatus&&"wait"!==s.examineStatus?a("span",{staticClass:"icon-action icon-action-word",attrs:{title:"停用"},on:{click:function(e){return t.stopUsing(s)}}},[t._v("停")]):t._e(),a("span",{attrs:{title:"审核"}},[t.isManager&&"wait"===s.examineStatus?a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.examine(s)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_shenhe"}})]):t._e()]),a("span",{attrs:{title:"详情"}},[a("svg",{staticClass:"icon-action iconfont",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.detail(s)}}},[a("use",{attrs:{"xlink:href":"#icon-andaotongV3ICON_caozuo-xiangqing"}})])])]}}])})],1),a("adt-my-modal",{attrs:{title:t.examineModalTitle,showModal:t.isAuditShow,width:"600"},on:{"on-visible-change":t.auditvisibleChange,"on-ok":function(e){return t.saveAudit()}}},[a("RadioGroup",{staticStyle:{"margin-bottom":"20px"},model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[a("Radio",{attrs:{label:"1"}},[t._v("同意"+t._s(1===t.examineType?"启用":"停用"))]),a("Radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"0"}},[t._v("不同意"+t._s(1===t.examineType?"启用":"停用"))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===t.agree,expression:"agree === '0'"}]},[a("div",{staticClass:"reason-name",staticStyle:{"margin-bottom":"6px"}},[t._v("填写驳回原因:")]),a("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:t.reason,callback:function(e){t.reason="string"===typeof e?e.trim():e},expression:"reason"}})],1)],1),a("adt-reconfirm-modal",{attrs:{showModal:t.isActionDel},on:{"on-visible-change":t.visibleChange,"on-ok":function(e){return t.allDelClick()}}})],1)},i=[],n=(a("4160"),a("a630"),a("d81d"),a("a434"),a("a9e3"),a("9129"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("841c"),a("159b"),a("ddb0"),a("5530")),c=a("b85c"),r=a("ade3"),o=a("da99"),l=a("7b46"),u=a("b962"),d=a("90fe"),m=a("e389"),h={mixins:[l["a"]],props:{examineStatus:"",useStatus:"",sceneCode:"",sceneName:"",serverType:"",trspType:""},data:function(){var t;return t={userType:"",modelTitle:"",isModalShow:!1,isActionDel:!1,isAuditShow:!1,isEditAuditShow:!1,isManager:this.$isManager,examineType:1,examineModalTitle:"启用审核",value:"1",distinguish:0,judgment:0,search:{sceneCode:this.sceneCode,sceneName:this.sceneName,serverType:this.serverType,trspType:this.trspType,examineStatus:this.examineStatus,useStatus:this.useStatus},basicTaskName:"",affixTaskName:"",billName:"",addType:{},auditStatusNum:"默认值",enableStatusNum:"默认值",titleNames:["基础任务映射设置","附加任务映射设置","单据映射设置"],btnIndex:1,addFormItem:{},addFormItemRule:{sceneName:[u["a"].required("场景名称")[0]],serverType:[u["a"].select("服务类型")[0]]},sceneNumber:"",editFormItem:{},editFormItemRule:{},dictionaryServiceType:this.$getDictionary("SERVICE_TYPE")||[],dictionaryTransportType:this.$getDictionary("TRANSPORT_TYPE")||[],dictionaryLogisticsType:this.$getDictionary("LOGISTICS_TYPE")||[],dictionaryApprovalStatus:this.$getDictionary("AUDIT_STATUS")||[],dictionaryEnabledStatus:this.$getDictionary("ENABLE_STATUS")||[],tableColumnsBasicTask:o["g"],tableColumnsAdditionalTasks:o["e"],tableColumnsDocument:o["i"],tableDataBasicTaskAudit:[],tableDataAdditionalTasksAudit:[],tableDataDocumentAudit:[],tableDataBasicTask:[],formBasis:{sort:""},ruleBasis:{sort:[u["a"].required("基础任务名称")[0]]},checkTask:[],selectionList:[],tableDataBasicTaskSort:[],tableColumnsBasicTaskSort:o["h"]},Object(r["a"])(t,"tableColumnsAdditionalTasks",o["e"]),Object(r["a"])(t,"tableColumnsAdditionalTasksSort",o["f"]),Object(r["a"])(t,"tableDataAdditionalTasksSort",[]),Object(r["a"])(t,"tableColumnsDocument",o["i"]),Object(r["a"])(t,"tableColumnsDocumentSort",o["j"]),Object(r["a"])(t,"tableDataDocumentSort",[]),Object(r["a"])(t,"formScenes",{symbiosisScene:"",exclusiveScene:""}),Object(r["a"])(t,"tableDataAdditionalTasks",[]),Object(r["a"])(t,"tableDataDocument",[]),Object(r["a"])(t,"tableColumns",o["d"]),Object(r["a"])(t,"tableData",[]),Object(r["a"])(t,"isAdd",!0),Object(r["a"])(t,"selectedData",[]),Object(r["a"])(t,"sceneLoading",!1),Object(r["a"])(t,"list",[{sceneCode:"111",sceneName:"场景1"},{sceneCode:"222",sceneName:"场景2"}]),Object(r["a"])(t,"sceneData",[]),Object(r["a"])(t,"sceneSelect",[]),Object(r["a"])(t,"sceneSelectList",[]),Object(r["a"])(t,"sceneNoLoading",!1),Object(r["a"])(t,"sceneNoData",[]),Object(r["a"])(t,"sceneNoSelect",[]),Object(r["a"])(t,"sceneNoSelectList",[]),Object(r["a"])(t,"examineInfo",{}),Object(r["a"])(t,"agree","1"),Object(r["a"])(t,"reason",""),Object(r["a"])(t,"test",[]),Object(r["a"])(t,"serviceTag","服务类型"),Object(r["a"])(t,"transportTag","运输类型"),Object(r["a"])(t,"logisticsTag","物流类型"),Object(r["a"])(t,"dataNoList",[]),Object(r["a"])(t,"dataList",[]),t},methods:{addvisibleChange:function(t){this.isModalShow=t},auditvisibleChange:function(t){this.isAuditShow=t},visibleChange:function(t){this.isActionDel=t},selectionChange:function(t){this.selectionList=t},dataInit:function(){this.getData()},getData:function(){var t=this,e={direction:"asc",examineStatus:this.search.examineStatus,page:this.page,sceneCode:this.search.sceneCode,sceneName:this.search.sceneName,serverType:this.search.serverType,trspType:this.search.trspType,useStatus:this.search.useStatus};Object(m["k"])({data:e}).then((function(e){200==e.code&&(t.tableData=e.data.content||[],t.total=e.data.totalElements,t.tableData.forEach((function(t){t.createDatetime=Object(d["a"])(t.createDatetime),t.examineDatetime=Object(d["a"])(t.examineDatetime)})))}))},add:function(){this.isModalShow=!0,this.distinguish=1,this.modelTitle="新增场景",this.isAdd=!0,this.getAddData()},getAddData:function(t,e,a){if(t||e||a){var s={serverType:t||"",trspType:e||"",logisticsType:a||""};"T"==t||"Y"==t?e&&a&&(this.addType=s,this.getTypeData(s)):(this.addType=s,this.getTypeData(s))}else{var i={serverType:"A"};this.getTypeData(i)}},getTypeData:function(t){var e=this;Object(m["h"])({data:t}).then((function(t){200==t.code&&(e.tableDataBasicTask=t.data.baseTasks||[],e.tableDataAdditionalTasks=t.data.affixTasks||[],e.tableDataDocument=t.data.bills||[],e.sceneNoData=t.data.sceneInfo||[],e.sceneData=[],e.sceneNoData.forEach((function(t){e.sceneData.push({value:t.sceneName,label:t.sceneCode})})))}))},startUsing:function(t){var e=this,a=this.handleRequestData(t);a.length&&Object(m["c"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},stopUsing:function(t){var e=this,a=this.handleRequestData(t);a.length&&Object(m["b"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},handleRequestData:function(t){var e=[];if(t)return e.push(n(t)),e;if(this.selectionList.length){var a,s=Object(c["a"])(this.selectionList);try{for(s.s();!(a=s.n()).done;){var i=a.value;e.push(n(i))}}catch(r){s.e(r)}finally{s.f()}}else this.$Message.warning("请先选择场景");return e;function n(t){var e=t.sceneCode,a=t.taskCode,s=t.useStatus,i=t.version,n=t.examineStatus;return{sceneCode:e,taskCode:a,useStatus:s,version:i,examineStatus:n}}},selectType:function(t){"服务类型"==t.tag&&(this.serverValue=t.value),"运输类型"==t.tag&&(this.trspValue=t.value),"物流类型"==t.tag&&(this.logisticsValue=t.value),this.getAddData(this.serverValue,this.trspValue,this.logisticsValue)},checkBasicTask:function(t){this.selectedData[this.btnIndex]=t},sort:function(t){if(1==t){if(!this.verifyItem())return;this.tableDataBasicTaskSort=this.selectedData[this.btnIndex]}if(2==t){if(!this.verifyItem())return;this.tableDataAdditionalTasksSort=this.selectedData[this.btnIndex]}if(3==t){if(!this.verifyItem())return;this.tableDataDocumentSort=this.selectedData[this.btnIndex]}},searchTask:function(t){var e=this,a=JSON.parse(JSON.stringify(this.addType));1==t&&(a.taskName=this.basicTaskName,Object(m["m"])({data:a}).then((function(t){200==t.code&&(e.tableDataBasicTask=t.data||[])}))),2==t&&(a.taskName=this.affixTaskName,Object(m["l"])({data:a}).then((function(t){200==t.code&&(e.tableDataAdditionalTasks=t.data||[])}))),3===t&&(a.billsName=this.billName,Object(m["i"])({data:a}).then((function(t){e.tableDataDocument=t.data||[]})))},delTransit:function(t){var e=this;this.sceneSelectList.splice(t,1),this.dataList=[],this.sceneSelectList.forEach((function(t){e.dataList.push(t.value)}))},onChangeClick:function(t){var e=this;this.dataList.push(t.value);var a=new Set(this.dataList);this.sceneSelect=Array.from(a);var s=[];this.sceneData.forEach((function(t){e.sceneSelect.forEach((function(e){e==t.label&&s.push({label:t.value,value:t.label})}))})),this.sceneSelectList=s},delTransitNo:function(t){var e=this;this.sceneNoSelectList.splice(t,1),this.dataNoList=[],this.sceneNoSelectList.forEach((function(t){e.dataNoList.push(t.value)}))},noChangeClick:function(t){var e=this;this.dataNoList.push(t.value);var a=new Set(this.dataNoList);this.sceneNoSelect=Array.from(a);var s=[];this.sceneData.forEach((function(t){e.sceneNoSelect.forEach((function(e){e==t.label&&s.push({label:t.value,value:t.label})}))})),this.sceneNoSelectList=s},changeRowData:function(t,e,a,s){"sortBasic"==s&&(this.tableDataBasicTask[e]=t),"sortAttach"==s&&(this.tableDataAdditionalTasks[e]=t),"sortDocument"==s&&(this.tableDataDocument[e]=t);var i,n=Object(c["a"])(this.selectedData[this.btnIndex]);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.taskName===t.taskName){r[a]="sort"===a?Number(t[a]):t[a];break}}}catch(o){n.e(o)}finally{n.f()}},searchChange:function(){},examine:function(t){t.useStatus&&"已停用"!==t.useStatus?(this.examineType=0,this.examineModalTitle="停用审核"):(this.examineType=1,this.examineModalTitle="启用审核"),this.examineInfo.sceneCode=t.sceneCode,this.examineInfo.version=t.version,this.isAuditShow=!0},audit:function(t){this.isAuditShow=!0},edit:function(t){this.isModalShow=!0,this.distinguish=2,this.modelTitle="编辑场景",this.isAdd=!1,this.sceneNumber=t.sceneCode,this.editFormItem=t;var e={serverType:t.serverType,trspType:t.trspType,logisticsType:t.logisticsType};this.getTypeData(e)},remove:function(){this.isActionDel=!0},allDelClick:function(){},saveAdd:function(){var t=this,e=this;function a(){e.$Message.info("保存成功"),e.$refs.addFormItemData.resetFields(),e.$refs.formScenes.resetFields(),e.tableDataBasicTaskSort=[],e.tableDataAdditionalTasksSort=[],e.tableDataDocumentSort=[],e.sceneSelectList=[],e.sceneNoSelectList=[],e.selectedData=[],e.isModalShow=!1,e.sceneNoData=[],e.getData()}"A"!==this.addFormItem.serverType?(this.addFormItemRule.trspType=u["a"].select("运输类型"),this.addFormItemRule.logisticsType=u["a"].select("物流类型")):(this.addFormItemRule.trspType=[],this.addFormItemRule.logisticsType=[]),this.$refs.addFormItemData.validate((function(e){if(e){var s=!0;if(t.selectedData.map((function(t){t.map((function(t){void 0===t.sort&&(s=!1)}))})),s){var i=Object(n["a"])({},t.addFormItem);if(i.baseTasks=t.selectedData[1],i.affixTasks=t.selectedData[2],i.blsCodes=t.selectedData[3],i.symbiosisScenes=t.sceneSelect,i.mutexScenes=t.sceneNoSelect,"A"===t.addFormItem.serverType)t.isAdd,Object(m["a"])({data:i}).then((function(t){a()}));else{if(!t.verifyItem())return;void 0!==i.baseTasks?(t.isAdd,Object(m["a"])({data:i}).then((function(t){a()}))):t.$Message.warning("请至少选择一个基础任务！")}}else t.$Message.warning("勾选任务后必须填写排序值")}}))},verifyItem:function(){if(0==this.selectedData.length||!this.selectedData[this.btnIndex])return this.$Message.warning("请至少选择一个任务！"),!1;var t,e=[],a=Object(c["a"])(this.selectedData[this.btnIndex]);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(!s.sort&&!Number.isNaN(s.sort))return this.$Message.warning("选中任务的排序值必填！"),!1;if(!/^\d+$/.test(s.sort))return void this.$Message.warning("排序值只能是整数！");e.push(s.sort)}}catch(i){a.e(i)}finally{a.f()}return!Object(d["c"])(e)||(this.$Message.warning("选中的任务的排序值不能重复！"),!1)},saveAudit:function(){var t=this,e=Object(n["a"])({},this.examineInfo);if(1===this.examineType)if("1"===this.agree)Object(m["g"])({data:e}).then((function(e){t.$Message.info(e.message),t.isAuditShow=!1,t.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");e.message=this.reason,Object(m["f"])({data:e}).then((function(e){t.$Message.info(e.message),t.isAuditShow=!1,t.getData()}))}else if("1"===this.agree)Object(m["e"])({data:e}).then((function(e){t.$Message.info(e.message),t.isAuditShow=!1,t.getData()}));else{if(!this.reason)return void this.$Message.warning("请填写输入驳回原因！");e.message=this.reason,Object(m["d"])({data:e}).then((function(e){t.$Message.info(e.message),t.isAuditShow=!1,t.reason="",t.getData()}))}},cancelAdd:function(){this.sceneNoData=[]},detail:function(t){var e=t.sceneCode;this.$router.push({path:"/standard-mapper/scene-manage/detail",query:{sceneCode:e}})},auditStatus:function(t){this.search.examineStatus===t?this.search.examineStatus="":this.search.examineStatus=t},enableStatus:function(t){this.search.useStatus===t?this.search.useStatus="":this.search.useStatus=t},handleBtn:function(t){this.btnIndex=t+1}}},p=h,f=(a("804c"),a("2877")),b=Object(f["a"])(p,s,i,!1,null,"4eba171c",null);e["default"]=b.exports},6062:function(t,e,a){"use strict";var s=a("6d61"),i=a("6566");t.exports=s("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"7b46":function(t,e,a){"use strict";e["a"]={props:{page:{default:1}},data:function(){return{total:0,perpage:15}},created:function(){this.dataInit("judgment")},watch:{$route:function(){this.dataInit()}},methods:{paginatorInit:function(t,e){this.perpage=t,this.total=e}}}},"804c":function(t,e,a){"use strict";var s=a("c7d6"),i=a.n(s);i.a},c7d6:function(t,e,a){},da99:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"g",(function(){return i})),a.d(e,"h",(function(){return n})),a.d(e,"e",(function(){return c})),a.d(e,"f",(function(){return r})),a.d(e,"i",(function(){return o})),a.d(e,"j",(function(){return l})),a.d(e,"b",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"c",(function(){return m}));var s=[{title:"选择",align:"center",type:"selection",width:80},{title:"场景编号",align:"center",key:"sceneCode"},{title:"场景名称",align:"center",key:"sceneName"},{title:"运输类型",align:"center",key:"trspTypeTranslate"},{title:"服务类型",align:"center",key:"serverTypeTranslate"},{title:"物流类型",align:"center",key:"logisticsTypeTranslate"},{title:"创建人",align:"center",key:"createByTranslate"},{title:"创建时间",align:"center",key:"createDatetime"},{title:"审核时间",align:"center",key:"examineDatetime"},{title:"审核状态",align:"center",slot:"examineStatus"},{title:"启用状态",align:"center",slot:"useStatus"},{title:"操作",align:"center",key:"operating",slot:"action"}],i=[{title:"选择",align:"center",type:"selection",width:80},{title:"基础任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",slot:"sort",key:"sort",width:250}],n=[{title:"序号",align:"center",type:"index",width:80},{title:"基础任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",key:"sort",width:250,sortType:"asc"}],c=[{title:"选择",align:"center",type:"selection",width:80},{title:"附加任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",slot:"sort",width:250,sortType:"asc"}],r=[{title:"选择",align:"center",type:"index",width:80},{title:"附加任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",key:"sort",width:250,sortType:"asc"}],o=[{title:"选择",align:"center",type:"selection",width:80},{title:"单据名称",align:"center",key:"blsName"},{title:"排序值",align:"center",slot:"sort",width:250,sortType:"asc"}],l=[{title:"序号",align:"center",type:"index",width:80},{title:"单据名称",align:"center",key:"blsName"},{title:"排序值",align:"center",key:"sort",width:250,sortType:"asc"}],u=[{title:"序号",align:"center",type:"index"},{title:"基础任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",key:"sort"}],d=[{title:"序号",align:"center",type:"index"},{title:"附加任务名称",align:"center",key:"taskName"},{title:"排序值",align:"center",key:"sort"}],m=[{title:"序号",align:"center",type:"index"},{title:"单据名称",align:"center",key:"blsName"},{title:"排序值",align:"center",key:"sort"}]},e389:function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"a",(function(){return c})),a.d(e,"k",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"f",(function(){return d})),a.d(e,"e",(function(){return m})),a.d(e,"d",(function(){return h})),a.d(e,"m",(function(){return p})),a.d(e,"l",(function(){return f})),a.d(e,"i",(function(){return b})),a.d(e,"j",(function(){return y}));var s=a("2934"),i=a("4ec3"),n=function(t){return Object(s["c"])("".concat(i["h"],"/scene/init-scene-add"),t)},c=function(t){return Object(s["c"])("".concat(i["h"],"/scene/add"),t)},r=function(t){return Object(s["c"])("".concat(i["h"],"/scene/query-page"),t)},o=function(t){return Object(s["c"])("".concat(i["h"],"/scene/enable"),t)},l=function(t){return Object(s["c"])("".concat(i["h"],"/scene/disable"),t)},u=function(t){return Object(s["c"])("".concat(i["h"],"/scene/enable-exam-pass"),t)},d=function(t){return Object(s["c"])("".concat(i["h"],"/scene/enable-exam-fail"),t)},m=function(t){return Object(s["c"])("".concat(i["h"],"/scene/disable-exam-pass"),t)},h=function(t){return Object(s["c"])("".concat(i["h"],"/scene/disable-exam-fail"),t)},p=function(t){return Object(s["c"])("".concat(i["h"],"/scene/add/query-task-base"),t)},f=function(t){return Object(s["c"])("".concat(i["h"],"/scene/add/query-task-affix"),t)},b=function(t){return Object(s["c"])("".concat(i["h"],"/scene/add/query-bills-data"),t)},y=function(t){return Object(s["a"])("".concat(i["h"],"/scene/query-detail"),t)}}}]);