(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fa2395e"],{6062:function(t,e,a){"use strict";var n=a("6d61"),i=a("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"8a9d":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"o",(function(){return c})),a.d(e,"g",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"j",(function(){return o})),a.d(e,"u",(function(){return d})),a.d(e,"t",(function(){return u})),a.d(e,"m",(function(){return h})),a.d(e,"n",(function(){return f})),a.d(e,"r",(function(){return p})),a.d(e,"i",(function(){return C})),a.d(e,"q",(function(){return P})),a.d(e,"h",(function(){return g})),a.d(e,"l",(function(){return S})),a.d(e,"k",(function(){return b})),a.d(e,"c",(function(){return v})),a.d(e,"f",(function(){return y})),a.d(e,"s",(function(){return m})),a.d(e,"p",(function(){return T})),a.d(e,"d",(function(){return w})),a.d(e,"e",(function(){return M}));var n=a("2934"),i=a("4ec3"),s=function(t){return Object(n["c"])("".concat(i["c"],"/customer/add-freight"),t)},c=function(t){return Object(n["c"])("".concat(i["c"],"/sale/add-freight"),t)},r=function(t){return Object(n["c"])("".concat(i["c"],"/dispatch/add-freight"),t)},l=function(t){return Object(n["c"])("".concat(i["c"],"/customer/add-freight-simple"),t)},o=function(t){return Object(n["c"])("".concat(i["c"],"/customer/generate-route"),t)},d=function(t){return Object(n["c"])("".concat(i["c"],"/customer/send-sale"),t)},u=function(t){return Object(n["c"])("".concat(i["c"],"/sale/send-dispatch"),t)},h=function(t){return Object(n["a"])("".concat(i["c"],"/customer/query-detail-freight"),t)},f=function(t){return Object(n["c"])("".concat(i["c"],"/customer/query-list-freight"),t)},p=function(t){return Object(n["c"])("".concat(i["c"],"/sale/query-list-freight"),t)},C=function(t){return Object(n["c"])("".concat(i["c"],"/dispatch/query-list-freight"),t)},P=function(t){return Object(n["a"])("".concat(i["c"],"/sale/query-detail-freight"),t)},g=function(t){return Object(n["a"])("".concat(i["c"],"/dispatch/query-detail-freight"),t)},S=function(t){return Object(n["a"])("".concat(i["c"],"/customer/get-task-affix/")+t.trspType+"/"+t.logisticsType)},b=function(t){return Object(n["a"])("".concat(i["c"],"/get/generate"),t)},v=function(t){return Object(n["c"])("".concat(i["c"],"/customer/agree-scheme"),t)},y=function(t){return Object(n["c"])("".concat(i["c"],"/customer/disagree-scheme"),t)},m=function(t){return Object(n["c"])("".concat(i["c"],"/sale/refuse-recommend"),t)},T=function(t){return Object(n["c"])("".concat(i["c"],"/sale/agree-recommend"),t)},w=function(t){return Object(n["c"])("".concat(i["c"],"/dispatch/bak-sale"),t)},M=function(t){return Object(n["c"])("".concat(i["c"],"/customer/cancel"),t)}},"9efa":function(t,e,a){"use strict";var n=a("a5be"),i=a.n(n);i.a},a5be:function(t,e,a){},e160:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"simple-entry"},[a("div",{staticClass:"public-detail"},[a("div",{staticClass:"important-info"},[a("Row",[a("Col",{attrs:{span:"4"}},[a("div",{staticClass:"name"},[t._v("基础货运要求")])]),a("Col",{attrs:{span:"20"}},[t.sendShow?a("Button",{on:{click:t.send}},[t._v("发送")]):t._e(),a("Button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:function(e){return t.save("formValidate")}}},[t._v("保存")])],1)],1)],1)]),a("div",{staticClass:"public-table-content public-input"},[a("div",{staticClass:"l-content"},[a("div",{staticClass:"table-data"},[a("ul",{staticClass:"transit"},[a("p",{staticClass:"table-title"},[t._v("基本信息")]),a("Form",{ref:"formValidate",attrs:{"label-position":"left",model:t.transitModal,"label-width":100}},[a("FormItem",{staticClass:"min-width",attrs:{label:"启运地："}},[a("small",{staticClass:"rule-class"},[t._v("*")]),a("adt-city-selector",{staticStyle:{width:"120px",display:"inline-block",marginRight:"10px"},attrs:{defaultData:t.startDefault},on:{"on-change":t.handelDirStart}}),a("Select",{attrs:{filterable:"",clearable:""},on:{"on-change":t.onPlaceChange,"on-clear":t.onPlaceClear},model:{value:t.transitModal.custStartPlace,callback:function(e){t.$set(t.transitModal,"custStartPlace",e)},expression:"transitModal.custStartPlace"}},t._l(t.custStartPlace,(function(e){return a("Option",{key:e.value,attrs:{value:e.value+"-"+e.label}},[t._v(t._s(e.label))])})),1),a("span",{staticClass:"btn-ok",on:{click:t.startPlaceConfrim}},[t._v("确定")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.startHintShow,expression:"startHintShow"}],staticClass:"hint"},[t._v("请输入启运地")]),a("p",{staticClass:"select-value"},t._l(t.startPlace,(function(e,n){return a("span",{key:n},[t._v(t._s(e)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delPlaceDeparture(n)}}})],1)})),0)],1),a("FormItem",{staticClass:"min-width",attrs:{label:"目的地："}},[a("small",{staticClass:"rule-class"},[t._v("*")]),a("adt-city-selector",{staticStyle:{width:"120px",display:"inline-block",marginRight:"10px"},attrs:{defaultData:t.endDefault},on:{"on-change":t.handelDirEnd}}),a("Select",{attrs:{filterable:"",clearable:""},on:{"on-change":t.onEndPlaceChange,"on-clear":t.onEndClear},model:{value:t.transitModal.custEndPlace,callback:function(e){t.$set(t.transitModal,"custEndPlace",e)},expression:"transitModal.custEndPlace"}},t._l(t.custEndPlace,(function(e){return a("Option",{key:e.value,attrs:{value:e.value+"-"+e.label}},[t._v(t._s(e.label))])})),1),a("span",{staticClass:"btn-ok",on:{click:t.endPlaceConfrim}},[t._v("确定")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.endHintShow,expression:"endHintShow"}],staticClass:"hint"},[t._v("请输入目的地")]),a("p",{staticClass:"select-value"},t._l(t.endPlace,(function(e,n){return a("span",{key:n},[t._v(t._s(e)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delCustEndPlace(n)}}})],1)})),0)],1),a("FormItem",{staticClass:"min-width",attrs:{label:"中转地："}},[a("adt-city-selector",{staticStyle:{width:"120px",display:"inline-block",marginRight:"10px"},attrs:{defaultData:t.ctransitDefault},on:{"on-change":t.handelDirTrsspmPort}}),a("Select",{attrs:{filterable:"",clearable:""},on:{"on-change":t.onSiteChange,"on-clear":t.onSiteClear},model:{value:t.transitModal.custTransitPlace,callback:function(e){t.$set(t.transitModal,"custTransitPlace",e)},expression:"transitModal.custTransitPlace"}},t._l(t.custTransitPlace,(function(e){return a("Option",{key:e.value,attrs:{value:e.value+"-"+e.label}},[t._v(t._s(e.label))])})),1),a("span",{staticClass:"btn-ok",on:{click:t.okCustTransitPlace}},[t._v("确定")]),a("p",{staticClass:"select-value"},t._l(t.ctransitPlace,(function(e,n){return a("span",{key:n},[t._v(t._s(e)),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.delTransit(n)}}})],1)})),0)],1),a("FormItem",{attrs:{label:"货物类型：",prop:"cargoType"}},[a("Select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:t.transitModal.cargoType,callback:function(e){t.$set(t.transitModal,"cargoType",e)},expression:"transitModal.cargoType"}},t._l(t.cargoType,(function(e,n){return a("Option",{key:n,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"物流类型：",prop:"logisticsType"}},[a("Select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:t.transitModal.logisticsType,callback:function(e){t.$set(t.transitModal,"logisticsType",e)},expression:"transitModal.logisticsType"}},t._l(t.logisticsType,(function(e,n){return a("Option",{key:n,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"运输类型：",prop:"trspType"}},[a("Select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:t.transitModal.trspType,callback:function(e){t.$set(t.transitModal,"trspType",e)},expression:"transitModal.trspType"}},t._l(t.trspType,(function(e,n){return a("Option",{key:n,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1)],1)],1),a("ul",{staticClass:"transit"},[a("div",{staticClass:"table-title"},[t._v("货运要求备注：")]),a("Input",{attrs:{autosize:{minRows:3,maxRows:5},type:"textarea",placeholder:"请输入货运要求备注，500字以内！",maxlength:"500"},model:{value:t.transitModal.freightBrief,callback:function(e){t.$set(t.transitModal,"freightBrief",e)},expression:"transitModal.freightBrief"}})],1),a("div",{staticClass:"bottom"},[a("p",[t._v(" 如果需要准确匹配物流方案，请您"),a("a",{on:{click:t.detailEntryClick}},[t._v("填写详细信息")]),t._v("！ "),a("Icon",{attrs:{type:"ios-arrow-forward"}})],1)])])])]),a("adt-reconfirm-modal",{attrs:{showModal:t.isTransitModal,message:t.transitText},on:{"on-visible-change":t.visibleChange,"on-ok":t.transitConfrim}}),a("adt-reconfirm-modal",{attrs:{showModal:t.isPlaceDepartureModal,message:t.placeDepartureText},on:{"on-visible-change":t.visiblePlaceDeparture,"on-ok":t.handleConfirm,"on-cancel":t.handleCancel}})],1)},i=[],s=(a("c975"),a("a15b"),a("d81d"),a("a434"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("ddb0"),a("96cf"),a("1da1")),c=a("2909"),r=a("b962"),l=a("77ab"),o=a("8a9d"),d={name:"SimpleEntry",data:function(){return{trspType:this.$getDictionary("TRANSPORT_TYPE"),cargoType:this.$getDictionary("GOODS_TYPE"),logisticsType:this.$getDictionary("LOGISTICS_TYPE"),sendShow:!1,transitModal:{custStartPlace:"",custStartPlace1:"",custEndPlace:"",custEndPlace1:"",custTransitPlace:"",custTransitPlace1:"",cargoType:"",logisticsType:"",trspType:"",freightBrief:""},custStartPlace:[],custTransitPlace:[],custEndPlace:[],transitText:"",placeDepartureText:"",isTransitModal:!1,isPlaceDepartureModal:!1,ruleValidate:{cargoType:[r["a"].select("货物类型")[0]],logisticsType:[r["a"].select("物流类型")[0]],trspType:[r["a"].select("运输类型")[0]]},ctransitPlace:[],ctransitPlaceCode:[],startPlace:[],startPlaceCode:[],endPlace:[],endPlaceCode:[],checkList:[],addPlaceChange:!1,isStartPlaceModalShow:!1,addEndPlaceChange:!1,isEndPlaceModalShow:!1,freightReqCode:"",freightReqStatus:"",startHintShow:!1,endHintShow:!1,startCity:"",startCityCode:"",endCity:"",endCityCode:"",custTransitCity:"",custTransitCityCode:"",startSite:"",startSiteCode:"",endSite:"",endSiteCode:"",custTransitSite:"",custTransitSiteCode:"",startDefault:"",endDefault:"",ctransitDefault:"",startSiteDefault:""}},mounted:function(){this.transitText='中转地过多会导致物流方案的费用过高，<br>时效过长，如需添加请<a class="modal-a" href="">联系客服</a>',this.placeDepartureText="您增加的启运地（目的地）已超过三个， 会匹配出多条路线。是否继续增加？"},watch:{startPlaceCode:{handler:function(t){0==t.length?this.startHintShow=!0:this.startHintShow=!1},deep:!0},endPlaceCode:{handler:function(t){0==t.length?this.endHintShow=!0:this.endHintShow=!1},deep:!0}},methods:{transitConfrim:function(){this.isTransitModal=!1},startPlaceConfrim:function(){!this.isStartPlaceModalShow&&this.startPlace.length>=3&&(this.isPlaceDepartureModal=!0,this.isStartPlaceModalShow=!0,!this.addPlaceChange)||(0==this.startSite.length&&(this.startPlace.push(this.startCity),this.startPlaceCode.push(this.startCityCode)),0!=this.startSite.length&&(this.startPlace.push(this.startSite),this.startPlaceCode.push(this.startSiteCode)),this.startPlace=Object(c["a"])(new Set(this.startPlace)),this.startPlaceCode=Object(c["a"])(new Set(this.startPlaceCode)),0==this.startPlace.indexOf("")&&this.startPlace.splice(0,1),0==this.startPlaceCode.indexOf("")&&this.startPlaceCode.splice(0,1))},endPlaceConfrim:function(){!this.isEndPlaceModalShow&&this.endPlace.length>=3&&(this.isPlaceDepartureModal=!0,this.isEndPlaceModalShow=!0,!this.addEndPlaceChange)||(0==this.endSite.length&&(this.endPlace.push(this.endCity),this.endPlaceCode.push(this.endCityCode)),0!=this.endSite.length&&(this.endPlace.push(this.endSite),this.endPlaceCode.push(this.endSiteCode)),this.endPlace=Object(c["a"])(new Set(this.endPlace)),this.endPlaceCode=Object(c["a"])(new Set(this.endPlaceCode)),0==this.endPlace.indexOf("")&&this.endPlace.splice(0,1),0==this.endPlaceCode.indexOf("")&&this.endPlaceCode.splice(0,1))},okCustTransitPlace:function(){this.ctransitPlace.length>=5?this.isTransitModal=!0:(0==this.custTransitSite.length&&(this.ctransitPlace.push(this.custTransitCity),this.ctransitPlaceCode.push(this.custTransitCityCode)),0!=this.custTransitSite.length&&(this.ctransitPlace.push(this.custTransitSite),this.ctransitPlaceCode.push(this.custTransitSiteCode)),this.ctransitPlace=Object(c["a"])(new Set(this.ctransitPlace)),this.ctransitPlaceCode=Object(c["a"])(new Set(this.ctransitPlaceCode)),0==this.ctransitPlace.indexOf("")&&this.ctransitPlace.splice(0,1),0==this.ctransitPlaceCode.indexOf("")&&this.ctransitPlaceCode.splice(0,1))},_handelDir:function(t,e){return new Promise((function(e,a){var n=t[t.length-1],i=t[t.length-2];"110000000000"!=i&&"120000000000"!=i&&"500000000000"!=i&&"310000000000"!=i||(n=i),Object(l["e"])({city:n}).then((function(t){var a=t.data,n=a[0],i=n.map((function(t){return{value:t.sttnCode,label:t.sttnName}}));e(i)}))}))},handelDirStart:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0===t.data.length){a.next=7;break}return a.next=3,e._handelDir(t.value);case 3:n=a.sent,e.custStartPlace=n,e.startCity=t.data[t.data.length-1].label,e.startCityCode=t.data[t.data.length-1].value;case 7:e.startDefault=t.value.join("~");case 8:case"end":return a.stop()}}),a)})))()},onPlaceChange:function(t){if(t){var e=t.split("-")[0],a=t.split("-")[1];this.startSite=a,this.startSiteCode=e}this.startSiteDefault=t.split("-")[1]},handelDirTrsspmPort:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0==t.data.length){a.next=7;break}return a.next=3,e._handelDir(t.value);case 3:n=a.sent,e.custTransitPlace=n,e.custTransitCity=t.data[t.data.length-1].label,e.custTransitCityCode=t.data[t.data.length-1].value;case 7:e.ctransitDefault=t.value.join("~");case 8:case"end":return a.stop()}}),a)})))()},onSiteChange:function(t){if(t){var e=t.split("-")[0],a=t.split("-")[1];this.custTransitSite=a,this.custTransitSiteCode=e}},handelDirEnd:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0==t.data.length){a.next=7;break}return a.next=3,e._handelDir(t.value);case 3:n=a.sent,e.custEndPlace=n,e.endCity=t.data[t.data.length-1].label,e.endCityCode=t.data[t.data.length-1].value;case 7:e.endDefault=t.value.join("~");case 8:case"end":return a.stop()}}),a)})))()},onEndPlaceChange:function(t){if(t){var e=t.split("-")[0],a=t.split("-")[1];this.endSite=a,this.endSiteCode=e}},visibleChange:function(t){this.isTransitModal=t},visiblePlaceDeparture:function(t){this.isPlaceDepartureModal=t},save:function(t){var e=this,a=JSON.parse(JSON.stringify(this.transitModal));this.$set(a,"inputType","0"),a.custStartPlace=this.startPlaceCode,a.custTransitPlace=this.ctransitPlaceCode,a.custEndPlace=this.endPlaceCode,0===this.startPlaceCode.length?this.startHintShow=!0:this.startHintShow=!1,0===this.endPlaceCode.length?this.endHintShow=!0:this.endHintShow=!1,this.$refs[t].validate((function(t){!t||e.startHintShow||e.endHintShow||Object(o["b"])({data:a}).then((function(t){e.$Message.info(t.message),e.freightReqCode=t.data.freightReqCode,e.freightReqStatus=t.data.freightReqStatus,e.sendShow=!0}))}))},send:function(){var t=this,e={freightReqCode:this.freightReqCode,freightReqStatus:this.freightReqStatus};Object(o["u"])({data:e}).then((function(e){t.$Message.info(e.message),t.$router.push("/freight-request/list-client/1")}))},detailEntryClick:function(){this.$set(this.transitModal,"startPlaceArr",this.startPlace),this.$set(this.transitModal,"endPlaceArr",this.endPlace),this.$set(this.transitModal,"ctransitPlaceArr",this.ctransitPlace),this.$set(this.transitModal,"startPlaceCode",this.startPlaceCode),this.$set(this.transitModal,"endPlaceCode",this.endPlaceCode),this.$set(this.transitModal,"ctransitPlaceCode",this.ctransitPlaceCode),this.$set(this.transitModal,"startDefault",this.startDefault),this.$set(this.transitModal,"ctransitDefault",this.ctransitDefault),this.$set(this.transitModal,"endDefault",this.endDefault),this.$set(this.transitModal,"startSiteDefault",this.startSiteDefault);var t=JSON.stringify(this.transitModal);this.$router.push("/freight-request/detail-entry?a=".concat(t))},onPlaceClear:function(t){this.startSite="",this.startSiteCode=""},onEndClear:function(t){this.endSite="",this.endSiteCode=""},onSiteClear:function(){this.custTransitSite="",this.custTransitSiteCode=""},delTransit:function(t){this.ctransitPlace.splice(t,1),this.ctransitPlaceCode.splice(t,1)},delPlaceDeparture:function(t){this.startPlace.splice(t,1),this.startPlaceCode.splice(t,1)},delCustEndPlace:function(t){this.endPlace.splice(t,1),this.endPlaceCode.splice(t,1)},handleConfirm:function(){this.addPlaceChange=!0,this.isPlaceDepartureModal=!1},handleCancel:function(){this.isEndPlaceModalShow=!1,this.isStartPlaceModalShow=!1,this.isPlaceDepartureModal=!1}}},u=d,h=(a("9efa"),a("2877")),f=Object(h["a"])(u,n,i,!1,null,"621cbb37",null);e["default"]=f.exports}}]);