(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38c61814"],{"02ca":function(t,e,a){"use strict";var o=a("c033"),r=a.n(o);r.a},"266e":function(t,e,a){"use strict";var o=a("c37f"),r=a.n(o);r.a},"3e98":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ae-form"},[a("div",{staticClass:"public-form-content"},[a("Form",{ref:"formValidate",attrs:{"label-position":"right","label-width":152,rules:t.formItemRule,model:t.formModel}},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"24"}},[a("p",{staticClass:"item-form-title"},[t._v("基础信息")]),a("FormItem",{attrs:{label:"开始时间",prop:"startDatetime"}},[a("DatePicker",{attrs:{type:"datetime",placeholder:"Select date"},model:{value:t.formModel.startDatetime,callback:function(e){t.$set(t.formModel,"startDatetime",e)},expression:"formModel.startDatetime"}})],1)],1)],1),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"24"}},[a("p",{staticClass:"item-form-title"},[t._v("货物信息")]),a("div",{staticClass:"public-line"}),a("div",{staticClass:"scroll-box"},[a("cargo-info",{on:{cargoInfoItem:t.cargoInfoItem_m}})],1)])],1)],1)],1)])},r=[],l=(a("d81d"),a("77ab")),s=a("b962"),n=a("c1df"),i=a.n(n),m=a("649f"),c=a("8f27"),d={name:"ae-form",mixins:[c["a"]],props:{okBack:{type:Object,default:function(){return{}}}},components:{CargoInfo:m["a"]},data:function(){return{formModel:{},formItemRule:{startDatetime:[{required:!0,validator:s["a"].validateTime,trigger:"change"}]}}},created:function(){},methods:{saveForm:function(){var t=this;this.$refs.formValidate.validate((function(e){e?t._add():t.$Message.error("必填项没填!")}))},_add:function(){var t=this,e=i()(this.formModel.startDatetime).valueOf(),a=this.CargoInfoList.map((function(t){return{cargoName:t.cargoName,cargoVol:+t.cargoVol||0,cargoQty:+t.cargoQty||0,grossWeight:+t.grossWeight||0,weightUnit:"kg",hsCode:t.hsCode,markNo:t.markNo,netWeight:+t.netWeight||0,vodUnit:"m³",suitcaseQty:+t.suitcaseQty||0,cargoCode:t.cargoCode,entrustPackagingReqList:[{grossWeight:+t.grossWeight0||0,netWeight:+t.netWeight0||0,packPcode:"0",packQty:+t.packQty0||0,packType:t.packType0,packVol:+t.packVol0||0},{grossWeight:+t.grossWeight1||0,netWeight:+t.netWeight1||0,packPcode:"1",packQty:+t.packQty1||0,packType:t.packType1,packVol:+t.packVol1||0}]}})),o={entrustCode:this.okBack.entrustCode,entrustExcetoryIOnceReqList:[{startDatetime:e,entrustExcetoryType:0,entrustCargoReq:a}]};Object(l["d"])({data:o}).then((function(e){e.data;t.$Message.success("操作成功,请在详情页查看"),t.$router.push("/logisstics-commission/one-logistics/1"),Object(l["m"])({entrustCode:t.okBack.entrustCode}).then((function(t){t.data}))}))}}},p=d,u=(a("02ca"),a("2877")),f=Object(u["a"])(p,o,r,!1,null,"779c97a4",null);e["a"]=f.exports},c033:function(t,e,a){},c37f:function(t,e,a){},f1c9:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ae-form"},[a("div",{staticClass:"public-form-content"},[a("Form",{ref:"formValidate",attrs:{"label-position":"right","label-width":152,rules:t.formItemRule,model:t.formModel}},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"18"}},[a("Col",{attrs:{span:"8"}},[a("p",{staticClass:"item-form-title"},[t._v("发货人信息")]),a("FormItem",{attrs:{label:"发货人名称：",prop:"FattenName"}},[a("Input",{model:{value:t.formModel.FattenName,callback:function(e){t.$set(t.formModel,"FattenName",e)},expression:"formModel.FattenName"}})],1),a("FormItem",{attrs:{label:"代码："}},[a("Input",{model:{value:t.formModel.Fcode,callback:function(e){t.$set(t.formModel,"Fcode",e)},expression:"formModel.Fcode"}})],1),a("FormItem",{attrs:{label:"地址：",prop:"FattenAddr"}},[a("Input",{model:{value:t.formModel.FattenAddr,callback:function(e){t.$set(t.formModel,"FattenAddr",e)},expression:"formModel.FattenAddr"}})],1),a("FormItem",{attrs:{label:"电话：",prop:"FattenTel"}},[a("Input",{model:{value:t.formModel.FattenTel,callback:function(e){t.$set(t.formModel,"FattenTel",e)},expression:"formModel.FattenTel"}})],1),a("FormItem",{attrs:{label:"传真："}},[a("Input",{model:{value:t.formModel.FattenFax,callback:function(e){t.$set(t.formModel,"FattenFax",e)},expression:"formModel.FattenFax"}})],1),a("FormItem",{attrs:{label:"邮箱："}},[a("Input",{model:{value:t.formModel.FattenEmail,callback:function(e){t.$set(t.formModel,"FattenEmail",e)},expression:"formModel.FattenEmail"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("p",{staticClass:"item-form-title"},[t._v("收货人信息")]),a("FormItem",{attrs:{label:"收货人名称：",prop:"SattenName"}},[a("Input",{model:{value:t.formModel.SattenName,callback:function(e){t.$set(t.formModel,"SattenName",e)},expression:"formModel.SattenName"}})],1),a("FormItem",{attrs:{label:"代码："}},[a("Input",{model:{value:t.formModel.Scode,callback:function(e){t.$set(t.formModel,"Scode",e)},expression:"formModel.Scode"}})],1),a("FormItem",{attrs:{label:"地址：",prop:"SattenAddr"}},[a("Input",{model:{value:t.formModel.SattenAddr,callback:function(e){t.$set(t.formModel,"SattenAddr",e)},expression:"formModel.SattenAddr"}})],1),a("FormItem",{attrs:{label:"电话：",prop:"SattenTel"}},[a("Input",{model:{value:t.formModel.SattenTel,callback:function(e){t.$set(t.formModel,"SattenTel",e)},expression:"formModel.SattenTel"}})],1),a("FormItem",{attrs:{label:"传真："}},[a("Input",{model:{value:t.formModel.SattenFax,callback:function(e){t.$set(t.formModel,"SattenFax",e)},expression:"formModel.SattenFax"}})],1),a("FormItem",{attrs:{label:"邮箱："}},[a("Input",{model:{value:t.formModel.SattenEmail,callback:function(e){t.$set(t.formModel,"SattenEmail",e)},expression:"formModel.SattenEmail"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("p",{staticClass:"item-form-title"},[t._v("通知人信息")]),a("FormItem",{attrs:{label:"通知人名称：",prop:"TattenName"}},[a("Input",{model:{value:t.formModel.TattenName,callback:function(e){t.$set(t.formModel,"TattenName",e)},expression:"formModel.TattenName"}})],1),a("FormItem",{attrs:{label:"代码："}},[a("Input",{model:{value:t.formModel.Tcode,callback:function(e){t.$set(t.formModel,"Tcode",e)},expression:"formModel.Tcode"}})],1),a("FormItem",{attrs:{label:"地址：",prop:"TattenAddr"}},[a("Input",{model:{value:t.formModel.TattenAddr,callback:function(e){t.$set(t.formModel,"TattenAddr",e)},expression:"formModel.TattenAddr"}})],1),a("FormItem",{attrs:{label:"电话：",prop:"TattenTel"}},[a("Input",{model:{value:t.formModel.TattenTel,callback:function(e){t.$set(t.formModel,"TattenTel",e)},expression:"formModel.TattenTel"}})],1),a("FormItem",{attrs:{label:"传真："}},[a("Input",{model:{value:t.formModel.TattenFax,callback:function(e){t.$set(t.formModel,"TattenFax",e)},expression:"formModel.TattenFax"}})],1),a("FormItem",{attrs:{label:"邮箱：",prop:"TattenEmail"}},[a("Input",{model:{value:t.formModel.TattenEmail,callback:function(e){t.$set(t.formModel,"TattenEmail",e)},expression:"formModel.TattenEmail"}})],1)],1)],1),a("Col",{attrs:{span:"6"}},[a("p",{staticClass:"item-form-title"},[t._v("服务参数")]),a("FormItem",{attrs:{label:"运输类型：",prop:"trspType"}},[a("Select",{attrs:{clearable:""},model:{value:t.planForm.trspType,callback:function(e){t.$set(t.planForm,"trspType",e)},expression:"planForm.trspType"}},t._l(t.trspTypeList,(function(e,o){return a("Option",{key:o,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"集装箱尺寸："}},[a("Select",{attrs:{clearable:""},model:{value:t.planForm.contaSize,callback:function(e){t.$set(t.planForm,"contaSize",e)},expression:"planForm.contaSize"}},t._l(t.contaSizeList,(function(e,o){return a("Option",{key:o,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"集装箱来源："}},[a("Select",{attrs:{clearable:""},model:{value:t.planForm.containerSource,callback:function(e){t.$set(t.planForm,"containerSource",e)},expression:"planForm.containerSource"}},t._l(t.containerSourceList,(function(e,o){return a("Option",{key:o,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"委托周期：",prop:"entrustPeriod"}},[a("Input",{model:{value:t.formModel.entrustPeriod,callback:function(e){t.$set(t.formModel,"entrustPeriod",e)},expression:"formModel.entrustPeriod"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("天")])])],1),a("FormItem",{attrs:{label:"合同委托有效期：",prop:"entrustPeriod"}},[a("DatePicker",{attrs:{type:"datetimerange",placeholder:"Select date"},model:{value:t.timeArr,callback:function(e){t.timeArr=e},expression:"timeArr"}})],1),a("FormItem",{attrs:{label:"货物总量：",prop:"cargoTotal"}},[a("Input",{model:{value:t.formModel.cargoTotal,callback:function(e){t.$set(t.formModel,"cargoTotal",e)},expression:"formModel.cargoTotal"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("kg")])])],1)],1)],1),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"18"}},[a("p",{staticClass:"item-form-title"},[t._v("货物信息")]),a("div",{staticClass:"public-line"}),a("div",{staticClass:"scroll-box"},[a("cargo-info",{on:{cargoInfoItem:t.cargoInfoItem}},[a("template",{slot:"btns-end"},[a("span",[t._v("货物类型：")]),a("span",[a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.planForm.cargoType,callback:function(e){t.$set(t.planForm,"cargoType",e)},expression:"planForm.cargoType"}},t._l(t.cargoTypeList,(function(e){return a("Option",{key:e.dictionaryKey,attrs:{value:e.dictionaryKey}},[t._v(" "+t._s(e.dictionaryValue)+" ")])})),1)],1)])],2)],1)]),a("Col",{attrs:{span:"6"}},[a("p",{staticClass:"item-form-title"},[t._v("运输要求")]),a("FormItem",{attrs:{label:"主要运输方式："}},[a("Select",{attrs:{clearable:""},model:{value:t.planForm.trspMode,callback:function(e){t.$set(t.planForm,"trspMode",e)},expression:"planForm.trspMode"}},t._l(t.trspModeList,(function(e,o){return a("Option",{key:o,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"物流类型："}},[a("Select",{attrs:{clearable:""},model:{value:t.planForm.logisticsType,callback:function(e){t.$set(t.planForm,"logisticsType",e)},expression:"planForm.logisticsType"}},t._l(t.logisticsTypeList,(function(e,o){return a("Option",{key:o,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"提箱类型："}},[a("Select",{attrs:{clearable:""},model:{value:t.planForm.suitcaseType,callback:function(e){t.$set(t.planForm,"suitcaseType",e)},expression:"planForm.suitcaseType"}},t._l(t.suitcaseTypeList,(function(e,o){return a("Option",{key:o,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"集装箱数量："}},[a("Input",{model:{value:t.planForm.suitcaseQty,callback:function(e){t.$set(t.planForm,"suitcaseQty",e)},expression:"planForm.suitcaseQty"}})],1),a("FormItem",{attrs:{label:"货物适宜温度："}},[a("Input",{model:{value:t.planForm.setTemperatureAt,callback:function(e){t.$set(t.planForm,"setTemperatureAt",e)},expression:"planForm.setTemperatureAt"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("℃")])])],1),a("FormItem",{attrs:{label:"出口报关地："}},[a("Cascader",{attrs:{data:t.cityList},model:{value:t.planForm.exPort,callback:function(e){t.$set(t.planForm,"exPort",e)},expression:"planForm.exPort"}})],1),a("FormItem",{attrs:{label:"进口报关地："}},[a("Cascader",{attrs:{data:t.cityList},model:{value:t.planForm.imPort,callback:function(e){t.$set(t.planForm,"imPort",e)},expression:"planForm.imPort"}})],1),a("FormItem",{attrs:{label:"最迟启运时间："}},[a("DatePicker",{attrs:{type:"datetime",placeholder:"Select date"},model:{value:t.formModel.lastStartTime,callback:function(e){t.$set(t.formModel,"lastStartTime",e)},expression:"formModel.lastStartTime"}})],1),a("FormItem",{attrs:{label:"最低时长要求："}},[a("Input",{model:{value:t.planForm.lowestTimeReq,callback:function(e){t.$set(t.planForm,"lowestTimeReq",e)},expression:"planForm.lowestTimeReq"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("天")])])],1),a("FormItem",{attrs:{label:"最高费用要求："}},[a("Input",{model:{value:t.planForm.highestCostReq,callback:function(e){t.$set(t.planForm,"highestCostReq",e)},expression:"planForm.highestCostReq"}})],1),a("FormItem",{attrs:{label:"预计货好时间：",prop:"cargoReadyTime"}},[a("DatePicker",{attrs:{type:"datetime",placeholder:"Select date"},model:{value:t.formModel.cargoReadyTime,callback:function(e){t.$set(t.formModel,"cargoReadyTime",e)},expression:"formModel.cargoReadyTime"}})],1),a("FormItem",{attrs:{label:"最晚到达时间："}},[a("DatePicker",{attrs:{type:"datetime",placeholder:"Select date"},model:{value:t.formModel.lastArriveTime,callback:function(e){t.$set(t.formModel,"lastArriveTime",e)},expression:"formModel.lastArriveTime"}})],1),a("FormItem",{attrs:{label:"合同编号："}},[a("Input",{model:{value:t.formModel.contractCode,callback:function(e){t.$set(t.formModel,"contractCode",e)},expression:"formModel.contractCode"}})],1),a("FormItem",{attrs:{label:"备注："}},[a("Input",{model:{value:t.formModel.remark,callback:function(e){t.$set(t.formModel,"remark",e)},expression:"formModel.remark"}})],1)],1)],1)],1)],1)])},r=[],l=(a("a15b"),a("d81d"),a("77ab")),s=a("b962"),n=a("c1df"),i=a.n(n),m=a("be84"),c=a("8f27"),d=a("c9c1"),p={name:"ae-form",mixins:[c["a"],d["a"]],props:{planData:{type:Object,default:function(){return{}}}},components:{CargoInfo:m["a"]},data:function(){return{trspTypeList:this.$getDictionary("TRANSPORT_TYPE"),contaSizeList:this.$getDictionary("CONTAINER_SIZE_TYPE"),containerSourceList:this.$getDictionary("CONTAINER_SOURCE"),trspModeList:this.$getDictionary("TRANSPORT_MODE"),logisticsTypeList:this.$getDictionary("LOGISTICS_TYPE"),suitcaseTypeList:this.$getDictionary("SUITCASE_TYPE"),cargoTypeList:this.$getDictionary("GOODS_TYPE"),timeArr:[],formModel:{},CargoInfoList:[],planForm:{cargoType:"G",trspType:"",contaSize:"",containerSource:"",trspMode:"1",logisticsType:"I",suitcaseType:"Y",suitcaseQty:null,setTemperatureAt:null,lowestTimeReq:null,highestCostReq:""},formItemRule:{FattenName:[s["a"].required("名称")[0]],FattenAddr:[s["a"].required("地址")[0]],FattenTel:[s["a"].required("电话")[0]],SattenName:[s["a"].required("名称")[0]],SattenAddr:[s["a"].required("地址")[0]],SattenTel:[s["a"].required("电话")[0]],TattenName:[s["a"].required("名称")[0]],TattenAddr:[s["a"].required("地址")[0]],TattenTel:[s["a"].required("电话")[0]],TattenEmail:[s["a"].required("邮箱")[0]],bitian:[s["a"].required("")[0]],entrustPeriod:[s["a"].required("")[0]],cargoTotal:[s["a"].required("")[0]],connum:[s["a"].required("")[0],s["a"].number()[0]],cargoReadyTime:[{required:!0,validator:s["a"].validateTime,trigger:"change"}]}}},created:function(){this._initData(),this.getCity_m()},methods:{_initData:function(){},cargoInfoItem:function(t){this.CargoInfoList=t},_add:function(){var t=this,e=this.CargoInfoList.map((function(e){return{cargoName:e.cargoName,cargoType:t.planForm.cargoType,cargoVol:e.cargoVol,cargoQty:+e.cargoQty||0,grossWeight:e.grossWeight,weightUnit:"kg",hsCode:e.hsCode,markNo:e.markNo,netWeight:+e.netWeight||0,vodUnit:"m³",entrustPackagingReqList:[{grossWeight:+e.grossWeight0,netWeight:+e.netWeight0||0,packPcode:"0",packQty:+e.packQty0||0,packType:e.packType0,packVol:+e.packVol0||0},{grossWeight:+e.grossWeight1||0,netWeight:+e.netWeight1||0,packPcode:"1",packQty:+e.packQty1||0,packType:e.packType1,packVol:+e.packVol1||0}]}}));this._process_datetimerange();var a=i()(this.formModel.cargoReadyTime).valueOf(),o=i()(this.formModel.lastStartTime).valueOf(),r=i()(this.formModel.lastArriveTime).valueOf(),s={contactReqList:[{attenAddr:this.formModel.FattenAddr,attenEmail:this.formModel.FattenEmail||null,attenFax:this.formModel.FattenFax,attenName:this.formModel.FattenName,attenTel:this.formModel.FattenTel,linkType:"发货人",code:this.formModel.Fcode},{attenAddr:this.formModel.SattenAddr,attenEmail:this.formModel.SattenEmail||null,attenFax:this.formModel.SattenFax,attenName:this.formModel.SattenName,attenTel:this.formModel.SattenTel,linkType:"收货人",code:this.formModel.Scode},{attenAddr:this.formModel.TattenAddr,attenEmail:this.formModel.TattenEmail||null,attenFax:this.formModel.TattenFax,attenName:this.formModel.TattenName,attenTel:this.formModel.TattenTel,linkType:"通知人",code:this.formModel.Tcode}],entrustCargoReq:e,transportationAskReq:{cargoReadyTime:a,contaSize:this.planForm.contaSize,containerSource:this.planForm.containerSource,curr:this.formModel.curr,exPort:this.planForm.exPort?this.planForm.exPort.join(";"):"",highestCostReq:+this.planForm.highestCostReq||0,imPort:this.planForm.imPort?this.planForm.imPort.join(";"):"",lastStartTime:o,logisticsType:this.planForm.logisticsType,lowestTimeReq:+this.planForm.lowestTimeReq||0,lowestTimeUnit:"天",setTemperatureAt:+this.planForm.setTemperatureAt||0,setTemperatureUnit:"°C",suitcaseQty:+this.planForm.suitcaseQty||0,suitcaseType:this.planForm.suitcaseType,trspMode:this.planForm.trspMode,trspType:this.planForm.trspType,remark:this.formModel.remark,lastArriveTime:r,startPeriod:this.formModel.startTime,untilPeriod:this.formModel.endTime,cargoTotal:+this.formModel.cargoTotal||0,entrustPeriod:+this.formModel.entrustPeriod||0},trsspmPort:this.planData.routeLists.map((function(t){return t.departurePort})),contractCode:this.formModel.contractCode,departurePort:this.planData.routeLists[0].departurePort,destinationPort:this.planData.routeLists[this.planData.routeLists.length-1].destinationPort,freightReqCode:this.planData.freightReqCode,logisticsSchemeCode:this.planData.logisticsSchemeCode,isDisciplinarian:0,vodUnit:"m³",weightUnit:"kg"};Object(l["c"])({data:s}).then((function(e){var a=e.data;t.$Message.success("新增成功"),t.$store.commit("logisticsCommission/commitLawCallback",a),t.$emit("handelDisble",a)})).catch((function(t){}))},_process_datetimerange:function(){this.timeArr&&this.timeArr.length&&(this.formModel.startTime=i()(this.timeArr[0]).valueOf(),this.formModel.endTime=i()(this.timeArr[1]).valueOf())}}},u=p,f=(a("266e"),a("2877")),T=Object(f["a"])(u,o,r,!1,null,"26772310",null);e["a"]=T.exports}}]);