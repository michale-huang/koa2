(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed339a72"],{5674:function(t,e,a){"use strict";var r=a("d733"),s=a.n(r);s.a},6520:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"freight-request"},[a("adt-btns",{attrs:{titleNames:t.titleTabNames,btnIndex:t.btnIndex,width:160},on:{handleBtn:t.goToOtherProductList}}),a("adt-search-folder",{attrs:{searchRouter:{query:{cargoType:t.search.cargoType,createBy:t.search.createBy,enterpriseCode:t.search.enterpriseCode,freightReqStatus:t.statusValue,departurePort:t.search.departurePort,destinationPort:t.search.destinationPort,trspType:t.search.trspType,trsspmPort:t.search.trsspmPort}},isTitle:!1,isStatus:!0}},[a("template",{slot:"status"},[a("div",{staticClass:"status"},[a("div",{staticClass:"status-left"},[a("p",[a("i",[t._v("*")]),t._v(" 货运要求状态:")]),t._l(t.auditStatusList,(function(e,r){return a("span",{key:r,class:{"click-status":t.auditStatusNum==r},on:{click:function(a){return t.auditStatus(r,e)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2)])]),a("template",{slot:"always-show"},[a("div",{staticClass:"public-transit"},[a("Form",{ref:"search",attrs:{inline:"","label-colon":"",model:t.search}},[a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"min-width",attrs:{label:"启运地"}},[a("adt-city-selector",{on:{"on-change":t.handelDirStart}})],1),a("FormItem",{attrs:{label:"选择场所"}},[a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.search.departurePort,callback:function(e){t.$set(t.search,"departurePort",e)},expression:"search.departurePort"}},t._l(t.departurePort,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"min-width",attrs:{label:"中转地"}},[a("adt-city-selector",{on:{"on-change":t.handelDirTrsspmPort}})],1),a("FormItem",{attrs:{label:"选择场所"}},[a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.search.trsspmPort,callback:function(e){t.$set(t.search,"trsspmPort",e)},expression:"search.trsspmPort"}},t._l(t.trsspmPort,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"min-width",attrs:{label:"目的地"}},[a("adt-city-selector",{on:{"on-change":t.handelDirEnd}})],1),a("FormItem",{attrs:{label:"选择场所"}},[a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.search.destinationPort,callback:function(e){t.$set(t.search,"destinationPort",e)},expression:"search.destinationPort"}},t._l(t.destinationPort,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"运输类型"}},[a("Select",{attrs:{clearable:""},model:{value:t.search.trspType,callback:function(e){t.$set(t.search,"trspType",e)},expression:"search.trspType"}},t._l(t.trspType,(function(e,r){return a("Option",{key:r,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"货物类型"}},[a("Select",{attrs:{clearable:""},model:{value:t.search.cargoType,callback:function(e){t.$set(t.search,"cargoType",e)},expression:"search.cargoType"}},t._l(t.cargoType,(function(e,r){return a("Option",{key:r,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"企业名称"}},[a("Input",{attrs:{type:"text"},model:{value:t.search.enterpriseCode,callback:function(e){t.$set(t.search,"enterpriseCode",e)},expression:"search.enterpriseCode"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"创建人"}},[a("Input",{attrs:{type:"text"},model:{value:t.search.createBy,callback:function(e){t.$set(t.search,"createBy",e)},expression:"search.createBy"}})],1)],1)],1)],1)],1)])],2),a("div",{staticClass:"btns-paginator"},[a("AdtButton",[a("Button",{on:{click:t.addFreight}},[t._v("新建货运要求"),a("Icon",{attrs:{type:"ios-add-circle-outline"}})],1)],1),a("adt-paginator",{attrs:{currentPage:~~t.page,total:~~t.total,size:3}})],1),a("div",{staticClass:"public-component-line"}),a("div",{staticClass:"public-list"},t._l(t.listData,(function(e,r){return a("Col",{key:r,staticClass:"public-component-card public-card-width",attrs:{span:"24"}},[a("adt-list-item",{attrs:{data:e,showCheckbox:!0},on:{checkData:t.checkData}},[a("template",{slot:"tab-title"},[a("span",[t._v("货运要求编号:"+t._s(e.freightReqCode))])]),a("template",{slot:"tab-operat"},[a("span",{staticClass:"card-status-success",class:{"card-status-error":"未同意方案"==e.freightReqStatus,"card-status":"取消货运要求"==e.freightReqStatus}},[t._v(t._s(e.freightReqStatus))]),a("Poptip",{staticClass:"card-icon",attrs:{placement:"right-start"}},[a("span",[t._v("编辑要求")]),a("Icon",{attrs:{type:"md-arrow-dropdown"}}),"1"===t.queryType?a("div",{staticClass:"card-poptip-font",attrs:{slot:"content"},slot:"content"},[a("div",{on:{click:function(a){return t.detail(e)}}},[t._v("查看详情")]),"待销售处理"===e.freightReqStatus?a("div",{on:{click:function(a){return t.send(e)}}},[t._v("发送要求")]):t._e(),"已同意方案"===e.freightReqStatus?a("div",{on:{click:function(a){return t.viewRecommendations(e)}}},[t._v("查看推荐方案")]):t._e(),"已反馈方案"===e.freightReqStatus||"调度已反馈方案"===e.freightReqStatus?a("div",{on:{click:function(a){return t.ViewLogisticsSolution(e)}}},[t._v("查看物流方案")]):t._e()]):a("div",{staticClass:"card-poptip-font",attrs:{slot:"content"},slot:"content"},[a("div",{on:{click:function(a){return t.detailSelf(e)}}},[t._v("查看详情")]),"未发送"===e.freightReqStatus||"取消货运要求"===e.freightReqStatus?a("div",{on:{click:function(a){return t.send(e)}}},[t._v("发送要求")]):t._e(),"待调度处理"===e.freightReqStatus||"调度已反馈方案"===e.freightReqStatus||"未同意方案"===e.freightReqStatus||"已同意方案"===e.freightReqStatus?a("div",{on:{click:function(a){return t.cancel(e)}}},[t._v("取消要求")]):t._e(),"已同意方案"===e.freightReqStatus?a("div",{on:{click:function(a){return t.viewRecommendations(e)}}},[t._v("查看推荐方案")]):t._e()])],1)],1),a("template",{slot:"tab-content"},[a("div",{staticClass:"public-modify-record data-item tab-content"},[e.freightRouteList?a("div",{staticClass:"collapse"},[a("Collapse",{attrs:{accordion:""}},[a("Panel",{attrs:{name:"1"}},[a("Row",[a("Col",{attrs:{span:"22"}},[a("ul",t._l(e.freightRouteList[0].roadList,(function(r,s){return a("li",{key:s},[a("span",{staticClass:"path"},[t._v(t._s(r.departurePort))]),a("span",{staticClass:"desc"},[t._v(t._s(r.serverParam.logisticsType)+"-"+t._s(r.serverParam.trspType))]),a("svg",{staticClass:"iconfont icon-arrows",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{fill:"#02ADB5","xlink:href":"#icon-andaotongV3ICON_zhi"}})]),s===e.freightRouteList[0].roadList.length-1?[a("span",{staticClass:"path last-path"},[t._v(t._s(r.destinationPort))])]:t._e()],2)})),0),a("p",{staticClass:"status"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:"0"===e.freightRouteList[0].matchScheme,expression:"product.freightRouteList[0].matchScheme === '0'"}],attrs:{type:"ios-information-circle"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:"1"===e.freightRouteList[0].matchScheme,expression:"product.freightRouteList[0].matchScheme === '1'"}],attrs:{type:"ios-checkmark-circle"}}),t._v(" "+t._s("0"===e.freightRouteList[0].matchScheme?"未匹配到物流方案":"已匹配到物流方案")+" ")],1)]),a("Col",{attrs:{span:"2"}})],1),a("div",{attrs:{slot:"content"},slot:"content"},t._l(e.freightRouteList,(function(e,r){return a("Row",{directives:[{name:"show",rawName:"v-show",value:0!==r,expression:"index !== 0"}],key:r,staticClass:"content-row"},[a("Col",{attrs:{span:"22"}},[a("ul",t._l(e.roadList,(function(r,s){return a("li",{key:s},[a("span",{staticClass:"path"},[t._v(t._s(r.departurePort))]),a("span",{staticClass:"desc"},[t._v(t._s(r.serverParam.logisticsType)+"-"+t._s(r.serverParam.trspType))]),a("svg",{staticClass:"iconfont icon-arrows",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{fill:"#02ADB5","xlink:href":"#icon-andaotongV3ICON_zhi"}})]),s===e.roadList.length-1?[a("span",{staticClass:"path last-path"},[t._v(t._s(r.destinationPort))])]:t._e()],2)})),0),a("p",{staticClass:"status"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:"0"===e.matchScheme,expression:"itemList.matchScheme === '0'"}],attrs:{type:"ios-information-circle"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:"1"===e.matchScheme,expression:"itemList.matchScheme === '1'"}],attrs:{type:"ios-checkmark-circle"}}),t._v(" "+t._s("0"===e.matchScheme?"未匹配到物流方案":"已匹配到物流方案")+" ")],1)])],1)})),1)],1)],1)],1):t._e()])]),a("template",{slot:"tab-bottom"},[a("div",{staticClass:"tab-bottom"},[a("Row",[a("Col",{attrs:{span:"24"}},[t._v("录入时间："+t._s(t.timestampFormat(e.createDatetime)))])],1)],1)])],2)],1)})),1)],1)},s=[],n=(a("4160"),a("c975"),a("d81d"),a("a434"),a("d3b7"),a("ac1f"),a("841c"),a("159b"),a("5530")),i=(a("96cf"),a("1da1")),c=a("77ab"),o=(a("e56e"),a("7b46")),u=a("b620"),l=a("8a9d"),h=a("90fe"),d={mixins:[o["a"]],components:{AdtListItem:u["a"]},data:function(){return{trspType:this.$getDictionary("TRANSPORT_TYPE")||[],cargoType:this.$getDictionary("GOODS_TYPE")||[],auditStatusList:this.$getDictionary("FREIGHTREQ_STATUS"),btnIndex:1,titleTabNames:["接收的要求","录入的要求"],dataValue:[],search:{departurePort:"",destinationPort:"",trsspmPort:"",trspType:"",cargoType:"",createBy:"",enterpriseCode:""},departurePort:[],trsspmPort:[],destinationPort:[],freightReqParam:{},listData:[],selectList:{},transitLoading:!1,transitData:[],transitSelect:[],checkList:[],auditStatusNum:"0",statusValue:"PENDSALE",queryType:"1"}},mounted:function(){this.auditStatusList.forEach((function(t,e,a){"未发送"===t.dictionaryValue&&a.splice(t,1)}))},methods:{timestampFormat:function(t){return Object(h["e"])(t)},_handelDir:function(t,e){return new Promise((function(e,a){var r=t[t.length-1],s=t[t.length-2];"110000000000"!=s&&"120000000000"!=s&&"500000000000"!=s&&"310000000000"!=s||(r=s),Object(c["e"])({city:r}).then((function(t){var a=t.data,r=a[0],s=r.map((function(t){return{value:t.sttnCode,label:t.sttnName}}));e(s)}))}))},handelDirStart:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e._handelDir(t.value);case 2:r=a.sent,e.departurePort=r;case 4:case"end":return a.stop()}}),a)})))()},handelDirTrsspmPort:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e._handelDir(t.value);case 2:r=a.sent,e.trsspmPort=r;case 4:case"end":return a.stop()}}),a)})))()},handelDirEnd:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e._handelDir(t.value);case 2:r=a.sent,e.destinationPort=r;case 4:case"end":return a.stop()}}),a)})))()},edit:function(t){},detail:function(t){"调度已反馈方案"===t.freightReqStatus?this.$router.push({path:"/freight-request/sale-to-edit/".concat(t.freightReqCode),query:{sign:"show"}}):this.$router.push("/freight-request/sale-to-edit/".concat(t.freightReqCode))},detailSelf:function(t){"调度已反馈方案"===t.freightReqStatus?this.$router.push({path:"/freight-request/feedback-detail/".concat(t.freightReqCode),query:{sign:"show"}}):this.$router.push("/freight-request/feedback-detail/".concat(t.freightReqCode))},ViewLogisticsSolution:function(t){window.localStorage.setItem("freightData",JSON.stringify(t)),this.$router.push({path:"/logistics-solutions/customer-service-plan/1",query:{sign:"viewLogisticsSolution"}})},viewRecommendations:function(t){window.localStorage.setItem("freightData",JSON.stringify(t)),this.$router.push({path:"/logistics-solutions/customer-service-plan/1",query:{sign:"viewRecommendations"}})},addFreight:function(){this.$router.push("/freight-request/sale-entry")},checkData:function(t,e){t&&e?this.checkList.push(t):t&&!e&&this.checkList.splice(this.checkList.indexOf(t),1),this.selectList={params:this.checkList}},auditStatus:function(t,e){this.auditStatusNum=t,this.statusValue=e.dictionaryKey},dataInit:function(){this.getData()},getData:function(){var t=this,e=Object(n["a"])({size:3,page:this.page,freightReqStatus:this.statusValue},this.search,{queryType:this.queryType});Object(l["r"])({data:e}).then((function(e){if(null==e.data)return t.listData=[],t.total=0,!1;t.listData=e.data.content,t.total=e.data.totalElements}))},send:function(t){var e=this,a={freightReqCode:t.freightReqCode,freightReqStatus:t.freightReqStatus};Object(l["t"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},goToOtherProductList:function(t){switch(this.btnIndex=t+1,t){case 0:this.queryType="1",this.statusValue="PENDSALE",this.auditStatusList.forEach((function(t,e,a){"未发送"===t.dictionaryValue&&a.splice(t,1)})),this.auditStatusList.push({dictionaryKey:"PENDSALE",dictionaryValue:"待销售处理"},{dictionaryKey:"BKSM",dictionaryValue:"已反馈方案"}),this.getData();break;case 1:this.auditStatusList.forEach((function(t,e,a){"待销售处理"===t.dictionaryValue&&a.splice(t,1),"已反馈方案"===t.dictionaryValue&&a.splice(t,1)})),this.auditStatusList.unshift({dictionaryKey:"UNSENT",dictionaryValue:"未发送"}),this.statusValue="UNSENT",this.queryType="0",this.getData();break}}}},p=d,f=(a("5674"),a("2877")),m=Object(f["a"])(p,r,s,!1,null,"42b9b8c4",null);e["default"]=m.exports},"7b46":function(t,e,a){"use strict";e["a"]={props:{page:{default:1}},data:function(){return{total:0,perpage:15}},created:function(){this.dataInit("judgment")},watch:{$route:function(){this.dataInit()}},methods:{paginatorInit:function(t,e){this.perpage=t,this.total=e}}}},"8a9d":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"o",(function(){return i})),a.d(e,"g",(function(){return c})),a.d(e,"b",(function(){return o})),a.d(e,"j",(function(){return u})),a.d(e,"u",(function(){return l})),a.d(e,"t",(function(){return h})),a.d(e,"m",(function(){return d})),a.d(e,"n",(function(){return p})),a.d(e,"r",(function(){return f})),a.d(e,"i",(function(){return m})),a.d(e,"q",(function(){return g})),a.d(e,"h",(function(){return v})),a.d(e,"l",(function(){return b})),a.d(e,"k",(function(){return y})),a.d(e,"c",(function(){return _})),a.d(e,"f",(function(){return C})),a.d(e,"s",(function(){return k})),a.d(e,"p",(function(){return S})),a.d(e,"d",(function(){return w})),a.d(e,"e",(function(){return R}));var r=a("2934"),s=a("4ec3"),n=function(t){return Object(r["c"])("".concat(s["c"],"/customer/add-freight"),t)},i=function(t){return Object(r["c"])("".concat(s["c"],"/sale/add-freight"),t)},c=function(t){return Object(r["c"])("".concat(s["c"],"/dispatch/add-freight"),t)},o=function(t){return Object(r["c"])("".concat(s["c"],"/customer/add-freight-simple"),t)},u=function(t){return Object(r["c"])("".concat(s["c"],"/customer/generate-route"),t)},l=function(t){return Object(r["c"])("".concat(s["c"],"/customer/send-sale"),t)},h=function(t){return Object(r["c"])("".concat(s["c"],"/sale/send-dispatch"),t)},d=function(t){return Object(r["a"])("".concat(s["c"],"/customer/query-detail-freight"),t)},p=function(t){return Object(r["c"])("".concat(s["c"],"/customer/query-list-freight"),t)},f=function(t){return Object(r["c"])("".concat(s["c"],"/sale/query-list-freight"),t)},m=function(t){return Object(r["c"])("".concat(s["c"],"/dispatch/query-list-freight"),t)},g=function(t){return Object(r["a"])("".concat(s["c"],"/sale/query-detail-freight"),t)},v=function(t){return Object(r["a"])("".concat(s["c"],"/dispatch/query-detail-freight"),t)},b=function(t){return Object(r["a"])("".concat(s["c"],"/customer/get-task-affix/")+t.trspType+"/"+t.logisticsType)},y=function(t){return Object(r["a"])("".concat(s["c"],"/get/generate"),t)},_=function(t){return Object(r["c"])("".concat(s["c"],"/customer/agree-scheme"),t)},C=function(t){return Object(r["c"])("".concat(s["c"],"/customer/disagree-scheme"),t)},k=function(t){return Object(r["c"])("".concat(s["c"],"/sale/refuse-recommend"),t)},S=function(t){return Object(r["c"])("".concat(s["c"],"/sale/agree-recommend"),t)},w=function(t){return Object(r["c"])("".concat(s["c"],"/dispatch/bak-sale"),t)},R=function(t){return Object(r["c"])("".concat(s["c"],"/customer/cancel"),t)}},b620:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showCheckbox?a("Checkbox",{staticClass:"card-check",on:{"on-change":function(e){return t.checkChange(t.logistics,t.isCheck)}},model:{value:t.isCheck,callback:function(e){t.isCheck=e},expression:"isCheck"}}):t._e(),a("Card",{class:{"card-margin":1==t.showCheckbox}},[t._t("tab-title"),t._t("tab-operat"),a("Divider"),t._t("tab-content"),t._t("tab-bottom")],2)],1)},s=[],n={name:"adt-list-item",props:{showCheckbox:{type:Boolean,default:!1},logistics:{type:Object,default:function(){}},resetCheckStatus:{type:Boolean,default:!1}},data:function(){return{showModal:!1,isCheck:!1}},watch:{resetCheckStatus:function(){this.isCheck=!1}},methods:{checkChange:function(t,e){this.$emit("checkData",t,e)}}},i=n,c=a("2877"),o=Object(c["a"])(i,r,s,!1,null,null,null);e["a"]=o.exports},d733:function(t,e,a){}}]);