(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8acc7ce"],{6520:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"freight-request"},[a("adt-btns",{attrs:{titleNames:t.titleTabNames,btnIndex:t.btnIndex,width:160},on:{handleBtn:t.goToOtherProductList}}),a("adt-search-folder",{attrs:{searchRouter:{query:{freightReqStatus:t.statusValue,departurePort:t.search.departurePort,trsspmPort:t.search.trsspmPort,destinationPort:t.search.destinationPort}},isTitle:!1,isStatus:!0}},[a("template",{slot:"status"},[a("div",{staticClass:"status"},[a("div",{staticClass:"status-left"},[a("p",[a("i",[t._v("*")]),t._v(" 货运要求状态:")]),t._l(t.auditStatusList,(function(e,s){return a("span",{key:s,class:{"click-status":t.auditStatusNum==s},on:{click:function(a){return t.auditStatus(s,e)}}},[t._v(" "+t._s(e.dictionaryValue)+" ")])}))],2)])]),a("template",{slot:"always-show"},[a("div",{staticClass:"public-transit"},[a("Form",{ref:"search",attrs:{model:t.search,inline:"","label-colon":""}},[a("FormItem",{staticClass:"min-width",attrs:{label:"启运地"}},[a("adt-city-selector",{on:{"on-change":t.handelDirStart}})],1),a("FormItem",{attrs:{label:"选择场所"}},[a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.search.departurePort,callback:function(e){t.$set(t.search,"departurePort",e)},expression:"search.departurePort"}},t._l(t.departurePort,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{staticClass:"min-width",attrs:{label:"中转地"}},[a("adt-city-selector",{on:{"on-change":t.handelDirTrsspmPort}})],1),a("FormItem",{attrs:{label:"选择场所"}},[a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.search.trsspmPort,callback:function(e){t.$set(t.search,"trsspmPort",e)},expression:"search.trsspmPort"}},t._l(t.trsspmPort,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("br"),a("FormItem",{staticClass:"min-width",attrs:{label:"目的地"}},[a("adt-city-selector",{on:{"on-change":t.handelDirEnd}})],1),a("FormItem",{attrs:{label:"选择场所"}},[a("Select",{attrs:{filterable:"",clearable:""},model:{value:t.search.destinationPort,callback:function(e){t.$set(t.search,"destinationPort",e)},expression:"search.destinationPort"}},t._l(t.destinationPort,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"运输类型"}},[a("Select",{attrs:{clearable:""},model:{value:t.search.trspType,callback:function(e){t.$set(t.search,"trspType",e)},expression:"search.trspType"}},t._l(t.trspType,(function(e,s){return a("Option",{key:s,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"货物类型"}},[a("Select",{attrs:{clearable:""},model:{value:t.search.cargoType,callback:function(e){t.$set(t.search,"cargoType",e)},expression:"search.cargoType"}},t._l(t.cargoType,(function(e,s){return a("Option",{key:s,attrs:{value:e.dictionaryKey}},[t._v(t._s(e.dictionaryValue))])})),1)],1),a("FormItem",{attrs:{label:"企业名称"}},[a("Input",{attrs:{type:"text"},model:{value:t.search.enterpriseCode,callback:function(e){t.$set(t.search,"enterpriseCode",e)},expression:"search.enterpriseCode"}})],1),a("FormItem",{attrs:{label:"创建人"}},[a("Input",{attrs:{type:"text"},model:{value:t.search.createBy,callback:function(e){t.$set(t.search,"createBy",e)},expression:"search.createBy"}})],1)],1)],1)])],2),a("div",{staticClass:"btns-paginator"},[a("AdtButton",[a("Button",{on:{click:t.addFreight}},[t._v("新建货运要求"),a("Icon",{attrs:{type:"ios-add-circle-outline"}})],1)],1),a("adt-paginator",{attrs:{currentPage:~~t.page,total:~~t.total}})],1),a("div",{staticClass:"public-component-line"}),a("div",{staticClass:"public-list"},t._l(t.listData,(function(e,s){return a("Col",{key:s,staticClass:"public-component-card public-card-width",attrs:{span:"24"}},[a("adt-list-item",{attrs:{data:e,showCheckbox:!0},on:{checkData:t.checkData}},[a("template",{slot:"tab-title"},[a("span",[t._v("货运要求编号:"+t._s(e.freightReqCode))])]),a("template",{slot:"tab-operat"},[a("span",{staticClass:"card-status-success",class:{"card-status-error":"未同意方案"==e.freightReqStatus,"card-status":"取消货运要求"==e.freightReqStatus}},[t._v(t._s(e.freightReqStatus))]),a("Poptip",{staticClass:"card-icon",attrs:{placement:"right-start"}},[a("span",[t._v("编辑要求")]),a("Icon",{attrs:{type:"md-arrow-dropdown"}}),"1"===t.queryType?a("div",{staticClass:"card-poptip-font",attrs:{slot:"content"},slot:"content"},[a("div",{on:{click:function(a){return t.detail(e)}}},[t._v("查看详情")]),"待销售处理"===e.freightReqStatus?a("div",{on:{click:function(a){return t.send(e)}}},[t._v("发送要求")]):t._e(),"已同意方案"===e.freightReqStatus?a("div",{on:{click:function(a){return t.viewRecommendations(e)}}},[t._v("查看推荐方案")]):t._e(),"已反馈方案"===e.freightReqStatus||"调度已反馈方案"===e.freightReqStatus?a("div",{on:{click:function(a){return t.ViewLogisticsSolution(e)}}},[t._v("查看物流方案")]):t._e()]):a("div",{staticClass:"card-poptip-font",attrs:{slot:"content"},slot:"content"},[a("div",{on:{click:function(a){return t.detail(e)}}},[t._v("查看详情")]),"未发送"===e.freightReqStatus||"取消货运要求"===e.freightReqStatus?a("div",{on:{click:function(a){return t.send(e)}}},[t._v("发送要求")]):t._e(),"待调度处理"===e.freightReqStatus||"调度已反馈方案"===e.freightReqStatus||"未同意方案"===e.freightReqStatus||"已同意方案"===e.freightReqStatus?a("div",{on:{click:function(a){return t.cancel(e)}}},[t._v("取消要求")]):t._e(),"已同意方案"===e.freightReqStatus?a("div",{on:{click:function(a){return t.viewRecommendations(e)}}},[t._v("查看推荐方案")]):t._e()])],1)],1),a("template",{slot:"tab-content"},[a("div",{staticClass:"public-modify-record data-item tab-content"},[e.freightRouteList?a("div",{staticClass:"collapse"},[a("Collapse",{attrs:{accordion:""}},[a("Panel",{attrs:{name:"1"}},[a("Row",[a("Col",{attrs:{span:"22"}},[a("ul",t._l(e.freightRouteList[0].roadList,(function(s,r){return a("li",{key:r},[a("span",{staticClass:"path"},[t._v(t._s(s.departurePort))]),a("span",{staticClass:"desc"},[t._v(t._s(s.serverParam.logisticsType)+"-"+t._s(s.serverParam.trspType))]),a("i",[t._v(">>")]),r===e.freightRouteList[0].roadList.length-1?[a("span",{staticClass:"path last-path"},[t._v(t._s(s.destinationPort))])]:t._e()],2)})),0),a("p",{staticClass:"status"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:"0"===e.freightRouteList[0].matchScheme,expression:"product.freightRouteList[0].matchScheme === '0'"}],attrs:{type:"ios-information-circle"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:"1"===e.freightRouteList[0].matchScheme,expression:"product.freightRouteList[0].matchScheme === '1'"}],attrs:{type:"ios-checkmark-circle"}}),t._v(" "+t._s("0"===e.freightRouteList[0].matchScheme?"未匹配到物流方案":"已匹配到物流方案")+" ")],1)]),a("Col",{attrs:{span:"2"}})],1),a("div",{attrs:{slot:"content"},slot:"content"},t._l(e.freightRouteList,(function(e,s){return a("Row",{directives:[{name:"show",rawName:"v-show",value:0!==s,expression:"index!==0"}],key:s,staticClass:"content-row"},[a("Col",{attrs:{span:"22"}},[a("ul",t._l(e.roadList,(function(s,r){return a("li",{key:r},[a("span",{staticClass:"path"},[t._v(t._s(s.departurePort))]),a("span",{staticClass:"desc"},[t._v(t._s(s.serverParam.logisticsType)+"-"+t._s(s.serverParam.trspType))]),a("i",[t._v(">>")]),r===e.roadList.length-1?[a("span",{staticClass:"path last-path"},[t._v(t._s(s.destinationPort))])]:t._e()],2)})),0),a("p",{staticClass:"status"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:"0"===e.matchScheme,expression:"itemList.matchScheme === '0'"}],attrs:{type:"ios-information-circle"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:"1"===e.matchScheme,expression:"itemList.matchScheme === '1'"}],attrs:{type:"ios-checkmark-circle"}}),t._v(" "+t._s("0"===e.matchScheme?"未匹配到物流方案":"已匹配到物流方案")+" ")],1)])],1)})),1)],1)],1)],1):t._e()])]),a("template",{slot:"tab-bottom"},[a("div",{staticClass:"tab-bottom"},[a("Row",[a("Col",{attrs:{span:"24"}},[t._v("录入时间："+t._s(t.timestampFormat(e.createDatetime)))])],1)],1)])],2)],1)})),1)],1)},r=[],n=(a("ecb4"),a("2eeb"),a("ea69"),a("e18c"),a("e35a"),a("9cf3"),a("80a0")),i=(a("b449"),a("5d83")),c=a("77ab"),o=(a("e56e"),a("7b46")),u=a("b620"),l=a("8a9d"),h=a("90fe"),d={mixins:[o["a"]],components:{AdtListItem:u["a"]},data:function(){return{btnIndex:1,titleTabNames:["接收的要求","录入的要求"],dataValue:[],search:{departurePort:"",destinationPort:"",trsspmPort:"",trspType:"",cargoType:"",createBy:"",enterpriseCode:""},departurePort:[],trsspmPort:[],destinationPort:[],trspType:this.$getDictionary("TRANSPORT_TYPE")||[],cargoType:this.$getDictionary("GOODS_TYPE")||[],freightReqParam:{},listData:[],selectList:{},transitLoading:!1,transitData:[],list:["加拿大","北级","北京","加州","哈尔滨","邯郸","韩国"],transitSelect:[],checkList:[],auditStatusNum:"0",auditStatusList:this.$getDictionary("FREIGHTREQ_STATUS"),statusValue:"PENDSALE",queryType:"1"}},mounted:function(){console.log(this.auditStatusList)},methods:{timestampFormat:function(t){return Object(h["e"])(t)},_handelDir:function(t,e){return new Promise((function(e,a){var s=t[t.length-1],r=t[t.length-2];"110000000000"!=r&&"120000000000"!=r&&"500000000000"!=r&&"310000000000"!=r||(s=r),Object(c["c"])({city:s}).then((function(t){var a=t.data,s=a[0],r=s.map((function(t){return{value:t.sttnCode,label:t.sttnName}}));e(r)}))}))},handelDirStart:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e._handelDir(t.value);case 2:s=a.sent,e.departurePort=s;case 4:case"end":return a.stop()}}),a)})))()},handelDirTrsspmPort:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e._handelDir(t.value);case 2:s=a.sent,e.trsspmPort=s;case 4:case"end":return a.stop()}}),a)})))()},handelDirEnd:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e._handelDir(t.value);case 2:s=a.sent,e.destinationPort=s;case 4:case"end":return a.stop()}}),a)})))()},edit:function(t){},detail:function(t){"未发送"===t.freightReqStatus?this.$router.push("/freight-request/feedback-detail/".concat(t.freightReqCode)):this.$router.push("/freight-request/sale-to-edit/".concat(t.freightReqCode))},ViewLogisticsSolution:function(t){window.localStorage.setItem("freightData",JSON.stringify(t)),this.$router.push({path:"/logistics-solutions/customer-service-plan/1",query:{sign:"viewLogisticsSolution"}})},viewRecommendations:function(t){window.localStorage.setItem("freightData",JSON.stringify(t)),this.$router.push({path:"/logistics-solutions/customer-service-plan/1",query:{sign:"viewRecommendations"}})},addFreight:function(){this.$router.push("/freight-request/sale-entry")},checkData:function(t,e){t&&e?this.checkList.push(t):t&&!e&&this.checkList.splice(this.checkList.indexOf(t),1),this.selectList={params:this.checkList}},auditStatus:function(t,e){this.auditStatusNum=t,this.statusValue=e.dictionaryKey},dataInit:function(){this.getData()},getData:function(){var t=this,e=Object(n["a"])(Object(n["a"])({size:10,page:this.page,freightReqStatus:this.statusValue},this.search),{},{queryType:this.queryType});Object(l["m"])({data:e}).then((function(e){t.total=e.data.totalElements,t.listData=e.data.content}))},send:function(t){var e=this,a={freightReqCode:t.freightReqCode,freightReqStatus:t.freightReqStatus};Object(l["n"])({data:a}).then((function(t){e.$Message.info(t.message),e.getData()}))},goToOtherProductList:function(t){switch(this.btnIndex=t+1,t){case 0:this.queryType="1",this.statusValue="PENDSALE",this.getData();break;case 1:this.statusValue="UNSENT",this.queryType="0",this.getData();break}}}},p=d,f=(a("97c9"),a("4023")),m=Object(f["a"])(p,s,r,!1,null,"fb99cf6c",null);e["default"]=m.exports},"7b46":function(t,e,a){"use strict";e["a"]={props:{page:{default:1}},data:function(){return{total:0,perpage:15}},created:function(){this.dataInit("judgment")},watch:{$route:function(){this.dataInit()}},methods:{paginatorInit:function(t,e){this.perpage=t,this.total=e}}}},"8a9d":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"k",(function(){return i})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return o})),a.d(e,"f",(function(){return u})),a.d(e,"o",(function(){return l})),a.d(e,"n",(function(){return h})),a.d(e,"i",(function(){return d})),a.d(e,"j",(function(){return p})),a.d(e,"m",(function(){return f})),a.d(e,"e",(function(){return m})),a.d(e,"l",(function(){return g})),a.d(e,"d",(function(){return v})),a.d(e,"h",(function(){return b})),a.d(e,"g",(function(){return y}));var s=a("2934"),r=a("4ec3"),n=function(t){return Object(s["b"])("".concat(r["c"],"/customer/add-freight"),t)},i=function(t){return Object(s["b"])("".concat(r["c"],"/sale/add-freight"),t)},c=function(t){return Object(s["b"])("".concat(r["c"],"/dispatch/add-freight"),t)},o=function(t){return Object(s["b"])("".concat(r["c"],"/customer/add-freight-simple"),t)},u=function(t){return Object(s["b"])("".concat(r["c"],"/customer/generate-route"),t)},l=function(t){return Object(s["b"])("".concat(r["c"],"/customer/send-sale"),t)},h=function(t){return Object(s["b"])("".concat(r["c"],"/sale/send-dispatch"),t)},d=function(t){return Object(s["a"])("".concat(r["c"],"/customer/query-detail-freight"),t)},p=function(t){return Object(s["b"])("".concat(r["c"],"/customer/query-list-freight"),t)},f=function(t){return Object(s["b"])("".concat(r["c"],"/sale/query-list-freight"),t)},m=function(t){return Object(s["b"])("".concat(r["c"],"/dispatch/query-list-freight"),t)},g=function(t){return Object(s["a"])("".concat(r["c"],"/sale/query-detail-freight"),t)},v=function(t){return Object(s["a"])("".concat(r["c"],"/dispatch/query-detail-freight"),t)},b=function(t){return Object(s["a"])("".concat(r["c"],"/customer/get-task-affix/")+t.trspType+"/"+t.logisticsType)},y=function(t){return Object(s["a"])("".concat(r["c"],"/get/generate"),t)}},"97c9":function(t,e,a){"use strict";var s=a("d1b0"),r=a.n(s);r.a},b620:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showCheckbox?a("Checkbox",{staticClass:"card-check",on:{"on-change":function(e){return t.checkChange(t.logistics,t.isCheck)}},model:{value:t.isCheck,callback:function(e){t.isCheck=e},expression:"isCheck"}}):t._e(),a("Card",{class:{"card-margin":1==t.showCheckbox}},[t._t("tab-title"),t._t("tab-operat"),a("Divider"),t._t("tab-content"),t._t("tab-bottom")],2)],1)},r=[],n={name:"adt-list-item",props:{showCheckbox:{type:Boolean,default:!1},logistics:{type:Object,default:function(){}},resetCheckStatus:{type:Boolean,default:!1}},data:function(){return{showModal:!1,isCheck:!1}},watch:{resetCheckStatus:function(){this.isCheck=!1}},methods:{checkChange:function(t,e){this.$emit("checkData",t,e)}}},i=n,c=a("4023"),o=Object(c["a"])(i,s,r,!1,null,null,null);e["a"]=o.exports},d1b0:function(t,e,a){}}]);
//# sourceMappingURL=chunk-f8acc7ce.07218299.js.map