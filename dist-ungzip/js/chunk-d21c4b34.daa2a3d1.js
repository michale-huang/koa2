(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d21c4b34"],{"2f2c":function(t,e,s){"use strict";s.d(e,"d",(function(){return a})),s.d(e,"e",(function(){return c})),s.d(e,"f",(function(){return r})),s.d(e,"l",(function(){return o})),s.d(e,"c",(function(){return d})),s.d(e,"b",(function(){return u})),s.d(e,"i",(function(){return l})),s.d(e,"m",(function(){return h})),s.d(e,"g",(function(){return m})),s.d(e,"j",(function(){return f})),s.d(e,"n",(function(){return p})),s.d(e,"h",(function(){return g})),s.d(e,"k",(function(){return C})),s.d(e,"a",(function(){return b}));var i=s("2934"),n=s("4ec3"),a=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/getSchemeList"),t)},c=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/get-list-dspt"),t)},r=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/get-list-mkt"),t)},o=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/recommend-pass"),t)},d=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/get-scheme-details"),t)},u=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/get-scene-list"),t)},l=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/recommend-check"),t)},h=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/recommend-route"),t)},m=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/recommend-all"),t)},f=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/recommend-check-cstm"),t)},p=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/recommend-route-cstm"),t)},g=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/recommend-all-cstm"),t)},C=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/recommend-modify"),t)},b=function(t){return Object(i["b"])("".concat(n["d"],"/scheme/confirm-only-scheme"),t)}},3412:function(t,e,s){},"34d9":function(t,e,s){"use strict";var i=s("8216"),n=s("be57");t.exports=i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},"73bd":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"content-none":1==t.isRecommend}},[0!=t.isRecommend||"mkt"!=t.distinguishCharacter&&"cstm"!=t.distinguishCharacter?t._e():s("div",{staticClass:"btn-audit clearfix"},[s("Button",{staticClass:"btn-recommend",on:{click:t.refuseRecommend}},[t._v("拒绝推荐")]),s("Button",{staticClass:"btn-recommend",attrs:{type:"primary"},on:{click:t.agreeRecommend}},[t._v("同意推荐")])],1),s("AdtMyModal",{attrs:{title:"不同意推荐方案原因",okText:"确定",cancelText:"取消货运要求",showThirdTitle:"编辑货运要求",isShowThirdBtn:!0,showModal:t.isModalRecommend},on:{"on-visible-change":t.isShow,"on-ok":function(e){return t.save()},"on-cancel":function(e){return t.cancel()},handleFeatures:t.handleFeatures}},[s("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[s("FormItem",{attrs:{prop:"remark",label:"不同意推荐原因:"}},[s("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:t.formInline.remark,callback:function(e){t.$set(t.formInline,"remark",e)},expression:"formInline.remark"}})],1)],1)],1),s("adt-logistics-route",{attrs:{logisticsRouteList:t.listDatas},on:{clickPath:t.clickPath}}),"dspt"==t.distinguishCharacter?s("Alert",{staticClass:"alart-box",attrs:{type:"warning","show-icon":""}},[t._v("根据货运要求匹配的推荐物流服务方案请在详情内确认方案后推荐给销售！")]):t._e(),s("div",{staticClass:"btn-pagina"},[0==t.isRecommend||1==t.isRecommend||3==t.isRecommend?s("span",{staticClass:"title"},[t._v("推荐物流服务方案")]):t._e(),2==t.isRecommend?s("div",{staticClass:"btn-tabs"},[s("adt-btns",{attrs:{btnIndex:t.btnIndex,titleNames:t.titleNames},on:{handleBtn:t.handleBtn}}),1==t.btnIndex&&"dspt"==t.distinguishCharacter||2==t.btnIndex&&"mkt"==t.distinguishCharacter?s("AdtButton",[s("Button",{on:{click:function(e){return t.recommendCheck()}}},[t._v("推荐勾选"),s("Icon",{attrs:{type:"ios-add-circle-outline"}})],1),s("Button",{on:{click:function(e){return t.recommendAll()}}},[t._v("推荐全部"),s("Icon",{attrs:{type:"ios-add-circle-outline"}})],1),s("Button",{on:{click:function(e){return t.recommendCurrent()}}},[t._v("推荐当前路线方案"),s("Icon",{attrs:{type:"ios-add-circle-outline"}})],1)],1):t._e()],1):t._e(),s("adt-paginator",{staticClass:"pagination",attrs:{currentPage:~~t.page,total:~~t.total}})],1),s("div",{staticClass:"public-component-line"}),s("div",{staticClass:"public-list"},t._l(t.listData,(function(e,i){return s("div",{key:i,staticClass:"public-component-card"},[s("AdtListItem",{attrs:{logistics:e,showCheckbox:t.isCheckbox},on:{checkData:t.checkData}},[s("template",{slot:"tab-title"},[s("span",[t._v("物流方案编号:"+t._s(e.logisticsSchemeCode))])]),s("template",{slot:"tab-operat"},["dspt"==t.distinguishCharacter?s("span",{class:{"card-status-success":"disagree"==e.statusCode,"card-status-error":"refuse"==e.statusCode,"card-status":"agree"==e.statusCode}},[t._v(t._s(e.status))]):t._e(),s("Poptip",{staticClass:"card-icon",attrs:{placement:"right-start"}},[s("span",[t._v("编辑")]),s("Icon",{attrs:{type:"md-arrow-dropdown"}}),"cstm"==t.distinguishCharacter?s("div",{staticClass:"card-poptip-font",attrs:{slot:"content"},slot:"content"},[s("p",{on:{click:function(s){return t.detail(e)}}},[t._v("查看详情")]),s("p",{on:{click:function(s){return t.delegate(e)}}},[t._v("发起委托")])]):t._e(),"mkt"==t.distinguishCharacter?s("div",{staticClass:"card-poptip-font",attrs:{slot:"content"},slot:"content"},[s("p",{on:{click:function(s){return t.detail(e)}}},[t._v("查看详情")]),s("p",{on:{click:function(s){return t.delegate(e)}}},[t._v("发起委托")]),s("p",{on:{click:function(s){return t.recommend(e)}}},[t._v("推荐客户")])]):t._e(),"dspt"==t.distinguishCharacter?s("div",{staticClass:"card-poptip-font",attrs:{slot:"content"},slot:"content"},[s("p",{on:{click:function(s){return t.delegate(e)}}},[t._v("发起委托")]),s("p",{on:{click:function(s){return t.edit(e)}}},[t._v("编辑方案")]),s("p",{on:{click:function(s){return t.confirm(e)}}},[t._v("确认方案")]),s("p",{on:{click:function(s){return t.detail(e)}}},[t._v("查看详情")]),s("p",{on:{click:function(s){return t.recommend(e)}}},[t._v("推荐销售")])]):t._e()],1)],1),s("template",{slot:"tab-content"},[s("div",{staticClass:"card-route"},t._l(e.routeLists,(function(i,n){return s("div",{key:n,staticClass:"card-content"},[s("span",{staticClass:"card-outset"},[t._v(t._s(i.departurePort))]),s("div",{staticClass:"card-transit"},[s("div",{staticClass:"card-way"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},["陆运"==i.trspMode?s("use",{attrs:{fill:"#FFBB32","xlink:href":"#icon-andaotongcaidanICON_huoche"}}):t._e(),"水运"==i.trspMode?s("use",{attrs:{fill:"#FFBB32","xlink:href":"#icon-andaotongcaidanICON_lunchuan"}}):t._e(),"3"==i.trspMode?s("use",{attrs:{fill:"#FFBB32","xlink:href":"#icon-feiji800"}}):t._e()])]),s("div",{staticClass:"card-line"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{fill:"#02ADB5","xlink:href":"#icon-andaotongcaidanICON_jiantou3"}})])]),s("div",{staticClass:"card-genre"},[t._v(t._s(i.logisticsType)+t._s(i.trspType))])]),n===e.routeLists.length-1?[s("span",{staticClass:"card-address"},[t._v(t._s(i.destinationPort))])]:t._e()],2)})),0)]),s("template",{slot:"tab-bottom"},["cstm"==t.distinguishCharacter?s("div",{staticClass:"card-bottom"},[s("span",[t._v("时效: "+t._s(e.hghtTmeff)+t._s(e.tmeffUnit))]),s("span"),s("span",{staticClass:"card-right"},[s("span",[t._v("价格:")]),s("span",{staticClass:"card-right-size"},[t._v(t._s(e.lwstPrice))]),s("span",[t._v("/"+t._s(e.offerCurr))])])]):t._e(),"mkt"==t.distinguishCharacter||"dspt"==t.distinguishCharacter?s("div",{staticClass:"card-bottom"},[s("span",[t._v("时效: "+t._s(e.lwstTmeff)+"-"+t._s(e.hghtTmeff)+t._s(e.tmeffUnit))]),s("span"),s("span",{staticClass:"card-right"},[s("span",[t._v("价格:")]),s("span",{staticClass:"card-right-size"},[t._v(t._s(e.lwstPrice)+"-"+t._s(e.hghtPrice))]),s("span",[t._v("/"+t._s(e.offerCurr))])])]):t._e()])],2)],1)})),0)],1)},n=[],a=(s("fe59"),s("98e0"),s("e18c"),s("34d9"),s("96db"),s("08ba"),s("af86"),s("7b46")),c=s("8c1bd"),r=s("b620"),o=s("b962"),d=s("2f2c"),u={mixins:[a["a"]],components:{AdtLogisticsRoute:c["a"],AdtListItem:r["a"]},props:{value:""},data:function(){return{search:{},isModalRecommend:!1,distinguishCharacter:"",formInline:{remark:""},ruleInline:{remark:[o["a"].required("原因")[0]]},isRecommend:0,isCheckbox:!1,titleNames:[],confirmStatus:"0",recommendNames:["已推荐客户方案","未推荐客户方案"],confirmNames:["已确认方案","未确认方案"],btnIndex:0,selectList:[],selectListData:[],auditStatusList:[{code:"unreviewed",status:"未审核"},{code:"stock",status:"未货好"},{code:"progress",status:"执行中"}],enableStatusList:[{code:"unreviewed",status:"已启用"},{code:"stock",status:"未启用"},{code:"progress",status:"已启用"}],listData:[],listDatas:[{statusCode:"disagree",status:"需求未同意",logisticsPlanNumber:"物流方案编号1",time:"时效",price:"价格",matchScheme:"1",roadList:[{departurePort:"重庆1",destinationPort:"香港",transport:"海运",type:"国内集装箱"},{departurePort:"香港",destinationPort:"纽约",transport:"空运",type:"国内集装箱"},{departurePort:"纽约",destinationPort:"北京",transport:"空运",type:"国内集装箱"}]},{statusCode:"disagree",status:"需求未同意",logisticsPlanNumber:"物流方案编号1",time:"时效",price:"价格",matchScheme:"0",roadList:[{departurePort:"重庆1",destinationPort:"香港",transport:"海运",type:"国内集装箱"},{departurePort:"香港",destinationPort:"纽约",transport:"空运",type:"国内集装箱"},{departurePort:"纽约",destinationPort:"北京",transport:"空运",type:"国内集装箱"}]},{statusCode:"disagree",status:"需求未同意",logisticsPlanNumber:"物流方案编号1",time:"时效",price:"价格",matchScheme:"1",roadList:[{departurePort:"重庆1",destinationPort:"香港",transport:"海运",type:"国内集装箱"},{departurePort:"香港",destinationPort:"纽约",transport:"空运",type:"国内集装箱"},{departurePort:"纽约",destinationPort:"北京",transport:"空运",type:"国内集装箱"}]}]}},mounted:function(){this.getPassData()},methods:{getPassData:function(){},isShow:function(t){this.isModalRecommend=t},dataInit:function(){this.getUserData(),this.getData()},getUserData:function(){this.distinguishCharacter="dspt","mkt"==this.distinguishCharacter&&(this.titleNames=this.recommendNames),"dspt"==this.distinguishCharacter&&(this.titleNames=this.confirmNames,this.isCheckbox=!0,this.isRecommend=2,this.btnIndex=1)},getData:function(t){var e=this,s={freightReqCode:"LC202007070707070001",page:0,routeCode:"RT1001",routeList:[{departurePort:"20201001",destinationPort:"20201002",roadCode:"R001"},{departurePort:"20201002",destinationPort:"20201010",roadCode:"R002"}],size:2};"dspt"==this.distinguishCharacter&&(1==this.btnIndex&&(s.stepId="20001"),2==this.btnIndex&&(s.stepId="20002"),Object(d["e"])({data:s}).then((function(t){200==t.code&&(e.listData=t.data.content)}))),"mkt"!=this.distinguishCharacter&&"cstm"!=this.distinguishCharacter||("mkt"==this.distinguishCharacter&&(0==this.confirmStatus&&(s.mktFirst="true"),1==this.confirmStatus&&(s.stepId="20005",s.mktFirst="false"),2==this.confirmStatus&&(s.stepId="20006",s.mktFirst="false")),"cstm"==this.distinguishCharacter&&(s.stepId="20005",s.mktFirst="false"),Object(d["f"])({data:s}).then((function(t){200==t.code&&(e.listData=t.data.content||[],"mkt"==e.distinguishCharacter&&("20007"==e.listData[0].mktStepId&&(e.isRecommend=2),"20008"==e.listData[0].mktStepId&&(e.isRecommend=1)),"cstm"==e.distinguishCharacter&&("20009"==e.listData[0].cstmStepId&&(e.isRecommend=3),"20010"==e.listData[0].cstmStepId&&(e.isRecommend=1)))})))},refuseRecommend:function(){this.isModalRecommend=!0},agreeRecommend:function(){var t=this,e={freightReqCode:"LC202007070707070001",flag:!0,roleType:this.distinguishCharacter};Object(d["l"])({data:e}).then((function(e){200==e.code&&("mkt"==t.distinguishCharacter&&(t.isRecommend=2),"cstm"==t.distinguishCharacter&&(t.isRecommend=3))}))},save:function(){var t=this,e={freightReqCode:"LC202007070707070001",flag:!1,roleType:this.distinguishCharacter,remark:this.formInline.remark};this.$refs["formInline"].validate((function(s){s&&Object(d["l"])({data:e}).then((function(e){200==e.code&&(t.isRecommend=1,t.isModalRecommend=!1,t.$refs.formInline.resetFields())}))}))},cancel:function(){this.isModalRecommend=!0,this.$refs.formInline.resetFields()},handleFeatures:function(){"cstm"==this.distinguishCharacter&&this.$router.push({path:"/freight-request/simple-entry"}),"mkt"!=this.distinguishCharacter&&"dspt"!=this.distinguishCharacter||this.$router.push({path:"/freight-request/detail-entry"})},clickPath:function(t){console.log(t),this.getData(t)},handleBtn:function(t){this.btnIndex=t+1,this.confirmStatus=this.btnIndex,this.getData()},recommendCheck:function(){var t=this.selectListData;"dspt"==this.distinguishCharacter&&Object(d["i"])({data:t}).then((function(t){200==t.code&&console.log(t.data)})),"mkt"==this.distinguishCharacter&&Object(d["j"])({data:t}).then((function(t){200==t.code&&console.log(t.data)}))},recommendAll:function(){"dspt"==this.distinguishCharacter&&Object(d["g"])({data:data}).then((function(t){200==t.code&&console.log(t.data)})),"dspt"==this.distinguishCharacter&&Object(d["h"])({data:data}).then((function(t){200==t.code&&console.log(t.data)}))},recommendCurrent:function(){"dspt"==this.distinguishCharacter&&Object(d["m"])({data:data}).then((function(t){200==t.code&&console.log(t.data)})),"dspt"==this.distinguishCharacter&&Object(d["n"])({data:data}).then((function(t){200==t.code&&console.log(t.data)}))},checkData:function(t,e){t.check=e,1==e&&this.selectList.push(t);var s=new Set(this.selectList),i=Array.from(s),n=[];i.forEach((function(t){1==t.check&&n.push(t)})),this.selectListData=n;var a=[];n.forEach((function(t){var e={logisticsSchemeCode:t.logisticsSchemeCode,freightReqCode:t.freightReqCode,routeCode:t.routeCode};a.push(e)})),this.selectListData=a,console.log(this.selectListData)},delegate:function(t){var e=t;this.$router.push({path:"/logisstics-commission/add-single",query:{data:JSON.stringify(e)}})},collect:function(t){console.log("收藏")},uncollect:function(t){console.log("收藏")},recommend:function(t){var e=[{logisticsSchemeCode:t.logisticsSchemeCode,freightReqCode:t.freightReqCode,routeCode:t.routeCode}];"dspt"==this.distinguishCharacter&&Object(d["i"])({data:e}).then((function(t){200==t.code&&console.log(t.data)})),"mkt"==this.distinguishCharacter&&Object(d["j"])({data:e}).then((function(t){200==t.code&&console.log(t.data)}))},edit:function(t){this.$router.push({path:"/logistics-solutions/confirmation-logistics-plan"})},detail:function(t){var e=t;window.sessionStorage.setItem("logisticsData",JSON.stringify(e)),this.$router.push({path:"/logistics-solutions/scheme-details"})},confirm:function(t){var e=t;window.sessionStorage.setItem("logisticsData",JSON.stringify(e)),this.$router.push({path:"/logistics-solutions/determine-logistics-solution-service-provider"})},remove:function(t){}}},l=u,h=(s("9af4"),s("4023")),m=Object(h["a"])(l,i,n,!1,null,"8785eca8",null);e["default"]=m.exports},"9af4":function(t,e,s){"use strict";var i=s("3412"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-d21c4b34.daa2a3d1.js.map